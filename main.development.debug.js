'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RENDER_LAYERS = exports.RENDER_LAYER = exports.APPLY_OPTION = exports.APPLY_FILTER = exports.INIT_CONTEXT = undefined;
exports.initContext = initContext;
exports.applyFilter = applyFilter;
exports.applyOption = applyOption;
exports.renderLayer = renderLayer;
exports.renderLayers = renderLayers;

var _canvasUtils = require('../utils/canvas-utils');

var canvasUtils = _interopRequireWildcard(_canvasUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var INIT_CONTEXT = exports.INIT_CONTEXT = 'INIT_CANVAS';
var APPLY_FILTER = exports.APPLY_FILTER = 'APPLY_FILTER';
var APPLY_OPTION = exports.APPLY_OPTION = 'APPLY_OPTION';
var RENDER_LAYER = exports.RENDER_LAYER = 'RENDER_LAYER';
var RENDER_LAYERS = exports.RENDER_LAYERS = 'RENDER_LAYERS';

function initContext(canvas, gl) {
  return function (dispatch) {
    return dispatch({
      type: INIT_CONTEXT,
      payload: Object.assign({}, canvas, {
        context: canvasUtils.initContext(canvas, gl)
      })
    });
  };
}

function applyFilter(canvas, layer, filter) {
  return function (dispatch) {
    var chain = function chain(canvas, dispatch) {};
    var layers = canvas.layers.map(function (_layer, index) {
      if (layer === _layer) {
        _layer = Object.assign({}, layer, {
          filters: Object.assign({}, layer.filters, _defineProperty({}, filter.type, filter))
        });
        chain = function chain(canvas, dispatch) {
          renderLayer(canvas, _layer, index)(dispatch);
        };
      }
      return _layer;
    });
    canvas = Object.assign({}, canvas, { layers: layers });
    dispatch({
      type: APPLY_FILTER,
      payload: canvas
    });
    chain(canvas, dispatch);
  };
}

function applyOption(canvas, option) {
  return function (dispatch) {
    dispatch({
      type: APPLY_OPTION,
      payload: Object.assign({}, canvas, { options: Object.assign({}, canvas.options, _defineProperty({}, option.type, option)) })
    });
  };
}

function renderLayer(canvas, layer, index) {
  return function (dispatch) {
    canvasUtils.renderLayer(canvas.context, layer, index);
    dispatch({
      type: RENDER_LAYER,
      payload: canvas
    });
  };
}

function renderLayers(canvas) {
  return function (dispatch) {
    canvas.layers.forEach(function (layer, index) {
      canvasUtils.renderLayer(canvas.context, layer, index);
    });
    dispatch({
      type: RENDER_LAYERS,
      payload: canvas
    });
  };
}
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.increment = increment;
exports.decrement = decrement;
exports.incrementIfOdd = incrementIfOdd;
exports.incrementAsync = incrementAsync;
var INCREMENT_COUNTER = exports.INCREMENT_COUNTER = 'INCREMENT_COUNTER';
var DECREMENT_COUNTER = exports.DECREMENT_COUNTER = 'DECREMENT_COUNTER';

function increment() {
  return {
    type: INCREMENT_COUNTER
  };
}

function decrement() {
  return {
    type: DECREMENT_COUNTER
  };
}

function incrementIfOdd() {
  return function (dispatch, getState) {
    var _getState = getState();

    var counter = _getState.counter;


    if (counter % 2 === 0) {
      return;
    }

    dispatch(increment());
  };
}

function incrementAsync() {
  var delay = arguments.length <= 0 || arguments[0] === undefined ? 1000 : arguments[0];

  return function (dispatch) {
    setTimeout(function () {
      dispatch(increment());
    }, delay);
  };
}
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SAVE_IMAGE = exports.COMPRESS_IMAGE = exports.SELECT_CANVAS = exports.MOVE_CANVAS = exports.REMOVE_CANVAS = exports.ADD_CANVAS = undefined;
exports.addCanvas = addCanvas;
exports.removeCanvas = removeCanvas;
exports.moveCanvas = moveCanvas;
exports.selectCanvas = selectCanvas;
exports.saveImage = saveImage;

var _canvasUtils = require('../utils/canvas-utils');

var canvasUtils = _interopRequireWildcard(_canvasUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var ADD_CANVAS = exports.ADD_CANVAS = 'ADD_CANVAS';
var REMOVE_CANVAS = exports.REMOVE_CANVAS = 'REMOVE_CANVAS';
var MOVE_CANVAS = exports.MOVE_CANVAS = 'MOVE_CANVAS';
var SELECT_CANVAS = exports.SELECT_CANVAS = 'SELECT_CANVAS';
var COMPRESS_IMAGE = exports.COMPRESS_IMAGE = 'COMPRESS_IMAGE';
var SAVE_IMAGE = exports.SAVE_IMAGE = 'SAVE_IMAGE';

function addCanvas(canvas) {
  return function (dispatch) {
    return dispatch({
      type: ADD_CANVAS,
      payload: canvas
    });
  };
}

function removeCanvas(canvas) {
  return function (dispatch) {
    return dispatch({
      type: REMOVE_CANVAS,
      payload: canvas
    });
  };
}

function moveCanvas(canvas) {
  return function (dispatch) {
    return dispatch({
      type: MOVE_CANVAS,
      payload: canvas
    });
  };
}

function selectCanvas(canvas) {
  return function (dispatch) {
    return dispatch({
      type: SELECT_CANVAS,
      payload: canvas
    });
  };
}

function saveImage(canvas, destination) {
  return function (dispatch) {
    dispatch({
      type: COMPRESS_IMAGE,
      payload: Object.assign({}, canvas, { status: 'compressing' })
    });
    canvasUtils.exportCanvasAsImage(canvas, destination);
    dispatch({
      type: SAVE_IMAGE,
      payload: Object.assign({}, canvas, { status: 'ready' })
    });
  };
}
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.canvasProps = undefined;

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _reactDom = require('react-dom');

var _Canvas = require('./Canvas.css');

var _Canvas2 = _interopRequireDefault(_Canvas);

var _canvasUtils = require('../utils/canvas-utils');

var canvasUtils = _interopRequireWildcard(_canvasUtils);

var _electron = require('electron');

var _Card = require('material-ui/Card');

var _CircularProgress = require('material-ui/CircularProgress');

var _CircularProgress2 = _interopRequireDefault(_CircularProgress);

var _Paper = require('material-ui/Paper');

var _Paper2 = _interopRequireDefault(_Paper);

var _pubsubJs = require('pubsub-js');

var _pubsubJs2 = _interopRequireDefault(_pubsubJs);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Canvas: {
    displayName: 'Canvas'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/Canvas.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/Canvas.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var styles = Object.assign({}, _Canvas2.default, {
  progress: {
    margin: '-15px 0 0 -15px'
  }
});

var Canvas = _wrapComponent('Canvas')(function (_Component) {
  _inherits(Canvas, _Component);

  function Canvas(props, content) {
    _classCallCheck(this, Canvas);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Canvas).call(this, props, content));

    _this.onLoadData = _this.onLoadData.bind(_this);
    _this.onLoadComplete = _this.onLoadComplete.bind(_this);
    _this.onCanvasSelect = _this.onCanvasSelect.bind(_this);
    return _this;
  }

  _createClass(Canvas, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _props = this.props;
      var initContext = _props.initContext;
      var canvas = _props.canvas;

      var gl = this.refs.canvas.getContext('webgl', { preserveDrawingBuffer: true });
      initContext(canvas, gl);
      _electron.ipcRenderer.on('load-data', this.onLoadData);
      _electron.ipcRenderer.on('load-complete', this.onLoadComplete);
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      var canvas = this.props.canvas;

      canvasUtils.cleanUp(canvas.context);
      _electron.ipcRenderer.removeListener('load-data', this.onLoadData);
      _electron.ipcRenderer.removeListener('load-complete', this.onLoadComplete);
    }
  }, {
    key: 'onLoadData',
    value: function onLoadData(event, data) {
      var canvas = this.props.canvas;

      if (canvas.id !== data.id) {
        return;
      }
      var layer = canvas.layers.find(function (layer) {
        return layer.filepath === data.filepath;
      });
      for (var i = 0; i < data.pixels.length; i++) {
        layer.pixels.push(data.pixels[i]);
      }
    }
  }, {
    key: 'onLoadComplete',
    value: function onLoadComplete(event, data) {
      var renderLayers = this.props.renderLayers;
      var canvas = this.props.canvas;

      if (canvas.id !== data.id) {
        return;
      }
      if (data.compressionRatio) {
        var layers = canvas.layers.map(function (layer) {
          if (layer.filepath === data.filepath) {
            return Object.assign({}, layer, { compressionRatio: data.compressionRatio });
          }
          return layer;
        });
        canvas = Object.assign({}, canvas, { layers: layers });
      }
      renderLayers(canvas);
    }
  }, {
    key: 'onCanvasSelect',
    value: function onCanvasSelect(event) {
      var _props2 = this.props;
      var canvas = _props2.canvas;
      var onSelect = _props2.onSelect;

      if (!canvas.layers.length) {
        return;
      }
      if (!canvas.selected) {
        onSelect(canvas);
        return;
      }
      var rect = this.refs.canvas.getBoundingClientRect();
      var xPosition = event.clientX - rect.left;
      var yPosition = event.clientY - rect.top;
      _pubsubJs2.default.publish('CANVAS_' + canvas.id + '_EVENT.SELECT_POS', {
        xPosition: xPosition,
        yPosition: yPosition
      });
      _pubsubJs2.default.publish('CANVAS_' + canvas.id + '_EVENT.SELECT_COLOR', {
        targetColor: canvasUtils.getPixel(canvas, xPosition, yPosition)
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _props3 = this.props;
      var canvas = _props3.canvas;
      var connectDragPreview = _props3.connectDragPreview;
      var connectDragSource = _props3.connectDragSource;
      var isDragging = _props3.isDragging;

      return connectDragPreview(_react3.default.createElement(
        'div',
        { className: styles.canvasContainer, selected: canvas.selected,
          style: {
            left: canvas.left,
            top: canvas.top,
            width: canvas.width,
            height: canvas.height + 50,
            opacity: isDragging ? 0 : 1,
            zIndex: canvas.selected ? 1000 : 1
          } },
        _react3.default.createElement(
          _Paper2.default,
          { zDepth: 2 },
          _react3.default.createElement(
            _Card.Card,
            null,
            _react3.default.createElement(_Card.CardHeader, { title: canvas.title,
              avatar: canvas.status === 'ready' ? null : _react3.default.createElement(_CircularProgress2.default, { style: styles.progress, size: 0.5 }),
              style: { cursor: "move", maxHeight: '50px' },
              ref: function ref(cardHeader) {
                return connectDragSource((0, _reactDom.findDOMNode)(cardHeader));
              },
              titleStyle: { textOverflow: "ellipsis", overflow: "hidden", whiteSpace: "nowrap" } }),
            _react3.default.createElement(
              _Card.CardMedia,
              null,
              _react3.default.createElement('canvas', { id: 'canvas', className: styles.canvas, onClick: this.onCanvasSelect,
                width: canvas.width, height: canvas.height, ref: 'canvas' })
            )
          )
        )
      ));
    }
  }]);

  return Canvas;
}(_react2.Component));

exports.default = Canvas;
var canvasProps = exports.canvasProps = {
  top: 10,
  left: 10,
  width: 640,
  height: 320,
  title: "<No Content>",
  layers: [],
  status: 'ready'
};

Canvas.defaultProps = canvasProps;
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class, _temp;

var _reactRouter = require('react-router');

var _Counter = require('./Counter.css');

var _Counter2 = _interopRequireDefault(_Counter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Counter: {
    displayName: 'Counter'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/Counter.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/Counter.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var Counter = _wrapComponent('Counter')((_temp = _class = function (_Component) {
  _inherits(Counter, _Component);

  function Counter() {
    _classCallCheck(this, Counter);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Counter).apply(this, arguments));
  }

  _createClass(Counter, [{
    key: 'render',
    value: function render() {
      var _props = this.props;
      var increment = _props.increment;
      var incrementIfOdd = _props.incrementIfOdd;
      var incrementAsync = _props.incrementAsync;
      var decrement = _props.decrement;
      var counter = _props.counter;

      return _react3.default.createElement(
        'div',
        null,
        _react3.default.createElement(
          'div',
          { className: _Counter2.default.backButton },
          _react3.default.createElement(
            _reactRouter.Link,
            { to: '/' },
            _react3.default.createElement('i', { className: 'fa fa-arrow-left fa-3x' })
          )
        ),
        _react3.default.createElement(
          'div',
          { className: 'counter ' + _Counter2.default.counter },
          counter
        ),
        _react3.default.createElement(
          'div',
          { className: _Counter2.default.btnGroup },
          _react3.default.createElement(
            'button',
            { className: _Counter2.default.btn, onClick: increment },
            _react3.default.createElement('i', { className: 'fa fa-plus' })
          ),
          _react3.default.createElement(
            'button',
            { className: _Counter2.default.btn, onClick: decrement },
            _react3.default.createElement('i', { className: 'fa fa-minus' })
          ),
          _react3.default.createElement(
            'button',
            { className: _Counter2.default.btn, onClick: incrementIfOdd },
            'odd'
          ),
          _react3.default.createElement(
            'button',
            { className: _Counter2.default.btn, onClick: function onClick() {
                return incrementAsync();
              } },
            'async'
          )
        )
      );
    }
  }]);

  return Counter;
}(_react2.Component), _class.propTypes = {
  increment: _react2.PropTypes.func.isRequired,
  incrementIfOdd: _react2.PropTypes.func.isRequired,
  incrementAsync: _react2.PropTypes.func.isRequired,
  decrement: _react2.PropTypes.func.isRequired,
  counter: _react2.PropTypes.number.isRequired
}, _temp));

exports.default = Counter;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Sidebar = require('../components/Sidebar');

var _Sidebar2 = _interopRequireDefault(_Sidebar);

var _Workspace = require('../containers/Workspace');

var _Workspace2 = _interopRequireDefault(_Workspace);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Editor: {
    displayName: 'Editor'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/Editor.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/Editor.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var Editor = _wrapComponent('Editor')(function (_Component) {
  _inherits(Editor, _Component);

  function Editor() {
    _classCallCheck(this, Editor);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Editor).apply(this, arguments));
  }

  _createClass(Editor, [{
    key: 'render',
    value: function render() {
      var canvases = this.props.canvases;

      var canvas = canvases.find(function (canvas) {
        return canvas.selected;
      });
      var sidebarOpen = canvas !== undefined;
      return _react3.default.createElement(
        'div',
        null,
        _react3.default.createElement(_Sidebar2.default, { canvas: canvas, open: sidebarOpen }),
        _react3.default.createElement(_Workspace2.default, { sidebarOpen: sidebarOpen })
      );
    }
  }]);

  return Editor;
}(_react2.Component));

exports.default = Editor;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _toggle = require('material-ui/toggle');

var _toggle2 = _interopRequireDefault(_toggle);

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _Filter2 = require('./Filter');

var _Filter3 = _interopRequireDefault(_Filter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BitPlanes = function (_Filter) {
  _inherits(BitPlanes, _Filter);

  function BitPlanes(props, content) {
    _classCallCheck(this, BitPlanes);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(BitPlanes).call(this, props, content));

    var planes = {};
    for (var i = 1; i <= 8; i++) {
      planes[i] = true;
    }
    _this.defaultState = {
      type: 'BIT_PLANES',
      disabled: true,
      filter: Filters.bitPlanes,
      planes: planes
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onToggleChange = _this.onToggleChange.bind(_this);
    return _this;
  }

  _createClass(BitPlanes, [{
    key: 'onToggleChange',
    value: function onToggleChange(event) {
      var target = event.target.id.split('_')[1];
      var bit = Object.keys(this.state.planes).find(function (bit) {
        return bit == target;
      });
      var planes = this.state.planes;
      if (bit) {
        planes = Object.assign({}, this.state.planes, _defineProperty({}, bit, !this.state.planes[bit]));
      }
      var options = { planes: planes };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var controls = Object.keys(this.state.planes).map(function (bit) {
        return _react2.default.createElement(_List.ListItem, { key: "plane_" + bit, primaryText: "Plane " + bit, rightToggle: _react2.default.createElement(_toggle2.default, { id: "plane_" + bit, toggled: _this2.state.planes[bit], onToggle: _this2.onToggleChange, disabled: _this2.state.disabled }) });
      });
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Bit Plane Slicing' });
    }
  }]);

  return BitPlanes;
}(_Filter3.default);

exports.default = BitPlanes;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _IconButton = require('material-ui/IconButton');

var _IconButton2 = _interopRequireDefault(_IconButton);

var _colorize = require('material-ui/svg-icons/image/colorize');

var _colorize2 = _interopRequireDefault(_colorize);

var _colors = require('material-ui/styles/colors');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _ColorFill2 = require('./ColorFill');

var _ColorFill3 = _interopRequireDefault(_ColorFill2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {

  input: {
    marginTop: -20,
    width: 170
  },

  inputButton: {
    top: 'initial',
    zIndex: 1
  }
};

var BoundaryFill = function (_ColorFill) {
  _inherits(BoundaryFill, _ColorFill);

  function BoundaryFill(props, content) {
    _classCallCheck(this, BoundaryFill);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(BoundaryFill).call(this, props, content));

    _this.defaultState = {
      type: 'BOUNDARY_FILL',
      filter: Filters.boundaryFill,
      disabled: true,
      xPosition: '',
      yPosition: '',
      targetColor: 0,
      listeners: {
        colorPick: null,
        pixelPos: null
      }
    };
    _this.state = Object.assign({}, _this.defaultState);
    return _this;
  }

  _createClass(BoundaryFill, [{
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'color', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.targetColor, onChange: this.onTargetColorChange, floatingLabelText: 'Boundary Color',
          disabled: this.state.disabled }), rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { style: styles.inputButton, onClick: this.onColorSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.colorPick ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'label', disabled: true, primaryText: 'Pixel Seed', rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { id: 'colorize', onClick: this.onPixelSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.pixelPos ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'xPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.xPosition, onChange: this.onXpositionChange, floatingLabelText: 'X Position',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'yPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.yPosition, onChange: this.onYpositionChange, floatingLabelText: 'Y Position',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Boundary Fill' });
    }
  }]);

  return BoundaryFill;
}(_ColorFill3.default);

exports.default = BoundaryFill;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _pubsubJs = require('pubsub-js');

var _pubsubJs2 = _interopRequireDefault(_pubsubJs);

var _Filter2 = require('./Filter');

var _Filter3 = _interopRequireDefault(_Filter2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ColorFill = function (_Filter) {
  _inherits(ColorFill, _Filter);

  function ColorFill(props, content) {
    _classCallCheck(this, ColorFill);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ColorFill).call(this, props, content));

    _this.onXpositionChange = _this.onXpositionChange.bind(_this);
    _this.onYpositionChange = _this.onYpositionChange.bind(_this);
    _this.onTargetColorChange = _this.onTargetColorChange.bind(_this);
    _this.onColorSelect = _this.onColorSelect.bind(_this);
    _this.onColorRecieve = _this.onColorRecieve.bind(_this);
    _this.onPixelSelect = _this.onPixelSelect.bind(_this);
    _this.onPixelRecieve = _this.onPixelRecieve.bind(_this);
    return _this;
  }

  _createClass(ColorFill, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      _get(Object.getPrototypeOf(ColorFill.prototype), 'componentWillReceiveProps', this).call(this, nextProps);
      this.removeListeners(nextProps.layer.filters[this.defaultState.type]);
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevProps, prevState) {
      if (!prevState.disabled && this.state.disabled) {
        this.removeListeners();
      }
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      this.removeListeners();
    }
  }, {
    key: 'onXpositionChange',
    value: function onXpositionChange(event, xPosition) {
      var layer = this.props.layer;

      var options = { xPosition: xPosition };
      xPosition = parseInt(xPosition);
      if (xPosition < 0) {
        xPosition = 0;
      } else if (xPosition >= layer.width) {
        xPosition = layer.width - 1;
      }
      if (Number.isInteger(xPosition)) {
        options = Object.assign({}, this.state, { xPosition: xPosition });
        this.applyFilter(options);
      }
      this.setState(options);
    }
  }, {
    key: 'onYpositionChange',
    value: function onYpositionChange(event, yPosition) {
      var layer = this.props.layer;

      var options = { yPosition: yPosition };
      yPosition = parseInt(yPosition);
      if (yPosition < 0) {
        yPosition = 0;
      } else if (yPosition >= layer.height) {
        yPosition = layer.height - 1;
      }
      if (Number.isInteger(yPosition)) {
        options = Object.assign({}, this.state, { yPosition: yPosition });
        this.applyFilter(options);
      }
      this.setState(options);
    }
  }, {
    key: 'onTargetColorChange',
    value: function onTargetColorChange(event, targetColor) {
      var layer = this.props.layer;

      var options = { targetColor: targetColor };
      targetColor = parseInt(targetColor);
      if (targetColor < 0) {
        targetColor = 0;
        options = { targetColor: targetColor };
      } else if (targetColor >= layer.colorBits) {
        targetColor = layer.colorBits;
        options = { targetColor: targetColor };
      }
      if (Number.isInteger(targetColor)) {
        options = Object.assign({}, this.state, { targetColor: targetColor });
        this.applyFilter(options);
      }
      this.setState(options);
    }
  }, {
    key: 'onColorSelect',
    value: function onColorSelect() {
      var canvas = this.props.canvas;

      if (this.state.listeners.colorPick) {
        this.removeListener('colorPick');
      } else {
        this.addListener('CANVAS_' + canvas.id + '_EVENT.SELECT_COLOR', 'colorPick', this.onColorRecieve);
      }
    }
  }, {
    key: 'onColorRecieve',
    value: function onColorRecieve(topic, options) {
      var _props = this.props;
      var canvas = _props.canvas;
      var layer = _props.layer;

      var targetColor = { targetColor: options.targetColor };
      options = Object.assign({}, this.state, targetColor);
      this.setState(targetColor);
      this.applyFilter(options);
    }
  }, {
    key: 'onPixelSelect',
    value: function onPixelSelect() {
      var canvas = this.props.canvas;

      if (this.state.listeners.pixelPos) {
        this.removeListener('pixelPos');
      } else {
        this.addListener('CANVAS_' + canvas.id + '_EVENT.SELECT_POS', 'pixelPos', this.onPixelRecieve);
      }
    }
  }, {
    key: 'onPixelRecieve',
    value: function onPixelRecieve(topic, position) {
      this.applyFilter(Object.assign({}, this.state, position));
    }
  }, {
    key: 'addListener',
    value: function addListener(topic, listener, callback) {
      var _this2 = this;

      callback = callback || function () {};
      var token = _pubsubJs2.default.subscribe(topic, function (topic, content) {
        _this2.removeListener(listener);
        callback(topic, content);
      });
      var options = { listeners: Object.assign({}, this.state.listeners, _defineProperty({}, listener, token)) };
      this.setState(options);
    }
  }, {
    key: 'removeListener',
    value: function removeListener(listener) {
      if (!this.state.listeners[listener]) {
        return;
      }
      _pubsubJs2.default.unsubscribe(this.state.listeners[listener]);
      var options = { listeners: Object.assign({}, this.state.listeners, _defineProperty({}, listener, null)) };
      this.setState(options);
    }
  }, {
    key: 'removeListeners',
    value: function removeListeners(listeners) {
      var _this3 = this;

      var options = { listeners: Object.assign({}, this.state.listeners) };
      var change = false;
      Object.keys(this.state.listeners).forEach(function (listener) {
        if (!listeners || !listeners[listener]) {
          _pubsubJs2.default.unsubscribe(_this3.state.listeners[listener]);
          options.listeners[listener] = null;
          change = true;
        }
      });
      if (change) {
        this.setState(options);
      }
    }
  }]);

  return ColorFill;
}(_Filter3.default);

exports.default = ColorFill;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _IconButton = require('material-ui/IconButton');

var _IconButton2 = _interopRequireDefault(_IconButton);

var _colorize = require('material-ui/svg-icons/image/colorize');

var _colorize2 = _interopRequireDefault(_colorize);

var _colors = require('material-ui/styles/colors');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _ColorFill2 = require('./ColorFill');

var _ColorFill3 = _interopRequireDefault(_ColorFill2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {

  input: {
    marginTop: -20,
    width: 170
  },

  inputButton: {
    top: 'initial',
    zIndex: 1
  }
};

var DistanceFill = function (_ColorFill) {
  _inherits(DistanceFill, _ColorFill);

  function DistanceFill(props, content) {
    _classCallCheck(this, DistanceFill);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(DistanceFill).call(this, props, content));

    _this.defaultState = {
      type: 'DISTANCE_FILL',
      filter: Filters.distanceFill,
      disabled: true,
      xPosition: '',
      yPosition: '',
      targetColor: 0,
      scaleFactor: 1,
      listeners: {
        colorPick: null,
        pixelPos: null
      }
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onScaleFactorChange = _this.onScaleFactorChange.bind(_this);
    return _this;
  }

  _createClass(DistanceFill, [{
    key: 'onScaleFactorChange',
    value: function onScaleFactorChange(event, scaleFactor) {
      var options = { scaleFactor: scaleFactor };
      scaleFactor = parseInt(scaleFactor);
      if (scaleFactor < 0) {
        scaleFactor = 1;
        options = { scaleFactor: scaleFactor };
      }
      if (Number.isInteger(scaleFactor)) {
        this.applyFilter(Object.assign({}, this.state, { scaleFactor: scaleFactor }));
      }
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'color', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.targetColor, onChange: this.onTargetColorChange, floatingLabelText: 'Initial Color',
          disabled: this.state.disabled }), rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { style: styles.inputButton, onClick: this.onColorSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.colorPick ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'scale', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.scaleFactor, onChange: this.onScaleFactorChange, floatingLabelText: 'Scale Factor',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'label', disabled: true, primaryText: 'Pixel Seed', rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { onClick: this.onPixelSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.pixelPos ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'xPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.xPosition, onChange: this.onXpositionChange, floatingLabelText: 'X Position',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'yPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.yPosition, onChange: this.onYpositionChange, floatingLabelText: 'Y Position',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Distance Fill' });
    }
  }]);

  return DistanceFill;
}(_ColorFill3.default);

exports.default = DistanceFill;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _IconButton = require('material-ui/IconButton');

var _IconButton2 = _interopRequireDefault(_IconButton);

var _colorize = require('material-ui/svg-icons/image/colorize');

var _colorize2 = _interopRequireDefault(_colorize);

var _colors = require('material-ui/styles/colors');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _ColorFill2 = require('./ColorFill');

var _ColorFill3 = _interopRequireDefault(_ColorFill2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {

  input: {
    marginTop: -20,
    width: 170
  },

  inputButton: {
    top: 'initial',
    zIndex: 1
  }
};

var Erosion = function (_ColorFill) {
  _inherits(Erosion, _ColorFill);

  function Erosion(props, content) {
    _classCallCheck(this, Erosion);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Erosion).call(this, props, content));

    _this.defaultState = {
      type: 'EROSION',
      disabled: true,
      filter: Filters.erosion,
      xPosition: '',
      yPosition: '',
      targetColor: 0,
      iterations: 1,
      listeners: {
        colorPick: null,
        pixelPos: null
      }
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onIterationsChange = _this.onIterationsChange.bind(_this);
    return _this;
  }

  _createClass(Erosion, [{
    key: 'onIterationsChange',
    value: function onIterationsChange(event, iterations) {
      var layer = this.props.layer;

      var options = { iterations: iterations };
      iterations = parseInt(iterations);
      if (iterations < 0) {
        iterations = 0;
        options = { iterations: iterations };
      }
      if (Number.isInteger(iterations)) {
        this.applyFilter(Object.assign({}, this.state, { iterations: iterations }));
      }
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'iterations', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.iterations, onChange: this.onIterationsChange, floatingLabelText: 'Iterations',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'color', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.targetColor, onChange: this.onTargetColorChange, floatingLabelText: 'Boundary Color',
          disabled: this.state.disabled }), rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { style: styles.inputButton, onClick: this.onColorSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.colorPick ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'label', disabled: true, primaryText: 'Pixel Seed', rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { id: 'colorize', onClick: this.onPixelSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.pixelPos ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'xPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.xPosition, onChange: this.onXpositionChange, floatingLabelText: 'X Position',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'yPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.yPosition, onChange: this.onYpositionChange, floatingLabelText: 'Y Position',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Erosion' });
    }
  }]);

  return Erosion;
}(_ColorFill3.default);

exports.default = Erosion;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Filter = function (_Component) {
  _inherits(Filter, _Component);

  function Filter(props, content) {
    _classCallCheck(this, Filter);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Filter).call(this, props, content));

    _this.onEnableToggle = _this.onEnableToggle.bind(_this);
    _this.applyFilter = _lodash2.default.debounce(_this.applyFilter, 500);
    return _this;
  }

  _createClass(Filter, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      this.setState(Object.assign({}, this.defaultState, nextProps.layer.filters[this.defaultState.type]));
    }
  }, {
    key: 'onEnableToggle',
    value: function onEnableToggle(event, enabled) {
      var _props = this.props;
      var canvas = _props.canvas;
      var layer = _props.layer;
      var applyFilter = _props.applyFilter;

      applyFilter(canvas, layer, Object.assign({}, this.state, {
        disabled: !enabled
      }));
    }
  }, {
    key: 'applyFilter',
    value: function applyFilter(options) {
      var _props2 = this.props;
      var canvas = _props2.canvas;
      var layer = _props2.layer;
      var applyFilter = _props2.applyFilter;
      var index = _props2.index;

      options = Object.assign({}, options, { index: index });
      applyFilter(canvas, layer, options);
    }
  }]);

  return Filter;
}(_react.Component);

exports.default = Filter;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _List = require('material-ui/List');

var _Subheader = require('material-ui/Subheader');

var _Subheader2 = _interopRequireDefault(_Subheader);

var _Divider = require('material-ui/Divider');

var _Divider2 = _interopRequireDefault(_Divider);

var _SpatialResolution = require('./SpatialResolution');

var _SpatialResolution2 = _interopRequireDefault(_SpatialResolution);

var _GrayLevel = require('./GrayLevel');

var _GrayLevel2 = _interopRequireDefault(_GrayLevel);

var _GrayScale = require('./GrayScale');

var _GrayScale2 = _interopRequireDefault(_GrayScale);

var _Histogram = require('./Histogram');

var _Histogram2 = _interopRequireDefault(_Histogram);

var _NoiseReduce = require('./NoiseReduce');

var _NoiseReduce2 = _interopRequireDefault(_NoiseReduce);

var _Sharpen = require('./Sharpen');

var _Sharpen2 = _interopRequireDefault(_Sharpen);

var _BitPlanes = require('./BitPlanes');

var _BitPlanes2 = _interopRequireDefault(_BitPlanes);

var _FloodFill = require('./FloodFill');

var _FloodFill2 = _interopRequireDefault(_FloodFill);

var _BoundaryFill = require('./BoundaryFill');

var _BoundaryFill2 = _interopRequireDefault(_BoundaryFill);

var _Erosion = require('./Erosion');

var _Erosion2 = _interopRequireDefault(_Erosion);

var _DistanceFill = require('./DistanceFill');

var _DistanceFill2 = _interopRequireDefault(_DistanceFill);

var _Skeletonization = require('./Skeletonization');

var _Skeletonization2 = _interopRequireDefault(_Skeletonization);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Filter: {
    displayName: 'Filter'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/filters/Filters.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/filters/Filters.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var Filter = _wrapComponent('Filter')(function (_Component) {
  _inherits(Filter, _Component);

  function Filter() {
    _classCallCheck(this, Filter);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Filter).apply(this, arguments));
  }

  _createClass(Filter, [{
    key: 'render',
    value: function render() {
      var _props = this.props;
      var canvases = _props.canvases;
      var canvas = _props.canvas;
      var applyFilter = _props.applyFilter;

      var layer = canvas.layers[0];
      var index = 0;
      return _react3.default.createElement(
        _List.List,
        null,
        _react3.default.createElement(
          _Subheader2.default,
          null,
          'Filters'
        ),
        _react3.default.createElement(_SpatialResolution2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_GrayScale2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_GrayLevel2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_Histogram2.default, { index: index++, canvas: canvas, canvases: canvases, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_NoiseReduce2.default, { index: index++, canvas: canvas, canvases: canvases, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_Sharpen2.default, { index: index++, canvas: canvas, canvases: canvases, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_BitPlanes2.default, { index: index++, canvas: canvas, canvases: canvases, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_Divider2.default, null),
        _react3.default.createElement(
          _Subheader2.default,
          null,
          'Fills'
        ),
        _react3.default.createElement(_FloodFill2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_BoundaryFill2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_Erosion2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_DistanceFill2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter }),
        _react3.default.createElement(_Divider2.default, null),
        _react3.default.createElement(
          _Subheader2.default,
          null,
          'Morphs'
        ),
        _react3.default.createElement(_Skeletonization2.default, { index: index++, canvas: canvas, layer: layer, applyFilter: applyFilter })
      );
    }
  }]);

  return Filter;
}(_react2.Component));

exports.default = Filter;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _IconButton = require('material-ui/IconButton');

var _IconButton2 = _interopRequireDefault(_IconButton);

var _colorize = require('material-ui/svg-icons/image/colorize');

var _colorize2 = _interopRequireDefault(_colorize);

var _colors = require('material-ui/styles/colors');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _ColorFill2 = require('./ColorFill');

var _ColorFill3 = _interopRequireDefault(_ColorFill2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {

  input: {
    marginTop: -20,
    width: 170
  },

  inputButton: {
    top: 'initial',
    zIndex: 1
  }
};

var FloodFill = function (_ColorFill) {
  _inherits(FloodFill, _ColorFill);

  function FloodFill(props, content) {
    _classCallCheck(this, FloodFill);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(FloodFill).call(this, props, content));

    _this.defaultState = {
      type: 'FLOOD_FILL',
      filter: Filters.floodfill,
      disabled: true,
      xPosition: '',
      yPosition: '',
      targetColor: 0,
      listeners: {
        colorPick: null,
        pixelPos: null
      }
    };
    _this.state = Object.assign({}, _this.defaultState);
    return _this;
  }

  _createClass(FloodFill, [{
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'color', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.targetColor, onChange: this.onTargetColorChange, floatingLabelText: 'Target Color',
          disabled: this.state.disabled }), rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { style: styles.inputButton, onClick: this.onColorSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.colorPick ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'label', disabled: true, primaryText: 'Pixel Seed', rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { onClick: this.onPixelSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.pixelPos ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'xPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.xPosition, onChange: this.onXpositionChange, floatingLabelText: 'X Position',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'yPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.yPosition, onChange: this.onYpositionChange, floatingLabelText: 'Y Position',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Flood Fill' });
    }
  }]);

  return FloodFill;
}(_ColorFill3.default);

exports.default = FloodFill;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _Slider = require('material-ui/Slider');

var _Slider2 = _interopRequireDefault(_Slider);

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _Filter2 = require('./Filter');

var _Filter3 = _interopRequireDefault(_Filter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  slider: {
    overflow: 'visible',
    marginTop: -20,
    width: 165
  }
};

var GrayLevel = function (_Filter) {
  _inherits(GrayLevel, _Filter);

  function GrayLevel(props, content) {
    _classCallCheck(this, GrayLevel);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GrayLevel).call(this, props, content));

    _this.defaultState = {
      type: 'GRAY_LEVEL',
      disabled: true,
      level: 8,
      filter: Filters.grayLevel
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onLevelChange = _this.onLevelChange.bind(_this);
    return _this;
  }

  _createClass(GrayLevel, [{
    key: 'onLevelChange',
    value: function onLevelChange(event, level) {
      var options = { level: level };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'slider', primaryText: this.state.level + '-bit', disabled: true, style: this.state.disabled ? { color: 'rgba(0, 0, 0, 0.298039)' } : null, secondaryText: _react2.default.createElement(
          'div',
          { style: styles.slider },
          _react2.default.createElement(_Slider2.default, { onChange: this.onLevelChange, min: 1, step: 1, max: 8, value: this.state.level, disabled: this.state.disabled })
        ) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Gray Level' });
    }
  }]);

  return GrayLevel;
}(_Filter3.default);

exports.default = GrayLevel;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _Filter2 = require('./Filter');

var _Filter3 = _interopRequireDefault(_Filter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  },

  input: {
    marginTop: -20,
    width: 170
  }
};

var GrayScale = function (_Filter) {
  _inherits(GrayScale, _Filter);

  function GrayScale(props, content) {
    _classCallCheck(this, GrayScale);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GrayScale).call(this, props, content));

    _this.defaultState = {
      type: 'GRAY_SCALE',
      disabled: true,
      filter: Filters.grayScale,
      transformMethod: 1,
      constant: 1.5,
      gamma: 1
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onTransformMethodChange = _this.onTransformMethodChange.bind(_this);
    _this.onConstantChange = _this.onConstantChange.bind(_this);
    _this.onGammaChange = _this.onGammaChange.bind(_this);
    return _this;
  }

  _createClass(GrayScale, [{
    key: 'onTransformMethodChange',
    value: function onTransformMethodChange(event, index, value) {
      var options = { transformMethod: value };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onConstantChange',
    value: function onConstantChange(event, value) {
      var options = { constant: value };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onGammaChange',
    value: function onGammaChange(event, value) {
      var options = { gamma: value };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'select', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.transformMethod, onChange: this.onTransformMethodChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'Log' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Power' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'constantField', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { id: 'constant', style: styles.input, value: this.state.constant, onChange: this.onConstantChange, floatingLabelText: 'Constant "c"',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'gammaField', style: this.state.transformMethod !== 2 ? { display: 'none' } : null, disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { id: 'constant', style: styles.input, value: this.state.gamma, onChange: this.onGammaChange, floatingLabelText: 'Gamma "γ"',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Gray Scale' });
    }
  }]);

  return GrayScale;
}(_Filter3.default);

exports.default = GrayScale;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _MaskFilter2 = require('./MaskFilter');

var _MaskFilter3 = _interopRequireDefault(_MaskFilter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  },

  input: {
    marginTop: -20,
    width: 170
  }
};

var Histogram = function (_MaskFilter) {
  _inherits(Histogram, _MaskFilter);

  function Histogram(props, content) {
    _classCallCheck(this, Histogram);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Histogram).call(this, props, content));

    _this.defaultState = {
      type: 'HISTOGRAM',
      disabled: true,
      filter: Filters.histogram,
      global: true,
      dimension: 5,
      canvasId: null
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onLocalityChange = _this.onLocalityChange.bind(_this);
    _this.onDimensionChange = _this.onDimensionChange.bind(_this);
    _this.onMatchingChange = _this.onMatchingChange.bind(_this);
    return _this;
  }

  _createClass(Histogram, [{
    key: 'onLocalityChange',
    value: function onLocalityChange(event, index, global) {
      var options = { global: global };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onMatchingChange',
    value: function onMatchingChange(event, index, canvasId) {
      var canvases = this.props.canvases;

      var options = { canvasId: canvasId };
      this.applyFilter(Object.assign({}, this.state, Object.assign({}, options, {
        match: canvases.find(function (canvas) {
          return canvas.id === canvasId;
        })
      })));
      this.setState(options);
    }
  }, {
    key: 'onDimensionChange',
    value: function onDimensionChange(event, dimension) {
      var layer = this.props.layer;

      var global = false;
      if (dimension >= layer.colorBits) {
        global = true;
        dimension = this.state.dimension;
      }
      var options = { dimension: dimension, global: global };
      _get(Object.getPrototypeOf(Histogram.prototype), 'onDimensionChange', this).call(this, event, options);
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props;
      var canvases = _props.canvases;
      var canvas = _props.canvas;

      var canvasMenuItems = [];
      canvases.forEach(function (_canvas) {
        if (canvas.id !== _canvas.id) {
          canvasMenuItems = [].concat(_toConsumableArray(canvasMenuItems), [_react2.default.createElement(_MenuItem2.default, { key: _canvas.id, value: _canvas.id, primaryText: _canvas.title })]);
        }
      });
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'equalization', disabled: true, secondaryText: 'Equalization', primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.global, onChange: this.onLocalityChange },
          _react2.default.createElement(_MenuItem2.default, { value: true, primaryText: 'Global' }),
          _react2.default.createElement(_MenuItem2.default, { value: false, primaryText: 'Local' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'maskSize', type: 'number', style: this.state.global ? { display: 'none' } : null, disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { id: 'constant', style: styles.input, value: this.state.dimension, onChange: this.onDimensionChange, floatingLabelText: 'Symmetric "N x N"',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'matching', disabled: true, style: this.state.global ? null : { display: 'none' }, secondaryText: 'Matching', primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.canvasId, onChange: this.onMatchingChange },
          _react2.default.createElement(_MenuItem2.default, { value: null, primaryText: 'None' }),
          canvasMenuItems
        ) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Histogram' });
    }
  }]);

  return Histogram;
}(_MaskFilter3.default);

exports.default = Histogram;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.spatialResolution = spatialResolution;
exports.grayLevel = grayLevel;
exports.grayScale = grayScale;
exports.histogram = histogram;
exports.noiseReduce = noiseReduce;
exports.sharpen = sharpen;
exports.bitPlanes = bitPlanes;
exports.floodfill = floodfill;
exports.boundaryFill = boundaryFill;
exports.erosion = erosion;
exports.distanceFill = distanceFill;
exports.skeletonization = skeletonization;

var _canvasUtils = require('../../utils/canvas-utils');

var canvasUtils = _interopRequireWildcard(_canvasUtils);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function subsample(layer, ratio) {
  var width = layer.width * ratio >> 0;
  var height = layer.height * ratio >> 0;
  var averagePixelCountW = layer.width / width >> 0;
  var averagePixelCountH = layer.height / height >> 0;
  var totalAveragePixels = averagePixelCountW * averagePixelCountH;
  var pixels = [];
  var colOffset = 0;
  for (var nextRow = 0; nextRow < layer.width; nextRow += averagePixelCountW) {
    colOffset = nextRow * layer.width;
    for (var nextCol = colOffset; nextCol < colOffset + layer.width; nextCol += averagePixelCountW) {
      var sum = 0;
      var subIndex = 0;
      for (var nextSubCol = nextCol; nextSubCol < nextCol + averagePixelCountH; nextSubCol++) {
        for (var i = nextSubCol; i < nextSubCol + averagePixelCountW; i++) {
          sum += layer.pixels[i];
          if (subIndex + 1 === totalAveragePixels) {
            pixels.push(Math.round(sum / totalAveragePixels));
          }
          subIndex++;
        }
      }
    }
  }
  return Object.assign({}, layer, {
    width: width,
    height: height,
    pixels: pixels
  });
}

function getNeighborColors(layer, index, total, dimension, callback) {
  var half = (dimension - 1) / 2;
  var pixels = [];
  var rowIndex = index / layer.width >> 0;
  callback = callback || function (pixel) {};
  for (var y = -half; y <= half; y++) {
    var rowOffset = y * layer.width;
    var leftOffset = rowOffset + index - half;
    var rowTarget = y + rowIndex;
    for (var x = leftOffset; x < leftOffset + dimension; x++) {
      var row = x / layer.width >> 0;
      var pixel = layer.pixels[x];
      if (row === rowTarget && 0 <= x && x < total && x != index) {
        pixels.push(pixel);
      }
      callback(pixel);
    }
  }
  return pixels;
}

function getNeighborPixels(layer, index, total, dimension) {
  var half = (dimension - 1) / 2;
  var pixelsMap = [];
  var rowIndex = index / layer.width >> 0;
  for (var y = -half; y <= half; y++) {
    var rowOffset = y * layer.width;
    var leftOffset = rowOffset + index - half;
    var rowTarget = y + rowIndex;
    for (var x = leftOffset; x < leftOffset + dimension; x++) {
      var row = x / layer.width >> 0;
      if (row === rowTarget && 0 <= x && x < total && x != index) {
        pixelsMap.push({
          pixel: x,
          color: layer.pixels[x]
        });
      }
    }
  }
  return pixelsMap;
}

function getNeighborhoodColors(layer, index, total, dimension) {
  var neighborhood = [];
  getNeighborColors(layer, index, layer.pixels.length, 3, function (pixel) {
    neighborhood.push(pixel);
  });
  return neighborhood;
}

function padRows(pixels, rows, cols) {
  for (var i = 0; i < rows; i++) {
    for (var j = 0; j < cols; j++) {
      pixels.push(0);
    }
  }
}

function padData(layer, maskDimension) {
  if (maskDimension < 3) {
    return layer.pixels;
  }
  var pixels = [];
  var paddedRows = (maskDimension - 1) / 2;
  var paddedCols = (maskDimension - 1) / 2;
  var width = layer.width + maskDimension - 1;
  var height = layer.height + maskDimension - 1;
  pixels = [];
  padRows(pixels, paddedRows, width);
  for (var y = 0; y < layer.height; y++) {
    padRows(pixels, 1, paddedCols);
    var colOffset = y * layer.width;
    for (var x = colOffset; x < colOffset + layer.width; x++) {
      pixels.push(layer.pixels[x]);
    }
    padRows(pixels, 1, paddedCols);
  }
  padRows(pixels, paddedRows, width);
  return Object.assign({}, layer, { pixels: pixels, width: width, height: height });
}

function blur(pixel, neighbors, maskDimension) {
  var weight = 1 / (maskDimension * maskDimension);
  return neighbors.reduce(function (prev, value) {
    return prev + weight * value;
  }, weight * pixel) >> 0;
}

function min(pixel, neighbors, maskDimension) {
  var sorted = [pixel].concat(_toConsumableArray(neighbors)).sort();
  return sorted[0];
}

function median(pixel, neighbors, maskDimension) {
  var sorted = [pixel].concat(_toConsumableArray(neighbors)).sort();
  return sorted[(sorted.length - 1) / 2];
}

function max(pixel, neighbors, maskDimension) {
  var sorted = [pixel].concat(_toConsumableArray(neighbors)).sort();
  return sorted[sorted.length - 1];
}

function midpoint(pixel, neighbors, maskDimension) {
  var sorted = [pixel].concat(_toConsumableArray(neighbors)).sort();
  var midpoint = (sorted[0] + sorted[sorted.length - 1]) / 2;
  return midpoint >> 0;
}

function arithmeticMean(pixel, neighbors, maskDimension) {
  var total = neighbors.reduce(function (prev, value) {
    return prev + value;
  }, pixel);
  return total / (neighbors.length + 1) >> 0;
}

function geometricMean(pixel, neighbors, maskDimension) {
  var product = neighbors.reduce(function (prev, value) {
    return prev * value;
  }, pixel);
  return Math.pow(product, 1 / (maskDimension * maskDimension)) >> 0;
}

function harmonicMean(pixel, neighbors, maskDimension) {
  var mean = maskDimension * maskDimension / neighbors.reduce(function (prev, value) {
    return prev + 1 / value;
  }, 1 / pixel);
  return mean >> 0;
}

function contraharmonicMean(pixel, neighbors, maskDimension, order) {
  var orderOffset = order + 1;
  var numerator = neighbors.reduce(function (prev, value) {
    return prev + Math.pow(value, orderOffset);
  }, Math.pow(pixel, orderOffset));
  var denominator = neighbors.reduce(function (prev, value) {
    return prev + Math.pow(value, order);
  }, Math.pow(pixel, order));
  var mean = numerator / denominator;
  return mean >> 0;
}

function alphaTrimmedMean(pixel, neighbors, maskDimension, constantD) {
  var sorted = [pixel].concat(_toConsumableArray(neighbors)).sort();
  var A = Math.floor(constantD / 2);
  var total = sorted.slice(A, sorted.length - A).reduce(function (prev, value) {
    return prev + value;
  });
  return total / (maskDimension * maskDimension - 2 * A) >> 0;
}

function laplace(pixel, neighbors, maskDimension) {
  var midBit = maskDimension * maskDimension - 1;
  var filtered = neighbors.reduce(function (prev, value) {
    return prev - value;
  }, midBit * pixel);
  filtered = pixel + filtered - Math.min(0, filtered);
  filtered = 255 * filtered / Math.max(255, filtered);
  return filtered >> 0;
}

function highboost(pixel, neighbors, maskDimension, maskFactor) {
  var mask = Math.max(0, pixel - blur(pixel, neighbors, maskDimension));
  return Math.min(pixel + maskFactor * mask, 255);
}

function getHistogram(pixels, colorBits, total, target) {
  var frequency = {};
  pixels.forEach(function (pixel) {
    frequency[pixel] = (frequency[pixel] || 0) + 1;
  });
  var prev = 0;
  var histogram = {};
  for (var pixel in frequency) {
    prev += frequency[pixel] / total * colorBits;
    histogram[pixel] = Math.round(prev);
    if (pixel == target) return histogram;
  }
  return histogram;
}

function getHistogramValue(layer, index, total, subtotal, dimension) {
  var target = layer.pixels[index];
  var pixels = getNeighborColors(layer, index, total, dimension);
  pixels.push(layer.pixels[index]);
  var histogram = getHistogram(pixels, layer.colorBits, subtotal, target);
  return histogram[target];
}

function replication(layer, options) {
  var width = layer.width / options.ratio;
  var height = layer.height / options.ratio;
  var scaleFactor = 1 / options.ratio >> 0;
  var pixels = [];
  var step = 0;
  for (var y = 0; y < height; y++) {
    var xOffset = y * width;
    var rowIndex = step >> 0;
    var pixelOffset = rowIndex * layer.width;
    var colIndex = 0;
    for (var x = xOffset; x < xOffset + width; x++) {
      pixels[x] = layer.pixels[pixelOffset + (colIndex++ * options.ratio >> 0)];
    }
    step += options.ratio;
  }
  return Object.assign({}, layer, { pixels: pixels, width: width, height: height });
}

function bilinear(layer, options) {
  var width = layer.width / options.ratio;
  var height = layer.height / options.ratio;
  var scaleFactor = 1 / options.ratio >> 0;
  var pixels = [];
  var step = 0;
  for (var y = 0; y < height; y++) {
    var xOffset = y * width;
    var rowIndex = step >> 0;
    var pixelOffset = rowIndex * layer.width;
    var colIndex = 0;
    for (var x = xOffset; x < xOffset + width; x++) {
      if (colIndex % scaleFactor === 0) {
        pixels[x] = layer.pixels[pixelOffset + (colIndex * options.ratio >> 0)];
      } else {
        pixels[x] = null;
      }
      colIndex++;
    }
    step += options.ratio;
  }
  layer = Object.assign({}, layer, { pixels: pixels, width: width, height: height });
  for (var i = 0; i < pixels.length; i++) {
    if (pixels[i] == null) {
      (function () {
        var neighbors = getNeighborColors(layer, i, pixels.length, 3);
        var sum = 0;
        var count = 0;
        neighbors.forEach(function (pixel) {
          if (pixel != null) {
            count++;
            sum += pixel;
          }
        });
        pixels[i] = sum / count;
      })();
    }
  }
  return layer;
}

function spatialResolution(layer, context, options) {
  layer = subsample(layer, options.ratio);
  if (options.zoomMethod === 1) {
    layer = replication(layer, options);
  } else if (options.zoomMethod === 2) {
    layer = bilinear(layer, options);
  }
  return layer;
}

function grayLevel(layer, context, options) {
  var colorsBits = Math.pow(2, options.level) - 1;
  var ratio = Math.round(255 / colorsBits);
  var pixels = layer.pixels.map(function (pixel) {
    return Math.round(pixel / layer.colorBits * colorsBits) * ratio;
  });
  return Object.assign({}, layer, { pixels: pixels });
}

function grayScale(layer, context, options) {
  var pixels = layer.pixels;
  var c = options.constant;
  var gamma = options.gamma;
  if (options.transformMethod === 1) {
    pixels = pixels.map(function (pixel) {
      var r = pixel / layer.colorBits;
      var s = c * Math.log(1 + r);
      return Math.min(layer.colorBits, Math.round(layer.colorBits * s));
    });
  } else if (options.transformMethod === 2) {
    pixels = pixels.map(function (pixel) {
      var r = pixel / layer.colorBits;
      var s = c * Math.pow(r, gamma);
      return Math.min(layer.colorBits, Math.round(layer.colorBits * s));
    });
  }
  return Object.assign({}, layer, { pixels: pixels });
}

function histogram(layer, context, options) {
  var MN = layer.width * layer.height;
  var pixels = void 0;
  if (!options.global) {
    (function () {
      var mn = options.dimension * options.dimension;
      pixels = layer.pixels.map(function (pixel, index) {
        return getHistogramValue(layer, index, MN, mn, options.dimension);
      });
    })();
  } else {
    var pixel;

    (function () {
      var map = getHistogram(layer.pixels, layer.colorBits, MN);
      if (options.match) {
        var canvas = options.match;
        MN = canvas.width * canvas.height;
        var targetPixels = canvasUtils.getPixels(canvas);
        var targetMap = getHistogram(targetPixels, 256, MN);
        var targetValues = _lodash2.default.values(targetMap);
        var matchingMap = {};
        for (pixel in map) {
          var value = map[pixel];
          var beforePixel = void 0,
              afterPixel = void 0,
              targetPixel = void 0;
          for (targetPixel in targetMap) {
            var targetValue = targetMap[targetPixel];
            if (targetValue < value) {
              beforePixel = targetPixel;
            }
            if (targetValue == value) {
              break;
            }
            if (targetValue > value) {
              targetPixel = null;
              break;
            }
          }
          if (!targetPixel) {
            if (!afterPixel || value - targetMap[beforePixel] < targetMap[afterPixel] - value) {
              targetPixel = beforePixel;
            } else {
              targetPixel = afterPixel;
            }
          }
          matchingMap[pixel] = targetPixel;
        }
        map = matchingMap;
      }
      pixels = layer.pixels.map(function (pixel) {
        return map[pixel];
      });
    })();
  }
  return Object.assign({}, layer, { pixels: pixels });
}

function noiseReduce(layer, context, options) {
  var width = layer.width;
  var height = layer.height;
  var pixels = [];
  var offset = (options.dimension - 1) / 2;
  layer = padData(layer, options.dimension);
  for (var y = offset; y < offset + height; y++) {
    var colOffset = offset + y * layer.width;
    for (var x = colOffset; x < colOffset + width; x++) {
      var pixel = void 0;
      var neighbors = getNeighborColors(layer, x, layer.pixels.length, options.dimension);
      if (options.method == 1) {
        pixel = blur(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 2) {
        pixel = min(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 3) {
        pixel = median(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 4) {
        pixel = max(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 5) {
        pixel = midpoint(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 6) {
        pixel = arithmeticMean(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 7) {
        pixel = geometricMean(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 8) {
        pixel = harmonicMean(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 9) {
        pixel = contraharmonicMean(layer.pixels[x], neighbors, options.dimension, options.order);
      } else if (options.method = 10) {
        pixel = alphaTrimmedMean(layer.pixels[x], neighbors, options.dimension, options.constantD);
      } else {
        pixel = layer.pixels[index];
      }
      pixels.push(pixel);
    }
  }
  return Object.assign({}, layer, { pixels: pixels, width: width, height: height });
}

function sharpen(layer, context, options) {
  var width = layer.width;
  var height = layer.height;
  var pixels = [];
  var offset = (options.dimension - 1) / 2;
  layer = padData(layer, options.dimension);
  for (var y = offset; y < offset + height; y++) {
    var colOffset = offset + y * layer.width;
    for (var x = colOffset; x < colOffset + width; x++) {
      var pixel = void 0;
      var neighbors = getNeighborColors(layer, x, layer.pixels.length, options.dimension);
      if (options.method == 1) {
        pixel = laplace(layer.pixels[x], neighbors, options.dimension);
      } else if (options.method == 2) {
        pixel = highboost(layer.pixels[x], neighbors, options.dimension, options.maskFactor);
      } else {
        pixel = layer.pixels[index];
      }
      pixels.push(pixel);
    }
  }
  return Object.assign({}, layer, { pixels: pixels, width: width, height: height });
}

function bitPlanes(layer, context, options) {
  var disabledBits = Object.keys(options.planes).filter(function (bit) {
    return !options.planes[bit];
  });
  var binaryReducer = disabledBits.map(function (bit) {
    return {
      value: bit,
      binary: (Math.pow(2, bit - 1) >>> 0).toString(2)
    };
  });
  var pixels = layer.pixels.map(function (pixel) {
    var binary = (pixel >>> 0).toString(2);
    var result = binaryReducer.reduce(function (prev, bit) {
      return prev - (prev.toString().charAt(8 - bit.value) == 1 ? bit.binary : '0');
    }, binary);
    return parseInt(result, 2);
  });
  return Object.assign({}, layer, { pixels: pixels });
}

function floodfill(layer, context, options) {
  if (options.xPosition === '' || options.yPosition === '') {
    return layer;
  }
  var pixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var pixels = [].concat(_toConsumableArray(layer.pixels));
  var initialColor = pixels[pixel];
  var queue = [pixel];
  var visited = {};
  layer = Object.assign({}, layer, { pixels: pixels });
  pixels[pixel] = options.targetColor;
  while (queue.length) {
    var head = queue[0];
    if (!visited[head]) {
      var neighbors = getNeighborPixels(layer, head, pixels.length, 3);
      neighbors.forEach(function (neighbor) {
        if (!visited[neighbor.pixel] && neighbor.color === initialColor) {
          pixels[neighbor.pixel] = options.targetColor;
          queue.push(neighbor.pixel);
        }
      });
    }
    visited[queue.shift()] = true;
  }
  return layer;
}

function isBoundaryPixel(layer, element, total, initialColor) {
  if (element.color === initialColor) {
    var neighbors = getNeighborColors(layer, element.pixel, total, 3);
    if (neighbors.find(function (neighbor) {
      return neighbor !== initialColor;
    }) !== undefined) {
      return true;
    }
  }
  return false;
}

function boundaryFill(layer, context, options) {
  if (options.xPosition === '' || options.yPosition === '') {
    return layer;
  }
  var pixels = [].concat(_toConsumableArray(layer.pixels));
  var initialPixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var initialColor = pixels[initialPixel];
  var aux = [initialPixel];
  var visited = {};
  while (aux.length) {
    var head = aux[0];
    if (!visited[head]) {
      var neighbors = getNeighborPixels(layer, head, layer.pixels.length, 3);
      neighbors.forEach(function (neighbor) {
        if (!visited[neighbor.pixel]) {
          if (isBoundaryPixel(layer, neighbor, layer.pixels.length, initialColor)) {
            pixels[neighbor.pixel] = options.targetColor;
          } else {
            aux.push(neighbor.pixel);
          }
        }
      });
    }
    visited[aux.shift()] = true;
  }
  return Object.assign({}, layer, { pixels: pixels });
}

function getBoundaryPixels(layer, options) {
  var queue = [];
  if (options.xPosition === '' || options.yPosition === '') {
    return queue;
  }
  var initialPixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var initialColor = layer.pixels[initialPixel];
  var aux = [initialPixel];
  var visited = {};
  while (aux.length) {
    var head = aux[0];
    if (!visited[head]) {
      var neighbors = getNeighborPixels(layer, head, layer.pixels.length, 3);
      neighbors.forEach(function (neighbor) {
        if (!visited[neighbor.pixel]) {
          if (isBoundaryPixel(layer, neighbor, layer.pixels.length, initialColor)) {
            queue.push(neighbor.pixel);
          } else {
            aux.push(neighbor.pixel);
          }
        }
      });
    }
    visited[aux.shift()] = true;
  }
  return queue;
}

function erosion(layer, context, options) {
  if (options.xPosition === '' || options.yPosition === '') {
    return layer;
  }
  var queue = getBoundaryPixels(layer, options);
  var visited = {};
  var iterations = options.iterations;
  var pixels = [].concat(_toConsumableArray(layer.pixels));
  var initialPixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var initialColor = layer.pixels[initialPixel];
  layer = Object.assign({}, layer, { pixels: pixels });
  while (iterations) {
    queue.push(null);
    var head = queue[0];
    while (head !== null) {
      if (!visited[head]) {
        var neighbors = getNeighborPixels(layer, head, pixels.length, 3);
        neighbors.forEach(function (neighbor) {
          if (!visited[neighbor.pixel] && neighbor.color === initialColor) {
            pixels[neighbor.pixel] = options.targetColor;
            queue.push(neighbor.pixel);
          }
        });
      }
      pixels[head] = options.targetColor;
      queue.shift();
      if (head) {
        visited[head] = true;
      }
      head = queue[0];
    }
    queue.shift();
    if (head) {
      visited[head] = true;
    }
    iterations--;
  }
  return layer;
}

function distanceFill(layer, context, options) {
  if (options.xPosition === '' || options.yPosition === '') {
    return layer;
  }
  var queue = getBoundaryPixels(layer, options);
  var visited = {};
  var distance = options.targetColor;
  var pixels = [].concat(_toConsumableArray(layer.pixels));
  var initialPixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var initialColor = layer.pixels[initialPixel];
  layer = Object.assign({}, layer, { pixels: pixels });
  queue.forEach(function (pixel) {
    pixels[pixel] = distance;
  });
  while (queue.length) {
    distance = Math.min(layer.colorBits, distance + options.scaleFactor);
    queue.push(null);
    var head = queue[0];
    while (head !== null) {
      if (!visited[head]) {
        var neighbors = getNeighborPixels(layer, head, pixels.length, 3);
        neighbors.forEach(function (neighbor) {
          if (!visited[neighbor.pixel] && neighbor.color === initialColor) {
            pixels[neighbor.pixel] = distance;
            queue.push(neighbor.pixel);
          }
        });
      }
      queue.shift();
      if (head) {
        visited[head] = true;
      }
      head = queue[0];
    }
    queue.shift();
    if (head) {
      visited[head] = true;
    }
  }
  return layer;
}

/*
* p9 (0) p2 (1) p3 (2)
* p8 (3) p1 (4) p4 (5)
* p7 (6) p6 (7) p5 (8)
*/
function getTransitionCount(neighborhood, initialColor) {
  var count = 0;
  // p2 -> p3
  if (neighborhood[1] !== initialColor && neighborhood[2] === initialColor) {
    count++;
  }
  // p3 -> p4
  if (neighborhood[2] !== initialColor && neighborhood[5] === initialColor) {
    count++;
  }
  // p4 -> p5
  if (neighborhood[5] !== initialColor && neighborhood[8] === initialColor) {
    count++;
  }
  // p5 -> p6
  if (neighborhood[8] !== initialColor && neighborhood[7] === initialColor) {
    count++;
  }
  // p6 -> p7
  if (neighborhood[7] !== initialColor && neighborhood[6] === initialColor) {
    count++;
  }
  // p7 -> p8
  if (neighborhood[6] !== initialColor && neighborhood[3] === initialColor) {
    count++;
  }
  // p8 -> p9
  if (neighborhood[3] !== initialColor && neighborhood[0] === initialColor) {
    count++;
  }
  // p9 -> p2
  if (neighborhood[0] !== initialColor && neighborhood[1] === initialColor) {
    count++;
  }
  return count;
}

function zhangSuen(layer, options) {
  var initialPixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var initialColor = layer.pixels[initialPixel]; // for binary images this is usually black
  var pixels = [].concat(_toConsumableArray(layer.pixels));
  var changed = void 0;
  layer = Object.assign({}, layer, { pixels: pixels });

  var _loop = function _loop() {
    changed = false;
    var updated = [];
    pixels.forEach(function (pixel, index) {
      if (pixel === initialColor) {
        /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */
        var neighborhood = getNeighborhoodColors(layer, index, pixels.length, 3);
        var nonInitialColors = neighborhood.reduce(function (prev, neighbor) {
          return neighbor === initialColor ? prev : ++prev;
        }, 0);
        if (2 <= nonInitialColors && nonInitialColors <= 6 && getTransitionCount(neighborhood, initialColor) === 1
        //at least one white
        // P4 or P6 or (P2 and P8)
         && (neighborhood[5] === options.targetColor || neighborhood[7] === options.targetColor || neighborhood[1] === options.targetColor && neighborhood[3] === options.targetColor)) {
          updated.push(index);
          changed = true;
        }
      }
    });
    updated.forEach(function (pixel) {
      pixels[pixel] = options.targetColor;
    });
    pixels.forEach(function (pixel, index) {
      if (pixel === initialColor) {
        /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */
        var neighborhood = getNeighborhoodColors(layer, index, pixels.length, 3);
        var nonInitialColors = neighborhood.reduce(function (prev, neighbor) {
          return neighbor === initialColor ? prev : ++prev;
        }, 0);
        if (2 <= nonInitialColors && nonInitialColors <= 6 && getTransitionCount(neighborhood, initialColor) === 1
        //at least one white
        // P2 or P8 or (P4 and P6)
         && (neighborhood[1] === options.targetColor || neighborhood[3] === options.targetColor || neighborhood[5] === options.targetColor && neighborhood[7] === options.targetColor)) {
          updated.push(index);
          changed = true;
        }
      }
    });
    updated.forEach(function (pixel) {
      pixels[pixel] = options.targetColor;
    });
  };

  do {
    _loop();
  } while (changed);
  return layer;
}

function zhangSuenBFS(layer, options) {
  var queue = getBoundaryPixels(layer, options);
  var discarded = {};
  var pixels = [].concat(_toConsumableArray(layer.pixels));
  var initialPixel = options.xPosition + options.yPosition * layer.width; //TODO canvas width
  var initialColor = layer.pixels[initialPixel];
  layer = Object.assign({}, layer, { pixels: pixels });
  while (queue.length) {
    queue.push(null);
    var head = queue[0];
    while (head !== null) {
      if (!discarded[head]) {
        var neighbors = getNeighborPixels(layer, head, pixels.length, 3);
        neighbors.forEach(function (neighbor) {
          if (neighbor.color === initialColor) {
            // for each foreground neighbor of head
            var neighborhood = getNeighborhoodColors(layer, neighbor.pixel, pixels.length, 3);
            var nonInitialColors = neighborhood.reduce(function (prev, neighbor) {
              return neighbor === initialColor ? prev : ++prev;
            }, 0);
            if (2 <= nonInitialColors && nonInitialColors <= 6 && getTransitionCount(neighborhood, initialColor) === 1) {
              // can be removed
              pixels[neighbor.pixel] = options.targetColor;
              queue.push(neighbor.pixel);
            } else {
              pixels[neighbor.pixel] = initialColor;
              discarded[neighbor.pixel] = true;
            }
          }
        });
      }
      queue.shift();
      head = queue[0];
    }
    queue.shift();
  }
  return layer;
}

function skeletonization(layer, context, options) {
  if (options.xPosition === '' || options.yPosition === '') {
    return layer;
  }
  if (options.method === 1) {
    return zhangSuen(layer, options);
  } else if (options.method === 2) {
    return zhangSuenBFS(layer, options);
  }
  return layer;
}
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Filter2 = require('./Filter');

var _Filter3 = _interopRequireDefault(_Filter2);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MaskFilter = function (_Filter) {
  _inherits(MaskFilter, _Filter);

  function MaskFilter(props, contents) {
    _classCallCheck(this, MaskFilter);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(MaskFilter).call(this, props, contents));

    _this.onDimensionChange = _this.onDimensionChange.bind(_this);
    _this.applyDimensionChange = _lodash2.default.debounce(_this.applyDimensionChange, 500);
    return _this;
  }

  _createClass(MaskFilter, [{
    key: 'onDimensionChange',
    value: function onDimensionChange(event, options) {
      var dimension = (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object' ? options.dimension : options;
      options = Object.assign({}, options, { dimension: dimension });
      this.applyDimensionChange(dimension, options);
      this.setState(options);
    }
  }, {
    key: 'applyDimensionChange',
    value: function applyDimensionChange(dimension, options) {
      dimension = parseInt(dimension);
      if (dimension < 3) {
        dimension = 3;
      } else if (dimension % 2 === 0) {
        dimension = dimension + 1;
      }
      if (dimension && Number.isInteger(dimension)) {
        options = Object.assign({}, options, { dimension: dimension });
        this.applyFilter(Object.assign({}, this.state, options));
        this.setState(options);
      }
    }
  }]);

  return MaskFilter;
}(_Filter3.default);

exports.default = MaskFilter;
;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _MaskFilter2 = require('./MaskFilter');

var _MaskFilter3 = _interopRequireDefault(_MaskFilter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  },

  input: {
    marginTop: -20,
    width: 170
  }
};

var NoiseReduce = function (_MaskFilter) {
  _inherits(NoiseReduce, _MaskFilter);

  function NoiseReduce(props, content) {
    _classCallCheck(this, NoiseReduce);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(NoiseReduce).call(this, props, content));

    _this.defaultState = {
      type: 'NOISE_REDUCE',
      disabled: true,
      filter: Filters.noiseReduce,
      method: 1,
      dimension: 3,
      order: 1,
      constantD: 1
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onDimensionChange = _this.onDimensionChange.bind(_this);
    _this.onMethodChange = _this.onMethodChange.bind(_this);
    _this.onOrderChange = _this.onOrderChange.bind(_this);
    _this.onConstantDChange = _this.onConstantDChange.bind(_this);
    return _this;
  }

  _createClass(NoiseReduce, [{
    key: 'onDimensionChange',
    value: function onDimensionChange(event, dimension) {
      if (dimension && dimension > -1) {
        var constantD = this.clampConstantD(this.state.constantD, dimension);
        this.applyConstantDChange(constantD, this.state);
      }
      _get(Object.getPrototypeOf(NoiseReduce.prototype), 'onDimensionChange', this).call(this, event, dimension);
    }
  }, {
    key: 'onMethodChange',
    value: function onMethodChange(event, index, method) {
      var options = { method: method };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onOrderChange',
    value: function onOrderChange(event, order) {
      var options = { order: order };
      order = parseFloat(order);
      if (order && !Number.isNaN(order)) {
        this.applyFilter(Object.assign({}, this.state, { order: order }));
      }
      this.setState(options);
    }
  }, {
    key: 'onConstantDChange',
    value: function onConstantDChange(event, constantD) {
      var options = { constantD: constantD };
      this.applyConstantDChange(constantD, options);
      this.setState(options);
    }
  }, {
    key: 'applyConstantDChange',
    value: function applyConstantDChange(constantD, options) {
      constantD = parseInt(constantD);
      constantD = this.clampConstantD(constantD, this.state.dimension);
      if (order && Number.isInteger(constantD)) {
        options = { constantD: constantD };
        this.applyFilter(Object.assign({}, this.state, options));
        this.setState(options);
      }
    }
  }, {
    key: 'clampConstantD',
    value: function clampConstantD(constantD, dimension) {
      if (constantD < 0) {
        constantD = 0;
      } else if (constantD > dimension * dimension - 1) {
        constantD = dimension * dimension - 1;
      }
      return constantD;
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'select', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.method, onChange: this.onMethodChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'Blur' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Min' }),
          _react2.default.createElement(_MenuItem2.default, { value: 3, primaryText: 'Median' }),
          _react2.default.createElement(_MenuItem2.default, { value: 4, primaryText: 'Max' }),
          _react2.default.createElement(_MenuItem2.default, { value: 5, primaryText: 'Midpoint' }),
          _react2.default.createElement(_MenuItem2.default, { value: 6, primaryText: 'Arithmetic Mean' }),
          _react2.default.createElement(_MenuItem2.default, { value: 7, primaryText: 'Geometric Mean' }),
          _react2.default.createElement(_MenuItem2.default, { value: 8, primaryText: 'Harmonic Mean' }),
          _react2.default.createElement(_MenuItem2.default, { value: 9, primaryText: 'Contraharmonic Mean' }),
          _react2.default.createElement(_MenuItem2.default, { value: 10, primaryText: 'Alpha-trimmed Mean' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'maskSize', type: 'number', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { id: 'mask_size', style: styles.input, value: this.state.dimension, onChange: this.onDimensionChange, floatingLabelText: 'Symmetric "N x N"',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'order', type: 'number', disabled: true, style: this.state.method === 9 ? null : { display: 'none' }, primaryText: _react2.default.createElement(_TextField2.default, { id: 'order', style: styles.input, value: this.state.order, onChange: this.onOrderChange, floatingLabelText: 'Order "Q"',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'constantD', type: 'number', disabled: true, style: this.state.method === 10 ? null : { display: 'none' }, primaryText: _react2.default.createElement(_TextField2.default, { id: 'constant_d', style: styles.input, value: this.state.constantD, onChange: this.onConstantDChange, floatingLabelText: 'Alpha "a"',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Noise Reduce' });
    }
  }]);

  return NoiseReduce;
}(_MaskFilter3.default);

exports.default = NoiseReduce;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _MaskFilter2 = require('./MaskFilter');

var _MaskFilter3 = _interopRequireDefault(_MaskFilter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  },

  input: {
    marginTop: -20,
    width: 170
  }
};

var Sharpen = function (_MaskFilter) {
  _inherits(Sharpen, _MaskFilter);

  function Sharpen(props, content) {
    _classCallCheck(this, Sharpen);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Sharpen).call(this, props, content));

    _this.defaultState = {
      type: 'SHARPEN',
      disabled: true,
      filter: Filters.sharpen,
      method: 1,
      dimension: 3,
      maskFactor: 8
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onMethodChange = _this.onMethodChange.bind(_this);
    _this.onMaskFactorChange = _this.onMaskFactorChange.bind(_this);
    return _this;
  }

  _createClass(Sharpen, [{
    key: 'onMethodChange',
    value: function onMethodChange(event, index, method) {
      var options = { method: method };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onMaskFactorChange',
    value: function onMaskFactorChange(event, maskFactor) {
      var options = { maskFactor: maskFactor };
      maskFactor = parseInt(maskFactor);
      if (maskFactor < 1) {
        maskFactor = 1;
        options = { maskFactor: maskFactor };
      }
      if (maskFactor && Number.isInteger(maskFactor)) {
        this.applyFilter(Object.assign({}, this.state, options));
      }
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'select', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.method, onChange: this.onMethodChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'Laplacian' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Highboost' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'maskSize', type: 'number', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { id: 'constant', style: styles.input, value: this.state.dimension, onChange: this.onDimensionChange, floatingLabelText: 'Symmetric "N x N"',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'maskFactor', type: 'number', style: this.state.method === 1 ? { display: 'none' } : null, disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { id: 'factor', style: styles.input, value: this.state.maskFactor, onChange: this.onMaskFactorChange, floatingLabelText: 'Mask Factor "A"',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Sharpen' });
    }
  }]);

  return Sharpen;
}(_MaskFilter3.default);

exports.default = Sharpen;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _IconButton = require('material-ui/IconButton');

var _IconButton2 = _interopRequireDefault(_IconButton);

var _Checkbox = require('material-ui/Checkbox');

var _Checkbox2 = _interopRequireDefault(_Checkbox);

var _colorize = require('material-ui/svg-icons/image/colorize');

var _colorize2 = _interopRequireDefault(_colorize);

var _colors = require('material-ui/styles/colors');

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _ColorFill2 = require('./ColorFill');

var _ColorFill3 = _interopRequireDefault(_ColorFill2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  },

  input: {
    marginTop: -20,
    width: 170
  },

  inputButton: {
    top: 'initial',
    zIndex: 1
  }
};

var Skeletonization = function (_ColorFill) {
  _inherits(Skeletonization, _ColorFill);

  function Skeletonization(props, content) {
    _classCallCheck(this, Skeletonization);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Skeletonization).call(this, props, content));

    _this.defaultState = {
      type: 'SKELETONIZATION',
      disabled: true,
      method: 1,
      filter: Filters.skeletonization,
      xPosition: '',
      yPosition: '',
      targetColor: 0,
      listeners: {
        colorPick: null,
        pixelPos: null
      }
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onMethodChange = _this.onMethodChange.bind(_this);
    return _this;
  }

  _createClass(Skeletonization, [{
    key: 'onMethodChange',
    value: function onMethodChange(event, index, method) {
      var options = { method: method };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'select', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.method, onChange: this.onMethodChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'Zhang-Suen' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Zhang-Suen (BFS)' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'color', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.targetColor, onChange: this.onTargetColorChange, floatingLabelText: 'Background Color',
          disabled: this.state.disabled }), rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { style: styles.inputButton, onClick: this.onColorSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.colorPick ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'label', disabled: true, primaryText: 'Foreground Pixel', rightIconButton: _react2.default.createElement(
          _IconButton2.default,
          { onClick: this.onPixelSelect, disabled: this.state.disabled },
          _react2.default.createElement(_colorize2.default, { color: this.state.listeners.pixelPos ? _colors.cyanA700 : undefined, hoverColor: _colors.cyanA700 })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'seed', style: this.state.method === 1 ? { display: 'none' } : undefined, disabled: true, primaryText: 'Is Seed', leftCheckbox: _react2.default.createElement(_Checkbox2.default, { disabled: true, checked: true }) }), _react2.default.createElement(_List.ListItem, { key: 'xPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.xPosition, onChange: this.onXpositionChange, floatingLabelText: 'X Position',
          disabled: this.state.disabled }) }), _react2.default.createElement(_List.ListItem, { key: 'yPosition', disabled: true, primaryText: _react2.default.createElement(_TextField2.default, { style: styles.input, value: this.state.yPosition, onChange: this.onYpositionChange, floatingLabelText: 'Y Position',
          disabled: this.state.disabled }) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Skeletonization' });
    }
  }]);

  return Skeletonization;
}(_ColorFill3.default);

exports.default = Skeletonization;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _Slider = require('material-ui/Slider');

var _Slider2 = _interopRequireDefault(_Slider);

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _Filter2 = require('./Filter');

var _Filter3 = _interopRequireDefault(_Filter2);

var _ = require('./');

var Filters = _interopRequireWildcard(_);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  slider: {
    overflow: 'visible',
    marginTop: -20,
    width: 165
  },

  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  }
};

var SpatialResolution = function (_Filter) {
  _inherits(SpatialResolution, _Filter);

  function SpatialResolution(props, content) {
    _classCallCheck(this, SpatialResolution);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SpatialResolution).call(this, props, content));

    _this.defaultState = {
      type: 'SPATIAL_RESOLTUION',
      ratio: 1,
      zoomMethod: 1,
      disabled: true,
      filter: Filters.spatialResolution
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onRatioChange = _this.onRatioChange.bind(_this);
    _this.onZoomMethodChange = _this.onZoomMethodChange.bind(_this);
    return _this;
  }

  _createClass(SpatialResolution, [{
    key: 'onRatioChange',
    value: function onRatioChange(event, value) {
      var options = { ratio: value };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onZoomMethodChange',
    value: function onZoomMethodChange(event, index, value) {
      var options = { zoomMethod: value };
      this.applyFilter(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var layer = this.props.layer;

      var resolution = '(' + Math.floor(layer.width * this.state.ratio) + ' X ' + Math.floor(layer.height * this.state.ratio) + ') ratio = ' + this.state.ratio;
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'select', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.zoomMethod, onChange: this.onZoomMethodChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'Nearest Neighbor' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Bilinear Interpolation' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'slider', primaryText: resolution, disabled: true, style: this.state.disabled ? { color: 'rgba(0, 0, 0, 0.298039)' } : null, secondaryText: _react2.default.createElement(
          'div',
          { style: styles.slider },
          _react2.default.createElement(_Slider2.default, { onChange: this.onRatioChange, min: 0.50, step: 0.50, value: this.state.ratio, disabled: this.state.disabled })
        ) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Spatial Resolution' });
    }
  }]);

  return SpatialResolution;
}(_Filter3.default);

exports.default = SpatialResolution;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _reactRouter = require('react-router');

var _Home = require('./Home.css');

var _Home2 = _interopRequireDefault(_Home);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Home: {
    displayName: 'Home'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/Home.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/Home.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var Home = _wrapComponent('Home')(function (_Component) {
  _inherits(Home, _Component);

  function Home() {
    _classCallCheck(this, Home);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Home).apply(this, arguments));
  }

  _createClass(Home, [{
    key: 'render',
    value: function render() {
      return _react3.default.createElement(
        'div',
        null,
        _react3.default.createElement(
          'div',
          { className: _Home2.default.container },
          _react3.default.createElement(
            'h2',
            null,
            'Home'
          ),
          _react3.default.createElement(
            _reactRouter.Link,
            { to: '/counter' },
            'to Counter'
          )
        )
      );
    }
  }]);

  return Home;
}(_react2.Component));

exports.default = Home;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _List = require('material-ui/List');

var _MenuItem = require('material-ui/MenuItem');

var _MenuItem2 = _interopRequireDefault(_MenuItem);

var _SelectField = require('material-ui/SelectField');

var _SelectField2 = _interopRequireDefault(_SelectField);

var _SidebarGroup = require('../SidebarGroup');

var _SidebarGroup2 = _interopRequireDefault(_SidebarGroup);

var _Option2 = require('./Option');

var _Option3 = _interopRequireDefault(_Option2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var styles = {
  select: {
    marginTop: -20,
    marginLeft: 2,
    width: 170,
    overflow: 'hidden',
    whiteSpace: 'nowrap',
    textOverflow: 'ellipsis'
  }
};

var Compression = function (_Option) {
  _inherits(Compression, _Option);

  function Compression(props, content) {
    _classCallCheck(this, Compression);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Compression).call(this, props, content));

    _this.defaultState = {
      type: 'COMPRESSION',
      disabled: true,
      method: 1,
      mode: 2
    };
    _this.state = Object.assign({}, _this.defaultState);
    _this.onMethodChange = _this.onMethodChange.bind(_this);
    _this.onModeChange = _this.onModeChange.bind(_this);
    return _this;
  }

  _createClass(Compression, [{
    key: 'onMethodChange',
    value: function onMethodChange(event, index, method) {
      var options = { method: method };
      this.applyOption(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'onModeChange',
    value: function onModeChange(event, index, mode) {
      var options = { mode: mode };
      this.applyOption(Object.assign({}, this.state, options));
      this.setState(options);
    }
  }, {
    key: 'render',
    value: function render() {
      var controls = [_react2.default.createElement(_List.ListItem, { key: 'method', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.method, onChange: this.onMethodChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'Run Length Encoding' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Huffman Tree' }),
          _react2.default.createElement(_MenuItem2.default, { value: 3, primaryText: 'Differential PCM' }),
          _react2.default.createElement(_MenuItem2.default, { value: 4, primaryText: 'LZW' })
        ) }), _react2.default.createElement(_List.ListItem, { key: 'mode', disabled: true, primaryText: _react2.default.createElement(
          _SelectField2.default,
          { style: styles.select, disabled: this.state.disabled, value: this.state.mode, onChange: this.onModeChange },
          _react2.default.createElement(_MenuItem2.default, { value: 1, primaryText: 'ASCII' }),
          _react2.default.createElement(_MenuItem2.default, { value: 2, primaryText: 'Binary' })
        ) })];
      return _react2.default.createElement(_SidebarGroup2.default, { checkbox: true, checked: !this.state.disabled, onChecked: this.onEnableToggle, controls: controls, title: 'Compression' });
    }
  }]);

  return Compression;
}(_Option3.default);

exports.default = Compression;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = function (_Component) {
  _inherits(Option, _Component);

  function Option(props, content) {
    _classCallCheck(this, Option);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Option).call(this, props, content));

    _this.onEnableToggle = _this.onEnableToggle.bind(_this);
    _this.applyOption = _lodash2.default.debounce(_this.applyOption, 500);
    return _this;
  }

  _createClass(Option, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      this.setState(Object.assign({}, this.defaultState, nextProps.canvas.options[this.defaultState.type]));
    }
  }, {
    key: 'onEnableToggle',
    value: function onEnableToggle(event, enabled) {
      var _props = this.props;
      var canvas = _props.canvas;
      var applyOption = _props.applyOption;

      applyOption(canvas, Object.assign({}, this.state, {
        disabled: !enabled
      }));
    }
  }, {
    key: 'applyOption',
    value: function applyOption(option) {
      var _props2 = this.props;
      var canvas = _props2.canvas;
      var applyOption = _props2.applyOption;
      var index = _props2.index;

      option = Object.assign({}, option, { index: index });
      applyOption(canvas, option);
    }
  }]);

  return Option;
}(_react.Component);

exports.default = Option;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _List = require('material-ui/List');

var _Subheader = require('material-ui/Subheader');

var _Subheader2 = _interopRequireDefault(_Subheader);

var _Compression = require('./Compression');

var _Compression2 = _interopRequireDefault(_Compression);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Options: {
    displayName: 'Options'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/options/Options.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/options/Options.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var Options = _wrapComponent('Options')(function (_Component) {
  _inherits(Options, _Component);

  function Options() {
    _classCallCheck(this, Options);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Options).apply(this, arguments));
  }

  _createClass(Options, [{
    key: 'render',
    value: function render() {
      var _props = this.props;
      var canvases = _props.canvases;
      var canvas = _props.canvas;
      var applyOption = _props.applyOption;

      var index = 0;
      return _react3.default.createElement(
        _List.List,
        null,
        _react3.default.createElement(
          _Subheader2.default,
          null,
          'Options'
        ),
        _react3.default.createElement(_Compression2.default, { index: index++, canvas: canvas, applyOption: applyOption })
      );
    }
  }]);

  return Options;
}(_react2.Component));

exports.default = Options;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Drawer = require('material-ui/Drawer');

var _Drawer2 = _interopRequireDefault(_Drawer);

var _List = require('material-ui/List');

var _TextField = require('material-ui/TextField');

var _TextField2 = _interopRequireDefault(_TextField);

var _Subheader = require('material-ui/Subheader');

var _Subheader2 = _interopRequireDefault(_Subheader);

var _Divider = require('material-ui/Divider');

var _Divider2 = _interopRequireDefault(_Divider);

var _Options = require('../containers/Options');

var _Options2 = _interopRequireDefault(_Options);

var _Filters = require('../containers/Filters');

var _Filters2 = _interopRequireDefault(_Filters);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Sidebar: {
    displayName: 'Sidebar'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/Sidebar.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/Sidebar.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var styles = {

  input: {
    marginTop: -35,
    width: 220
  }
};

var Sidebar = _wrapComponent('Sidebar')(function (_Component) {
  _inherits(Sidebar, _Component);

  function Sidebar() {
    _classCallCheck(this, Sidebar);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Sidebar).apply(this, arguments));
  }

  _createClass(Sidebar, [{
    key: 'render',
    value: function render() {
      var _props = this.props;
      var open = _props.open;
      var canvas = _props.canvas;
      var applyFilter = _props.applyFilter;

      if (!canvas) {
        return _react3.default.createElement(
          _Drawer2.default,
          { open: open, zDepth: 2 },
          _react3.default.createElement(
            _List.List,
            null,
            _react3.default.createElement(
              _Subheader2.default,
              null,
              'No Selected Canvas'
            )
          )
        );
      }
      return _react3.default.createElement(
        _Drawer2.default,
        { open: open, zDepth: 2 },
        _react3.default.createElement(
          _List.List,
          null,
          _react3.default.createElement(
            _Subheader2.default,
            null,
            'Canvas'
          ),
          _react3.default.createElement(_List.ListItem, { key: 'color', disabled: true, primaryText: _react3.default.createElement(_TextField2.default, { style: styles.input, value: "Canvas " + canvas.id, floatingLabelText: 'Name',
              disabled: true }) }),
          _react3.default.createElement(_List.ListItem, { key: 'width', disabled: true, primaryText: _react3.default.createElement(_TextField2.default, { style: styles.input, value: canvas.width, floatingLabelText: 'Width', disabled: true }) }),
          _react3.default.createElement(_List.ListItem, { key: 'height', disabled: true, primaryText: _react3.default.createElement(_TextField2.default, { style: styles.input, value: canvas.height, floatingLabelText: 'Height', disabled: true }) }),
          _react3.default.createElement(_Divider2.default, null),
          _react3.default.createElement(
            _Subheader2.default,
            null,
            'Layers'
          ),
          canvas.layers.length ? canvas.layers.map(function (layer, index) {
            return _react3.default.createElement(
              _List.List,
              { key: "layer_" + index },
              _react3.default.createElement(_List.ListItem, { primaryText: "Layer " + index, secondaryText: _react3.default.createElement(
                  'p',
                  { style: { wordWrap: "break-word" } },
                  layer.filepath
                ), secondaryTextLines: 2, disabled: true }),
              layer.compressionRatio ? _react3.default.createElement(_List.ListItem, { primaryText: 'Compression Ratio', disabled: true, secondaryText: layer.compressionRatio + ':1' }) : null
            );
          }) : _react3.default.createElement(_List.ListItem, { primaryText: 'Empty', disabled: true })
        ),
        _react3.default.createElement(_Divider2.default, null),
        canvas.layers.length ? _react3.default.createElement(_Options2.default, { canvas: canvas }) : null,
        canvas.layers.length ? _react3.default.createElement(_Divider2.default, null) : null,
        canvas.layers.length ? _react3.default.createElement(_Filters2.default, { canvas: canvas }) : null
      );
    }
  }]);

  return Sidebar;
}(_react2.Component));

exports.default = Sidebar;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _List = require('material-ui/List');

var _Checkbox = require('material-ui/Checkbox');

var _Checkbox2 = _interopRequireDefault(_Checkbox);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  SidebarGroup: {
    displayName: 'SidebarGroup'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/SidebarGroup.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/SidebarGroup.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var SidebarGroup = _wrapComponent('SidebarGroup')(function (_Component) {
  _inherits(SidebarGroup, _Component);

  function SidebarGroup(props, content) {
    _classCallCheck(this, SidebarGroup);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SidebarGroup).call(this, props, content));

    _this.state = { checked: false };
    _this.onChecked = _this.onChecked.bind(_this);
    return _this;
  }

  _createClass(SidebarGroup, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      this.setState({ checked: nextProps.checked });
    }
  }, {
    key: 'onChecked',
    value: function onChecked(event) {
      var onChecked = this.props.onChecked;

      this.setState({ checked: !this.state.checked });
      onChecked(event, !this.state.checked);
      event.stopPropagation();
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props;
      var title = _props.title;
      var controls = _props.controls;
      var checkbox = _props.checkbox;

      return _react3.default.createElement(_List.ListItem, { primaryText: title, nestedItems: controls,
        leftCheckbox: checkbox ? _react3.default.createElement(_Checkbox2.default, { checked: this.state.checked, onClick: this.onChecked }) : null
      });
    }
  }]);

  return SidebarGroup;
}(_react2.Component));

exports.default = SidebarGroup;


SidebarGroup.defaultProps = {
  onChecked: function onChecked() {}
};
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Canvas = require('../containers/Canvas');

var _Canvas2 = _interopRequireDefault(_Canvas);

var _Canvas3 = require('../components/Canvas');

var _electron = require('electron');

var _Workspace = require('./Workspace.css');

var _Workspace2 = _interopRequireDefault(_Workspace);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  Workspace: {
    displayName: 'Workspace'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/components/Workspace.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/components/Workspace.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var Workspace = _wrapComponent('Workspace')(function (_Component) {
  _inherits(Workspace, _Component);

  function Workspace(props, content) {
    _classCallCheck(this, Workspace);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Workspace).call(this, props, content));

    _this.onCanvasSelect = _this.onCanvasSelect.bind(_this);
    _this.loadImage = _this.loadImage.bind(_this);
    _this.saveImage = _this.saveImage.bind(_this);
    return _this;
  }

  _createClass(Workspace, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      _electron.ipcRenderer.on('load-image', this.loadImage);
      _electron.ipcRenderer.on('save-image', this.saveImage);
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      _electron.ipcRenderer.removeAllListeners('load-image');
      _electron.ipcRenderer.removeAllListeners('save-image');
    }
  }, {
    key: 'onCanvasSelect',
    value: function onCanvasSelect(canvas) {
      var selectCanvas = this.props.selectCanvas;

      selectCanvas(canvas);
    }
  }, {
    key: 'loadImage',
    value: function loadImage(event, canvas) {
      var _props = this.props;
      var canvases = _props.canvases;
      var addCanvas = _props.addCanvas;
      var removeCanvas = _props.removeCanvas;

      if (!canvases[0].id) {
        removeCanvas(canvases[0]);
      }
      var width = canvas.imageFile.width;
      var height = canvas.imageFile.height;
      var paths = canvas.imageFile.filepath.split('\\');
      addCanvas(Object.assign({}, _Canvas3.canvasProps, {
        id: canvas.id,
        title: paths[paths.length - 1],
        width: width,
        height: height,
        layers: [Object.assign({}, canvas.imageFile, {
          filters: {}
        })],
        options: {},
        status: 'rendering'
      }));
    }
  }, {
    key: 'saveImage',
    value: function saveImage(event, destination) {
      var _props2 = this.props;
      var canvases = _props2.canvases;
      var saveImage = _props2.saveImage;

      var canvas = canvases.find(function (canvas) {
        return canvas.selected;
      });
      if (canvas.layers.length) {
        saveImage(canvas, destination);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props3 = this.props;
      var canvases = _props3.canvases;
      var sidebarOpen = _props3.sidebarOpen;
      var connectDropTarget = _props3.connectDropTarget;

      return connectDropTarget(_react3.default.createElement(
        'div',
        { className: _Workspace2.default.workspace, style: {
            width: 'calc(100% - ' + (sidebarOpen ? 256 : 0) + 'px)',
            marginLeft: (sidebarOpen ? 256 : 0) + 'px'
          } },
        canvases.map(function (canvas, index) {
          return _react3.default.createElement(_Canvas2.default, { key: index, canvas: canvas, onSelect: _this2.onCanvasSelect });
        })
      ));
    }
  }]);

  return Workspace;
}(_react2.Component));

exports.default = Workspace;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class, _temp;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  App: {
    displayName: 'App'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/containers/App.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/containers/App.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var App = _wrapComponent('App')((_temp = _class = function (_Component) {
  _inherits(App, _Component);

  function App() {
    _classCallCheck(this, App);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(App).apply(this, arguments));
  }

  _createClass(App, [{
    key: 'render',
    value: function render() {
      return _react3.default.createElement(
        'div',
        null,
        this.props.children,
        function () {
          if (process.env.NODE_ENV !== 'production') {
            var DevTools = require('./DevTools'); // eslint-disable-line global-require
            return _react3.default.createElement(DevTools, null);
          }
        }()
      );
    }
  }]);

  return App;
}(_react2.Component), _class.propTypes = {
  children: _react2.PropTypes.element.isRequired
}, _temp));

exports.default = App;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _reactDnd = require('react-dnd');

var _Canvas = require('../components/Canvas');

var _Canvas2 = _interopRequireDefault(_Canvas);

var _CanvasActions = require('../actions/CanvasActions');

var canvasActions = _interopRequireWildcard(_CanvasActions);

var _ItemTypes = require('./ItemTypes');

var _ItemTypes2 = _interopRequireDefault(_ItemTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var canvasSource = {
  beginDrag: function beginDrag(props, monitor, component) {
    var canvas = props.canvas;

    var rect = component.refs.canvas.getBoundingClientRect();
    return Object.assign({}, canvas, {
      left: rect.left,
      top: rect.top - 50
    });
  }
};

function collect(connect, monitor) {
  return {
    connectDragSource: connect.dragSource(),
    connectDragPreview: connect.dragPreview(),
    isDragging: monitor.isDragging()
  };
}

function mapStateToProps(state) {
  return {};
}

function mapDispatchToProps(dispatch) {
  return (0, _redux.bindActionCreators)(canvasActions, dispatch);
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)((0, _reactDnd.DragSource)(_ItemTypes2.default.CANVAS, canvasSource, collect)(_Canvas2.default));
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _Counter = require('../components/Counter');

var _Counter2 = _interopRequireDefault(_Counter);

var _counter = require('../actions/counter');

var CounterActions = _interopRequireWildcard(_counter);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function mapStateToProps(state) {
  return {
    counter: state.counter
  };
}

function mapDispatchToProps(dispatch) {
  return (0, _redux.bindActionCreators)(CounterActions, dispatch);
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_Counter2.default);
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reduxDevtools = require('redux-devtools');

var _reduxDevtoolsLogMonitor = require('redux-devtools-log-monitor');

var _reduxDevtoolsLogMonitor2 = _interopRequireDefault(_reduxDevtoolsLogMonitor);

var _reduxDevtoolsDockMonitor = require('redux-devtools-dock-monitor');

var _reduxDevtoolsDockMonitor2 = _interopRequireDefault(_reduxDevtoolsDockMonitor);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (0, _reduxDevtools.createDevTools)(_react2.default.createElement(
  _reduxDevtoolsDockMonitor2.default,
  {
    toggleVisibilityKey: 'ctrl-h',
    changePositionKey: 'ctrl-q'
  },
  _react2.default.createElement(_reduxDevtoolsLogMonitor2.default, null)
));
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _Editor = require('../components/Editor');

var _Editor2 = _interopRequireDefault(_Editor);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function mapStateToProps(state) {
  return {
    canvases: state.canvases
  };
}

exports.default = (0, _reactRedux.connect)(mapStateToProps)(_Editor2.default);
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _Filters = require('../components/filters/Filters');

var _Filters2 = _interopRequireDefault(_Filters);

var _CanvasActions = require('../actions/CanvasActions');

var canvasActions = _interopRequireWildcard(_CanvasActions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function mapStateToProps(state) {
  return {
    canvases: state.canvases
  };
}

function mapDispatchToProps(dispatch) {
  return (0, _redux.bindActionCreators)(canvasActions, dispatch);
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_Filters2.default);
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Home = require('../components/Home');

var _Home2 = _interopRequireDefault(_Home);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _components = {
  HomePage: {
    displayName: 'HomePage'
  }
};

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'app/containers/HomePage.js',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'app/containers/HomePage.js',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

var HomePage = _wrapComponent('HomePage')(function (_Component) {
  _inherits(HomePage, _Component);

  function HomePage() {
    _classCallCheck(this, HomePage);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(HomePage).apply(this, arguments));
  }

  _createClass(HomePage, [{
    key: 'render',
    value: function render() {
      return _react3.default.createElement(_Home2.default, null);
    }
  }]);

  return HomePage;
}(_react2.Component));

exports.default = HomePage;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  CANVAS: 'canvas'
};
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _Options = require('../components/options/Options');

var _Options2 = _interopRequireDefault(_Options);

var _CanvasActions = require('../actions/CanvasActions');

var canvasActions = _interopRequireWildcard(_CanvasActions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function mapStateToProps(state) {
  return {
    canvases: state.canvases
  };
}

function mapDispatchToProps(dispatch) {
  return (0, _redux.bindActionCreators)(canvasActions, dispatch);
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_Options2.default);
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _reactDnd = require('react-dnd');

var _reactDndHtml5Backend = require('react-dnd-html5-backend');

var _reactDndHtml5Backend2 = _interopRequireDefault(_reactDndHtml5Backend);

var _Workspace = require('../components/Workspace');

var _Workspace2 = _interopRequireDefault(_Workspace);

var _ItemTypes = require('./ItemTypes');

var _ItemTypes2 = _interopRequireDefault(_ItemTypes);

var _WorkspaceActions = require('../actions/WorkspaceActions');

var workspaceActions = _interopRequireWildcard(_WorkspaceActions);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var editorTarget = {
  drop: function drop(props, monitor, component) {
    var moveCanvas = props.moveCanvas;
    var sidebarOpen = props.sidebarOpen;

    var item = monitor.getItem();
    var delta = monitor.getDifferenceFromInitialOffset();
    var left = Math.round(item.left + delta.x) - (sidebarOpen ? 256 : 0);
    var top = Math.round(item.top + delta.y);
    moveCanvas(Object.assign({}, item, { left: left, top: top }));
  }
};

function collect(connect) {
  return {
    connectDropTarget: connect.dropTarget()
  };
}

function mapStateToProps(state) {
  return {
    canvases: state.canvases
  };
}

function mapDispatchToProps(dispatch) {
  return (0, _redux.bindActionCreators)(workspaceActions, dispatch);
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)((0, _reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)((0, _reactDnd.DropTarget)(_ItemTypes2.default.CANVAS, editorTarget, collect)(_Workspace2.default)));
module.exports = exports['default'];
'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _reactRedux = require('react-redux');

var _reactRouter = require('react-router');

var _reactRouterRedux = require('react-router-redux');

var _routes = require('./routes');

var _routes2 = _interopRequireDefault(_routes);

var _configureStore = require('./store/configureStore');

var _configureStore2 = _interopRequireDefault(_configureStore);

var _getMuiTheme = require('material-ui/styles/getMuiTheme');

var _getMuiTheme2 = _interopRequireDefault(_getMuiTheme);

var _MuiThemeProvider = require('material-ui/styles/MuiThemeProvider');

var _MuiThemeProvider2 = _interopRequireDefault(_MuiThemeProvider);

var _reactTapEventPlugin = require('react-tap-event-plugin');

var _reactTapEventPlugin2 = _interopRequireDefault(_reactTapEventPlugin);

require('./app.global.css');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var store = (0, _configureStore2.default)();
var history = (0, _reactRouterRedux.syncHistoryWithStore)(_reactRouter.hashHistory, store);

(0, _reactTapEventPlugin2.default)();

(0, _reactDom.render)(_react2.default.createElement(
  _MuiThemeProvider2.default,
  { muiTheme: (0, _getMuiTheme2.default)() },
  _react2.default.createElement(
    _reactRedux.Provider,
    { store: store },
    _react2.default.createElement(_reactRouter.Router, { history: history, routes: _routes2.default })
  )
), document.getElementById('root'));
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = counter;

var _counter = require('../actions/counter');

function counter() {
  var state = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];
  var action = arguments[1];

  switch (action.type) {
    case _counter.INCREMENT_COUNTER:
      return state + 1;
    case _counter.DECREMENT_COUNTER:
      return state - 1;
    default:
      return state;
  }
}
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _redux = require('redux');

var _reactRouterRedux = require('react-router-redux');

var _Canvas = require('../components/Canvas');

var _WorkspaceActions = require('../actions/WorkspaceActions');

var _counter = require('./counter');

var _counter2 = _interopRequireDefault(_counter);

var _renderer = require('./renderer');

var _renderer2 = _interopRequireDefault(_renderer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function workspaceReducer() {
  var state = arguments.length <= 0 || arguments[0] === undefined ? [Object.assign({}, _Canvas.canvasProps, { selected: true })] : arguments[0];
  var action = arguments[1];

  state = (0, _renderer2.default)(state, action);
  var status = void 0;
  if (action.type === _WorkspaceActions.COMPRESS_IMAGE || action.type === _WorkspaceActions.SAVE_IMAGE) {
    return state.map(function (canvas) {
      if (canvas.id === action.payload.id) {
        return action.payload;
      }
      return canvas;
    });
  }
  return state;
}

var rootReducer = (0, _redux.combineReducers)({
  //counter,
  canvases: workspaceReducer,
  routing: _reactRouterRedux.routerReducer
});

exports.default = rootReducer;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = renderer;

var _WorkspaceActions = require('../actions/WorkspaceActions');

var _CanvasActions = require('../actions/CanvasActions');

var _canvasUtils = require('../utils/canvas-utils');

var canvasUtils = _interopRequireWildcard(_canvasUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function canvasRenderer(state, action) {
    if (!state.id || action.payload.id !== state.id) {
        return state;
    }
    if (action.type === _CanvasActions.INIT_CONTEXT && !state.context) {
        return action.payload;
    }
    if (action.type === _CanvasActions.APPLY_OPTION) {
        return action.payload;
    }
    if (action.type === _CanvasActions.APPLY_FILTER) {
        return Object.assign({}, action.payload, { status: 'rendering' });
    }
    if (action.type === _CanvasActions.RENDER_LAYER) {
        return Object.assign({}, state, action.payload, { status: 'ready' });
    }
    if (action.type === _CanvasActions.RENDER_LAYERS) {
        return Object.assign({}, state, action.payload, { status: 'ready' });
    }
    return state;
}

function renderer(state, action) {
    state = state.map(function (canvas) {
        return canvasRenderer(canvas, action);
    });
    if (action.type === _WorkspaceActions.ADD_CANVAS) {
        return [].concat(_toConsumableArray(state.map(function (canvas) {
            return Object.assign({}, canvas, { selected: false });
        })), [Object.assign({}, action.payload, { selected: true })]);
    }
    if (action.type === _WorkspaceActions.REMOVE_CANVAS) {
        return state.filter(function (canvas) {
            return canvas !== action.payload;
        });
    }
    if (action.type === _WorkspaceActions.MOVE_CANVAS) {
        return state.map(function (canvas) {
            if (action.payload.id === canvas.id) {
                return Object.assign({}, canvas, action.payload);
            }
            return canvas;
        });
    }
    if (action.type === _WorkspaceActions.SELECT_CANVAS) {
        return state.map(function (canvas) {
            if (action.payload.id === canvas.id) {
                return Object.assign({}, canvas, { selected: true });
            }
            return Object.assign({}, canvas, { selected: false });
        });
    }
    return state;
}
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRouter = require('react-router');

var _App = require('./containers/App');

var _App2 = _interopRequireDefault(_App);

var _Editor = require('./containers/Editor');

var _Editor2 = _interopRequireDefault(_Editor);

var _CounterPage = require('./containers/CounterPage');

var _CounterPage2 = _interopRequireDefault(_CounterPage);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _react2.default.createElement(
  _reactRouter.Route,
  { path: '/', component: _App2.default },
  _react2.default.createElement(_reactRouter.IndexRoute, { component: _Editor2.default }),
  '/* ',
  _react2.default.createElement(_reactRouter.Route, { path: '/counter', component: _CounterPage2.default }),
  ' */'
);
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = configureStore;

var _redux = require('redux');

var _reduxDevtools = require('redux-devtools');

var _reduxThunk = require('redux-thunk');

var _reduxThunk2 = _interopRequireDefault(_reduxThunk);

var _reduxLogger = require('redux-logger');

var _reduxLogger2 = _interopRequireDefault(_reduxLogger);

var _reactRouter = require('react-router');

var _reactRouterRedux = require('react-router-redux');

var _reducers = require('../reducers');

var _reducers2 = _interopRequireDefault(_reducers);

var _DevTools = require('../containers/DevTools');

var _DevTools2 = _interopRequireDefault(_DevTools);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var logger = (0, _reduxLogger2.default)({
  level: 'info',
  collapsed: true
});

var router = (0, _reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);

var enhancer = (0, _redux.compose)((0, _redux.applyMiddleware)(_reduxThunk2.default, router, logger), _DevTools2.default.instrument(), (0, _reduxDevtools.persistState)(window.location.href.match(/[?&]debug_session=([^&]+)\b/)));

function configureStore(initialState) {
  var store = (0, _redux.createStore)(_reducers2.default, initialState, enhancer);

  if (module.hot) {
    module.hot.accept('../reducers', function () {
      return store.replaceReducer(require('../reducers'));
    } // eslint-disable-line global-require
    );
  }

  return store;
}
module.exports = exports['default'];
'use strict';

if (process.env.NODE_ENV === 'production') {
  module.exports = require('./configureStore.production'); // eslint-disable-line global-require
} else {
    module.exports = require('./configureStore.development'); // eslint-disable-line global-require
  }
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = configureStore;

var _redux = require('redux');

var _reduxThunk = require('redux-thunk');

var _reduxThunk2 = _interopRequireDefault(_reduxThunk);

var _reactRouter = require('react-router');

var _reactRouterRedux = require('react-router-redux');

var _reducers = require('../reducers');

var _reducers2 = _interopRequireDefault(_reducers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var router = (0, _reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);

var enhancer = (0, _redux.applyMiddleware)(_reduxThunk2.default, router);

function configureStore(initialState) {
  return (0, _redux.createStore)(_reducers2.default, initialState, enhancer);
}
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createVertexShader = createVertexShader;
exports.createFragmentShader = createFragmentShader;
exports.initContext = initContext;
exports.renderLayer = renderLayer;
exports.getPixels = getPixels;
exports.getPixel = getPixel;
exports.cleanUp = cleanUp;
exports.runLengthEncode = runLengthEncode;
exports.huffmanEncode = huffmanEncode;
exports.lzwEncode = lzwEncode;
exports.exportCanvasAsImage = exportCanvasAsImage;

var _imageSpatial = require('../shaders/image-spatial.vert');

var _imageSpatial2 = _interopRequireDefault(_imageSpatial);

var _imageRaster = require('../shaders/image-raster.frag');

var _imageRaster2 = _interopRequireDefault(_imageRaster);

var _stream = require('stream');

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _HuffmanTree = require('./HuffmanTree');

var _HuffmanTree2 = _interopRequireDefault(_HuffmanTree);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function isError(gl, shader) {
  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    var info = gl.getShaderInfoLog(shader);
    gl.deleteShader(shader);
    console.error("Could not compile vertex shader. \n\n" + info);
    return true;
  }
  return false;
}

function createVertexShader(gl, program) {
  var shader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(shader, _imageSpatial2.default);
  gl.compileShader(shader);
  if (isError(gl, shader)) {
    return null;
  }
  return shader;
}

function createFragmentShader(gl, program) {
  var shader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(shader, _imageRaster2.default);
  gl.compileShader(shader);
  if (isError(gl, shader)) {
    return;
  }
  return shader;
}

function initContext(canvas, gl) {
  var context = { gl: gl };

  //create and init shaders
  var program = gl.createProgram();
  var vertexShader = createVertexShader(gl, program);
  var fragmentShader = createFragmentShader(gl, program);
  if (!vertexShader || !fragmentShader) {
    gl.deleteProgram(program);
    return;
  }
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);

  gl.linkProgram(program);
  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
    var info = gl.getProgramInfoLog(program);
    console.error("Error in program linking:" + info);
    cleanUp(context);
    return;
  }
  gl.useProgram(program);

  //create texture coordinate buffer
  var vertexBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);

  //specify the location of the texture coordinate data
  var texCoordInLocation = gl.getAttribLocation(program, "a_texCoord");
  gl.enableVertexAttribArray(texCoordInLocation);
  gl.vertexAttribPointer(texCoordInLocation, 2, gl.FLOAT, false, 0, 0);

  // set the resolution
  var resolutionLocation = gl.getUniformLocation(program, "u_resolution");
  gl.uniform2f(resolutionLocation, canvas.width, canvas.height);

  return Object.assign({}, context, {
    program: program,
    vertexShader: vertexShader,
    fragmentShader: fragmentShader
  });
}

function isPowerOfTwo(x) {
  return (x & x - 1) == 0;
}

function nextHighestPowerOfTwo(x) {
  --x;
  for (var i = 1; i < 32; i <<= 1) {
    x = x | x >> i;
  }
  return x + 1;
}

function renderLayer(context, layer, layerIndex) {
  if (layerIndex > 31) {
    console.error("Only up to 32 layers per Canvas is supported");
    return;
  }
  var gl = context.gl;

  // apply filters
  var filters = _lodash2.default.values(layer.filters).sort(function (a, b) {
    return a.index - b.index;
  });
  filters.forEach(function (options) {
    if (!options.disabled) {
      layer = options.filter(layer, context, options);
    }
  });

  var register = gl['TEXTURE' + layerIndex];
  var program = context.program;
  var width = isPowerOfTwo(layer.width) ? layer.width : nextHighestPowerOfTwo(layer.width);
  var height = isPowerOfTwo(layer.height) ? layer.height : nextHighestPowerOfTwo(layer.height);
  var texture = gl.createTexture();
  var pixels = new Uint8Array(3 * width * height);
  var offset = width - layer.width;
  var index = 0;
  var rowIndex = 0;

  //map pixels for grayscale
  layer.pixels.forEach(function (pixel) {
    var remaining = layer.width - index;
    if (remaining % layer.width === 0) {
      rowIndex = index / layer.width;
    }
    pixels[index++ + rowIndex * offset] = pixel;
    pixels[index++ + rowIndex * offset] = pixel;
    pixels[index++ + rowIndex * offset] = pixel;
  });

  //create pixel data buffer
  var textureBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, textureBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, width, 0.0, 0.0, height, 0.0, height, width, 0.0, width, height]), gl.STATIC_DRAW);

  //specify the location of the pixel position data
  var positionLocation = gl.getAttribLocation(program, "a_position");
  gl.enableVertexAttribArray(positionLocation);
  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

  //config texture
  gl.bindTexture(gl.TEXTURE_2D, texture);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, width, height, 0, gl.RGB, gl.UNSIGNED_BYTE, pixels);

  //render
  gl.clearColor(0.0, 0.0, 0.0, 1.0);
  gl.clear(gl.COLOR_BUFFER_BIT);
  gl.activeTexture(register);
  gl.drawArrays(gl.TRIANGLES, 0, 6);

  // cleanup
  gl.deleteBuffer(textureBuffer);
  gl.deleteTexture(texture);
}

function getPixels(canvas) {
  var gl = canvas.context.gl;
  var pixels = new Uint8Array(4 * canvas.width * canvas.height);
  gl.readPixels(0, 0, canvas.width, canvas.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);
  var last = pixels.length / 4 - 1;
  var rawPixels = [];
  var index = last;
  var offset = 0;
  for (var i = 0; i < pixels.length; i += 4) {
    var pixel = Math.round((pixels[i] + pixels[i + 1] + pixels[i + 2]) / 3);
    if ((index + 1) % canvas.width === 0) {
      offset = index;
    }
    rawPixels[offset + (offset - index--)] = pixel;
  }
  return rawPixels;
}

function getPixel(canvas, x, y) {
  var gl = canvas.context.gl;
  var pixel = new Uint8Array(4);
  gl.readPixels(x, canvas.height - y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);
  return pixel[0];
}

function cleanUp(context) {
  if (!context) {
    return;
  }
  var gl = context.gl;
  gl.deleteProgram(context.program);
  gl.deleteShader(context.vertexShader);
  gl.deleteShader(context.fragmentShader);
}

function runLengthEncode(stream, pixels, width, height, mode) {
  var magicNumber = 'E2';
  var count = 1;
  var prev = void 0;
  if (mode === 1) {
    magicNumber = 'E1';
  }
  stream.write(magicNumber + '\n' + width + ' ' + height + '\n255\n');
  pixels.forEach(function (pixel, index) {
    if (prev === pixel) {
      count++;
    } else if (prev !== undefined && prev !== pixel) {
      if (mode === 1) {
        // ASCII
        stream.write(prev + ' ' + count + (index === pixels.length - 1 ? '\n' : ' '));
      } else {
        // BIN
        var pixelBuffer = new Buffer.allocUnsafe(1);
        var countBuffer = new Buffer(4);
        pixelBuffer.writeUInt8(prev);
        countBuffer.writeUInt32BE(count);
        stream.write(pixelBuffer);
        stream.write(countBuffer);
      }
      count = 1;
    }
    prev = pixel;
  });
}

function huffmanEncode(stream, pixels, width, height, mode) {
  var histogram = {};
  pixels.forEach(function (pixel) {
    if (histogram[pixel]) {
      histogram[pixel]++;
    } else {
      histogram[pixel] = 1;
    }
  });
  var tree = new _HuffmanTree2.default(histogram, ',', pixels.length);
  var codeBook = {};
  tree.leaves.forEach(function (node) {
    if (node === tree.root) {
      return;
    }
    var token = node.token;
    codeBook[token] = node.bit;
    while (node.parent !== tree.root) {
      node = node.parent;
      codeBook[token] = node.bit + codeBook[token];
    }
  });
  var encoded = '';
  pixels.forEach(function (pixel, index) {
    encoded += codeBook[pixel.toString()];
  });
  var chunks = encoded.match(/.{1,8}/g);
  var magicNumber = 'E4';
  if (mode === 1) {
    magicNumber = 'E3';
  }
  stream.write(magicNumber + '\n' + width + ' ' + height + '\n255\n');
  Object.keys(codeBook).forEach(function (key) {
    var buffer = new Buffer(2);
    buffer.writeUInt8(parseInt(key));
    buffer.writeUInt8(parseInt(codeBook[key], 2), 1);
    stream.write(buffer);
  });
  stream.write('\n');
  chunks.forEach(function (chunk, index) {
    var byte = parseInt(chunk, 2);
    if (mode === 1) {
      // ASCII
      stream.write(byte + ' ');
    } else {
      // BIN
      var buffer = new Buffer(1);
      buffer.writeUInt8(byte);
      stream.write(buffer);
    }
  });
}

function lzwEncode(stream, pixels, width, height, mode) {
  var max = Math.pow(2, 16);
  var writeBytes = function writeBytes(bytes) {
    if (mode === 1) {
      // ASCII
      stream.write(bytes + ' ');
    } else {
      // BIN
      var buffer = new Buffer(2);
      buffer.writeUInt16BE(bytes);
      stream.write(buffer);
    }
  };
  var output = void 0;
  var index = 255;
  var prev = '';
  var dictionary = {};
  var magicNumber = 'E6';
  if (mode === 1) {
    magicNumber = 'E5';
  }
  stream.write(magicNumber + '\n' + width + ' ' + height + '\n255\n');
  pixels.forEach(function (pixel) {
    var key = prev + ' ' + pixel;
    if (dictionary[key]) {
      prev = key;
    } else {
      output = dictionary[prev] ? dictionary[prev] : parseInt(prev);
      writeBytes(output);
      if (index + 1 > 255) {
        dictionary[key] = ++index;
      }
      prev = pixel;
    }
  });
  output = dictionary[prev] ? dictionary[prev] : parseInt(prev);
  writeBytes(output);
}

function exportCanvasAsImage(canvas, destination) {
  var stream = _fs2.default.createWriteStream(destination);
  var pixels = getPixels(canvas);
  var method = canvas.options.COMPRESSION ? canvas.options.COMPRESSION.method : 0;
  var mode = canvas.options.COMPRESSION ? canvas.options.COMPRESSION.mode : 0;
  if (method === 1) {
    // Run length encoding
    runLengthEncode(stream, pixels, canvas.width, canvas.height, mode);
  } else if (method === 2) {
    // huffman
    huffmanEncode(stream, pixels, canvas.width, canvas.height, mode);
  } else if (method === 3) {// differential PCM

  } else if (method === 4) {
      // LZW
      lzwEncode(stream, pixels, canvas.width, canvas.height, mode);
    } else {
      stream.write('P5\n' + canvas.width + ' ' + canvas.height + '\n255\n');
      pixels.forEach(function (pixel, index) {
        var buffer = new Buffer.allocUnsafe(1);
        buffer.writeUInt8(pixel);
        stream.write(buffer);
      });
    }
  stream.end();
}
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HuffmanTree = function HuffmanTree(histogram, seperator, total) {
  _classCallCheck(this, HuffmanTree);

  seperator = seperator || '';
  var nodes = Object.keys(histogram).map(function (key) {
    return {
      token: key.toString(),
      probability: histogram[key] / total,
      parent: null
    };
  });
  nodes.sort(function (current, next) {
    return current.probability - next.probability;
  });
  this.leaves = [].concat(_toConsumableArray(nodes));
  while (nodes.length) {
    var current = nodes.shift();
    var next = nodes.shift();
    if (next) {
      var parent = {
        token: current.token + seperator + next.token,
        probability: current.probability + next.probability,
        left: current,
        right: next
      };
      current.parent = parent;
      current.bit = '0';
      next.parent = parent;
      next.bit = '1';
      nodes.push(parent);
      if (parent.probability < nodes[nodes.length - 1].probability) {
        nodes.sort(function (current, next) {
          return current.probability - next.probability;
        });
      }
    } else {
      this.root = current;
    }
  }
};

exports.default = HuffmanTree;
module.exports = exports['default'];
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.runLengthDecode = runLengthDecode;
function runLengthDecode(data) {
  var pixels = [];
  var prev = void 0;
  data.forEach(function (value, index) {
    if (index % 2 === 1) {
      var count = value;
      for (var i = 0; i < count; i++) {
        pixels.push(prev);
      }
    }
    prev = value;
  });
  return pixels;
}
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _lineReader = require('line-reader');

var _lineReader2 = _interopRequireDefault(_lineReader);

var _PBMFileReader = require('./PBMFileReader');

var _PBMFileReader2 = _interopRequireDefault(_PBMFileReader);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PBM_COMPRESSED_FORMATS = {
    //"E1" : "PGM_ASCII_RLE_COMPRESSED",
    "E2": "PGM_BIN_RLE_COMPRESSED",
    //"E3" : "PGM_ASCII_HME_COMPRESSED",
    "E4": "PGM_BIN_HME_COMPRESSED",
    //"E5" : "PGM_ASCII_LZW_COMPRESSED",
    "E6": "PGM_BIN_LZW_COMPRESSED"
};

var PBM_IMAGE_FORMATS = Object.assign({}, {
    //"P1" : "PBM_ASCII",
    "P2": "PGM_ASCII",
    //"P3" : "PPM_ASCII",
    //"P4" : "PBM_BIN",
    "P5": "PGM_BIN"
}, //"P6" : "PPM_BIN",
PBM_COMPRESSED_FORMATS);

var PBMAsciiReader = function () {
    function PBMAsciiReader(filepath, onLine, onClose) {
        var _this = this;

        _classCallCheck(this, PBMAsciiReader);

        var index = 0;
        _lineReader2.default.eachLine(filepath, function (line, last) {
            if (onLine) {
                onLine(line, index++, last);
            }
            if (last || _this.error) {
                onClose(_this.error);
                return false;
            }
        });
    }

    _createClass(PBMAsciiReader, [{
        key: 'close',
        value: function close(error) {
            this.error = error;
        }
    }]);

    return PBMAsciiReader;
}();

var ImageFile = function () {
    function ImageFile(filepath) {
        _classCallCheck(this, ImageFile);

        this.filepath = filepath;
        this.length = 0;
        this.pixels = [];
    }

    _createClass(ImageFile, [{
        key: 'on',
        value: function on(event, callback) {
            this[event] = callback;
        }
    }, {
        key: 'load',
        value: function load() {
            var _this2 = this;

            var onLoad = this['load-data'] || function () {};
            var onError = this['load-error'] || function (error) {};
            var onComplete = this['load-complete'] || function () {};
            var complete = function complete() {
                var length = _this2.pixels.length * 8;
                if (_this2.length !== length) {
                    _this2.compressionRatio = Math.ceil(length / _this2.length);
                }
                onComplete();
                console.log('Loaded image: ' + _this2.filepath + ' ' + _this2.width + ' ' + _this2.height + ' ' + _this2.colorBits);
            };
            var getImagePixels = function getImagePixels(pixels) {
                _this2.length += pixels.length;
                pixels.forEach(function (pixel) {
                    _this2.pixels.push(pixel);
                });
                return pixels;
            };
            var fd = _fs2.default.openSync(this.filepath, 'r');
            if (!fd) {
                onError('Unable to open file');
                return;
            }
            var header = new Buffer(2);
            _fs2.default.readSync(fd, header, 0, 2, 0);
            this.format = PBM_IMAGE_FORMATS[header.toString()];
            if (!this.format) {
                _fs2.default.close(fd, function () {
                    return onError('File is not a supported image format. Supported image formats:\n' + JSON.stringify(IMAGE_FORMATS, null, 2));
                });
            } else {
                if (this.format.indexOf('_ASCII') !== -1) {
                    (function () {
                        _fs2.default.close(fd);
                        var reader = new PBMAsciiReader(_this2.filepath, function (line, index) {
                            if (index === 0) return;
                            if (!line.startsWith('#')) {
                                if (!_this2.width && !_this2.height) {
                                    var resolution = line.split(/\s+/);
                                    _this2.width = parseInt(resolution[0]);
                                    _this2.height = parseInt(resolution[1]);
                                } else if (!_this2.colorBits) {
                                    _this2.colorBits = parseInt(line);
                                } else if (_this2['load-init']) {
                                    _this2['load-init']();
                                    delete _this2['load-init'];
                                    onLoad(getImagePixels(line.split(/\s+/).map(function (value) {
                                        return parseInt(value);
                                    })));
                                } else if (onLoad) {
                                    onLoad(getImagePixels(line.split(/\s+/).map(function (value) {
                                        return parseInt(value);
                                    })));
                                } else {
                                    reader.close('File is not a supported image format. Supported image formats:\n' + JSON.stringify(IMAGE_FORMATS, null, 2));
                                }
                            }
                        }, function (err) {
                            if (err) {
                                onError(err);
                            } else {
                                complete();
                            }
                        });
                    })();
                } else if (this.format.indexOf('_BIN') !== -1) {
                    var _reader = new _PBMFileReader2.default(fd, this.format);
                    Object.assign(this, _reader.getInfo());
                    this['load-init']();
                    this.length = _reader.readPixels(function (pixels) {
                        return onLoad(getImagePixels(pixels));
                    }, 64);
                    _fs2.default.close(fd, complete);
                } else {
                    fd.close(fd, function () {
                        return onError('Unexpected error');
                    });
                }
            }
        }
    }]);

    return ImageFile;
}();

exports.default = ImageFile;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _imageUtils = require('./image-utils');

var imageUtils = _interopRequireWildcard(_imageUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function defaultReducer(pixels) {
  return pixels;
}

function readBytes(fd, position) {
  var length = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];

  var buffer = new Buffer(length);
  var size = _fs2.default.readSync(fd, buffer, 0, length, position);
  if (length !== size) {
    buffer = Buffer.from(buffer, 0, size);
  }
  return buffer;
}

function getUTF8String(fd, offset, term) {
  var content = '';
  var buffer = new Buffer(1);
  if (offset) {
    readBytes(fd, offset);
  }

  var _loop = function _loop() {
    buffer = readBytes(fd);
    var val = buffer.toString();
    if (!term) {
      return {
        v: val
      };
    } else if (Array.isArray(term) && term.find(function (term) {
      return val === term;
    })) {
      return {
        v: content
      };
    } else if (val === term) {
      return {
        v: content
      };
    } else {
      content += val;
    }
  };

  while (buffer.length) {
    var _ret = _loop();

    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === "object") return _ret.v;
  }
}

function readPGMBinary(fd, collector, position, term) {
  collector = collector || function () {};
  var buffer = readBytes(fd, position);
  var length = 0;
  while (buffer.length) {
    length += 8;
    collector(buffer);
    buffer = readBytes(fd);
    if (term && term == buffer.toString()) {
      break;
    }
  }
  return length;
}

function readPGMCompressedRLE(fd, collector, position) {
  collector = collector || function () {};
  var pixelBuffer = readBytes(fd, position);
  var length = 0;
  while (pixelBuffer.length) {
    length += 8;
    collector(pixelBuffer);
    var countBuffer = new Buffer(4);
    for (var i = 0; i < 4; i++) {
      // read 4 bytes or a 32 bit unsigned integer
      countBuffer[i] = readBytes(fd)[0];
    }
    length += 32;
    collector(countBuffer);
    pixelBuffer = readBytes(fd);
  }
  return length;
}

function readPGMCompressedHME(fd, collector, position) {
  var index = 0;
  var codeBook = {};
  var value = void 0;
  var length = 0;
  readPGMBinary(fd, function (buffer) {
    if (index++ % 2 === 0) {
      value = buffer.readUInt8(0);
    } else {
      codeBook[buffer.readUInt8(0).toString(2)] = value;
    }
    length += 8;
  }, position, '\n');
  var encoded = '';
  readPGMBinary(fd, function (buffer) {
    var binary = buffer.readUInt8(0).toString(2);
    encoded += "00000000".substring(0, 8 - binary.length) + binary;
    length += 8;
  });
  value = null;
  var code = '';
  for (var i = 0; i < encoded.length; i++) {
    code += encoded.charAt(i);
    value = codeBook[code];
    if (value !== null) {
      collector(value);
      code = '';
      value = null;
    }
  }
  return length;
}

function readPGMCompressedLZW(fd, collector, position) {
  collector = collector || function () {};
  var buffer = readBytes(fd, position, 2);
  var prev = void 0;
  var index = 255;
  var dictionary = {};
  var length = 0;
  while (buffer.length) {
    length += 16;
    var bytes = buffer.readUInt16BE(0);
    var pixels = dictionary[bytes] ? dictionary[bytes].split(' ') : [bytes];
    pixels.forEach(function (pixel) {
      collector(parseInt(pixel));
    });
    if (prev !== undefined) {
      dictionary[++index] = prev + ' ' + pixels[0];
    }
    prev = pixels.join(' ');
    buffer = readBytes(fd, 2);
  }
  return length;
}

var PBMFileReader = function () {
  function PBMFileReader(fd, format) {
    _classCallCheck(this, PBMFileReader);

    this.fd = fd;
    this.format = format;
  }

  _createClass(PBMFileReader, [{
    key: 'getInfo',
    value: function getInfo() {
      var width = void 0,
          height = void 0,
          colorBits = void 0;
      var str = getUTF8String(this.fd, 2, [' ', '\n']);
      while (str && (!width || !height || !colorBits)) {
        if (str.indexOf('#') === 0) {
          str = getUTF8String(this.fd, null, '\n');
        } else if (!width) {
          width = parseInt(str);
          str = getUTF8String(this.fd, null, [' ', '\n']);
        } else if (!height) {
          height = parseInt(str);
          str = getUTF8String(this.fd, null, '\n');
        } else if (!colorBits) {
          colorBits = parseInt(str);
          if (!colorBits) {
            str = getUTF8String(this.fd, null, '\n');
          }
        }
      }
      return { width: width, height: height, colorBits: colorBits };
    }
  }, {
    key: 'readPixels',
    value: function readPixels(onRead, batchSize) {
      var processor = defaultReducer;
      var pixels = [];
      var length = 0;
      var collector = function collector(data) {
        if (data !== undefined) {
          if (Number.isInteger(data)) {
            pixels.push(data);
          } else if (data.length === 4) {
            pixels.push(data.readUInt32BE(0));
          } else {
            pixels.push(data.readUInt8(0));
          }
          if (pixels.length === batchSize) {
            onRead(processor(pixels));
            pixels = [];
          }
        }
      };
      if (this.format.indexOf('PGM_BIN_RLE') === 0) {
        processor = imageUtils.runLengthDecode;
        length = readPGMCompressedRLE(this.fd, collector);
      } else if (this.format.indexOf('PGM_BIN_HME') === 0) {
        length = readPGMCompressedHME(this.fd, collector);
      } else if (this.format.indexOf('PGM_BIN_LZW') === 0) {
        length = readPGMCompressedLZW(this.fd, collector);
      } else if (this.format.indexOf('PGM_BIN') === 0) {
        length = readPGMBinary(this.fd, collector);
      }
      if (pixels.length) {
        onRead(processor(pixels));
      }
      return length;
    }
  }]);

  return PBMFileReader;
}();

exports.default = PBMFileReader;
module.exports = exports['default'];
'use strict';var _typeof5=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports.RENDER_LAYERS=exports.RENDER_LAYER=exports.APPLY_OPTION=exports.APPLY_FILTER=exports.INIT_CONTEXT=undefined;exports.initContext=initContext;exports.applyFilter=applyFilter;exports.applyOption=applyOption;exports.renderLayer=renderLayer;exports.renderLayers=renderLayers;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}var INIT_CONTEXT=exports.INIT_CONTEXT='INIT_CANVAS';var APPLY_FILTER=exports.APPLY_FILTER='APPLY_FILTER';var APPLY_OPTION=exports.APPLY_OPTION='APPLY_OPTION';var RENDER_LAYER=exports.RENDER_LAYER='RENDER_LAYER';var RENDER_LAYERS=exports.RENDER_LAYERS='RENDER_LAYERS';function initContext(canvas,gl){return function(dispatch){return dispatch({type:INIT_CONTEXT,payload:Object.assign({},canvas,{context:canvasUtils.initContext(canvas,gl)})});};}function applyFilter(canvas,layer,filter){return function(dispatch){var chain=function chain(canvas,dispatch){};var layers=canvas.layers.map(function(_layer,index){if(layer===_layer){_layer=Object.assign({},layer,{filters:Object.assign({},layer.filters,_defineProperty({},filter.type,filter))});chain=function chain(canvas,dispatch){renderLayer(canvas,_layer,index)(dispatch);};}return _layer;});canvas=Object.assign({},canvas,{layers:layers});dispatch({type:APPLY_FILTER,payload:canvas});chain(canvas,dispatch);};}function applyOption(canvas,option){return function(dispatch){dispatch({type:APPLY_OPTION,payload:Object.assign({},canvas,{options:Object.assign({},canvas.options,_defineProperty({},option.type,option))})});};}function renderLayer(canvas,layer,index){return function(dispatch){canvasUtils.renderLayer(canvas.context,layer,index);dispatch({type:RENDER_LAYER,payload:canvas});};}function renderLayers(canvas){return function(dispatch){canvas.layers.forEach(function(layer,index){canvasUtils.renderLayer(canvas.context,layer,index);});dispatch({type:RENDER_LAYERS,payload:canvas});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.increment=increment;exports.decrement=decrement;exports.incrementIfOdd=incrementIfOdd;exports.incrementAsync=incrementAsync;var INCREMENT_COUNTER=exports.INCREMENT_COUNTER='INCREMENT_COUNTER';var DECREMENT_COUNTER=exports.DECREMENT_COUNTER='DECREMENT_COUNTER';function increment(){return {type:INCREMENT_COUNTER};}function decrement(){return {type:DECREMENT_COUNTER};}function incrementIfOdd(){return function(dispatch,getState){var _getState=getState();var counter=_getState.counter;if(counter%2===0){return;}dispatch(increment());};}function incrementAsync(){var delay=arguments.length<=0||arguments[0]===undefined?1000:arguments[0];return function(dispatch){setTimeout(function(){dispatch(increment());},delay);};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_IMAGE=exports.COMPRESS_IMAGE=exports.SELECT_CANVAS=exports.MOVE_CANVAS=exports.REMOVE_CANVAS=exports.ADD_CANVAS=undefined;exports.addCanvas=addCanvas;exports.removeCanvas=removeCanvas;exports.moveCanvas=moveCanvas;exports.selectCanvas=selectCanvas;exports.saveImage=saveImage;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var ADD_CANVAS=exports.ADD_CANVAS='ADD_CANVAS';var REMOVE_CANVAS=exports.REMOVE_CANVAS='REMOVE_CANVAS';var MOVE_CANVAS=exports.MOVE_CANVAS='MOVE_CANVAS';var SELECT_CANVAS=exports.SELECT_CANVAS='SELECT_CANVAS';var COMPRESS_IMAGE=exports.COMPRESS_IMAGE='COMPRESS_IMAGE';var SAVE_IMAGE=exports.SAVE_IMAGE='SAVE_IMAGE';function addCanvas(canvas){return function(dispatch){return dispatch({type:ADD_CANVAS,payload:canvas});};}function removeCanvas(canvas){return function(dispatch){return dispatch({type:REMOVE_CANVAS,payload:canvas});};}function moveCanvas(canvas){return function(dispatch){return dispatch({type:MOVE_CANVAS,payload:canvas});};}function selectCanvas(canvas){return function(dispatch){return dispatch({type:SELECT_CANVAS,payload:canvas});};}function saveImage(canvas,destination){return function(dispatch){dispatch({type:COMPRESS_IMAGE,payload:Object.assign({},canvas,{status:'compressing'})});canvasUtils.exportCanvasAsImage(canvas,destination);dispatch({type:SAVE_IMAGE,payload:Object.assign({},canvas,{status:'ready'})});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.canvasProps=undefined;var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactDom=require('react-dom');var _Canvas=require('./Canvas.css');var _Canvas2=_interopRequireDefault(_Canvas);var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _electron=require('electron');var _Card=require('material-ui/Card');var _CircularProgress=require('material-ui/CircularProgress');var _CircularProgress2=_interopRequireDefault(_CircularProgress);var _Paper=require('material-ui/Paper');var _Paper2=_interopRequireDefault(_Paper);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Canvas:{displayName:'Canvas'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Canvas.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Canvas.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles=Object.assign({},_Canvas2.default,{progress:{margin:'-15px 0 0 -15px'}});var Canvas=_wrapComponent('Canvas')(function(_Component){_inherits(Canvas,_Component);function Canvas(props,content){_classCallCheck(this,Canvas);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Canvas).call(this,props,content));_this.onLoadData=_this.onLoadData.bind(_this);_this.onLoadComplete=_this.onLoadComplete.bind(_this);_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);return _this;}_createClass(Canvas,[{key:'componentDidMount',value:function componentDidMount(){var _props=this.props;var initContext=_props.initContext;var canvas=_props.canvas;var gl=this.refs.canvas.getContext('webgl',{preserveDrawingBuffer:true});initContext(canvas,gl);_electron.ipcRenderer.on('load-data',this.onLoadData);_electron.ipcRenderer.on('load-complete',this.onLoadComplete);}},{key:'componentWillUnmount',value:function componentWillUnmount(){var canvas=this.props.canvas;canvasUtils.cleanUp(canvas.context);_electron.ipcRenderer.removeListener('load-data',this.onLoadData);_electron.ipcRenderer.removeListener('load-complete',this.onLoadComplete);}},{key:'onLoadData',value:function onLoadData(event,data){var canvas=this.props.canvas;if(canvas.id!==data.id){return;}var layer=canvas.layers.find(function(layer){return layer.filepath===data.filepath;});for(var i=0;i<data.pixels.length;i++){layer.pixels.push(data.pixels[i]);}}},{key:'onLoadComplete',value:function onLoadComplete(event,data){var renderLayers=this.props.renderLayers;var canvas=this.props.canvas;if(canvas.id!==data.id){return;}if(data.compressionRatio){var layers=canvas.layers.map(function(layer){if(layer.filepath===data.filepath){return Object.assign({},layer,{compressionRatio:data.compressionRatio});}return layer;});canvas=Object.assign({},canvas,{layers:layers});}renderLayers(canvas);}},{key:'onCanvasSelect',value:function onCanvasSelect(event){var _props2=this.props;var canvas=_props2.canvas;var onSelect=_props2.onSelect;if(!canvas.layers.length){return;}if(!canvas.selected){onSelect(canvas);return;}var rect=this.refs.canvas.getBoundingClientRect();var xPosition=event.clientX-rect.left;var yPosition=event.clientY-rect.top;_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_POS',{xPosition:xPosition,yPosition:yPosition});_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR',{targetColor:canvasUtils.getPixel(canvas,xPosition,yPosition)});}},{key:'render',value:function render(){var _props3=this.props;var canvas=_props3.canvas;var connectDragPreview=_props3.connectDragPreview;var connectDragSource=_props3.connectDragSource;var isDragging=_props3.isDragging;return connectDragPreview(_react3.default.createElement('div',{className:styles.canvasContainer,selected:canvas.selected,style:{left:canvas.left,top:canvas.top,width:canvas.width,height:canvas.height+50,opacity:isDragging?0:1,zIndex:canvas.selected?1000:1}},_react3.default.createElement(_Paper2.default,{zDepth:2},_react3.default.createElement(_Card.Card,null,_react3.default.createElement(_Card.CardHeader,{title:canvas.title,avatar:canvas.status==='ready'?null:_react3.default.createElement(_CircularProgress2.default,{style:styles.progress,size:0.5}),style:{cursor:"move",maxHeight:'50px'},ref:function ref(cardHeader){return connectDragSource((0,_reactDom.findDOMNode)(cardHeader));},titleStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),_react3.default.createElement(_Card.CardMedia,null,_react3.default.createElement('canvas',{id:'canvas',className:styles.canvas,onClick:this.onCanvasSelect,width:canvas.width,height:canvas.height,ref:'canvas'}))))));}}]);return Canvas;}(_react2.Component));exports.default=Canvas;var canvasProps=exports.canvasProps={top:10,left:10,width:640,height:320,title:"<No Content>",layers:[],status:'ready'};Canvas.defaultProps=canvasProps;'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;var _reactRouter=require('react-router');var _Counter=require('./Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Counter:{displayName:'Counter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Counter.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Counter.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Counter=_wrapComponent('Counter')((_temp=_class=function(_Component){_inherits(Counter,_Component);function Counter(){_classCallCheck(this,Counter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Counter).apply(this,arguments));}_createClass(Counter,[{key:'render',value:function render(){var _props=this.props;var increment=_props.increment;var incrementIfOdd=_props.incrementIfOdd;var incrementAsync=_props.incrementAsync;var decrement=_props.decrement;var counter=_props.counter;return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Counter2.default.backButton},_react3.default.createElement(_reactRouter.Link,{to:'/'},_react3.default.createElement('i',{className:'fa fa-arrow-left fa-3x'}))),_react3.default.createElement('div',{className:'counter '+_Counter2.default.counter},counter),_react3.default.createElement('div',{className:_Counter2.default.btnGroup},_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:increment},_react3.default.createElement('i',{className:'fa fa-plus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:decrement},_react3.default.createElement('i',{className:'fa fa-minus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:incrementIfOdd},'odd'),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:function onClick(){return incrementAsync();}},'async')));}}]);return Counter;}(_react2.Component),_class.propTypes={increment:_react2.PropTypes.func.isRequired,incrementIfOdd:_react2.PropTypes.func.isRequired,incrementAsync:_react2.PropTypes.func.isRequired,decrement:_react2.PropTypes.func.isRequired,counter:_react2.PropTypes.number.isRequired},_temp));exports.default=Counter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Sidebar=require('../components/Sidebar');var _Sidebar2=_interopRequireDefault(_Sidebar);var _Workspace=require('../containers/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Editor:{displayName:'Editor'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Editor.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Editor.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Editor=_wrapComponent('Editor')(function(_Component){_inherits(Editor,_Component);function Editor(){_classCallCheck(this,Editor);return _possibleConstructorReturn(this,Object.getPrototypeOf(Editor).apply(this,arguments));}_createClass(Editor,[{key:'render',value:function render(){var canvases=this.props.canvases;var canvas=canvases.find(function(canvas){return canvas.selected;});var sidebarOpen=canvas!==undefined;return _react3.default.createElement('div',null,_react3.default.createElement(_Sidebar2.default,{canvas:canvas,open:sidebarOpen}),_react3.default.createElement(_Workspace2.default,{sidebarOpen:sidebarOpen}));}}]);return Editor;}(_react2.Component));exports.default=Editor;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _toggle=require('material-ui/toggle');var _toggle2=_interopRequireDefault(_toggle);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var BitPlanes=function(_Filter){_inherits(BitPlanes,_Filter);function BitPlanes(props,content){_classCallCheck(this,BitPlanes);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BitPlanes).call(this,props,content));var planes={};for(var i=1;i<=8;i++){planes[i]=true;}_this.defaultState={type:'BIT_PLANES',disabled:true,filter:Filters.bitPlanes,planes:planes};_this.state=Object.assign({},_this.defaultState);_this.onToggleChange=_this.onToggleChange.bind(_this);return _this;}_createClass(BitPlanes,[{key:'onToggleChange',value:function onToggleChange(event){var target=event.target.id.split('_')[1];var bit=Object.keys(this.state.planes).find(function(bit){return bit==target;});var planes=this.state.planes;if(bit){planes=Object.assign({},this.state.planes,_defineProperty({},bit,!this.state.planes[bit]));}var options={planes:planes};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var _this2=this;var controls=Object.keys(this.state.planes).map(function(bit){return _react2.default.createElement(_List.ListItem,{key:"plane_"+bit,primaryText:"Plane "+bit,rightToggle:_react2.default.createElement(_toggle2.default,{id:"plane_"+bit,toggled:_this2.state.planes[bit],onToggle:_this2.onToggleChange,disabled:_this2.state.disabled})});});return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Bit Plane Slicing'});}}]);return BitPlanes;}(_Filter3.default);exports.default=BitPlanes;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var BoundaryFill=function(_ColorFill){_inherits(BoundaryFill,_ColorFill);function BoundaryFill(props,content){_classCallCheck(this,BoundaryFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BoundaryFill).call(this,props,content));_this.defaultState={type:'BOUNDARY_FILL',filter:Filters.boundaryFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(BoundaryFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Boundary Fill'});}}]);return BoundaryFill;}(_ColorFill3.default);exports.default=BoundaryFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ColorFill=function(_Filter){_inherits(ColorFill,_Filter);function ColorFill(props,content){_classCallCheck(this,ColorFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ColorFill).call(this,props,content));_this.onXpositionChange=_this.onXpositionChange.bind(_this);_this.onYpositionChange=_this.onYpositionChange.bind(_this);_this.onTargetColorChange=_this.onTargetColorChange.bind(_this);_this.onColorSelect=_this.onColorSelect.bind(_this);_this.onColorRecieve=_this.onColorRecieve.bind(_this);_this.onPixelSelect=_this.onPixelSelect.bind(_this);_this.onPixelRecieve=_this.onPixelRecieve.bind(_this);return _this;}_createClass(ColorFill,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){_get(Object.getPrototypeOf(ColorFill.prototype),'componentWillReceiveProps',this).call(this,nextProps);this.removeListeners(nextProps.layer.filters[this.defaultState.type]);}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState){if(!prevState.disabled&&this.state.disabled){this.removeListeners();}}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.removeListeners();}},{key:'onXpositionChange',value:function onXpositionChange(event,xPosition){var layer=this.props.layer;var options={xPosition:xPosition};xPosition=parseInt(xPosition);if(xPosition<0){xPosition=0;}else if(xPosition>=layer.width){xPosition=layer.width-1;}if(Number.isInteger(xPosition)){options=Object.assign({},this.state,{xPosition:xPosition});this.applyFilter(options);}this.setState(options);}},{key:'onYpositionChange',value:function onYpositionChange(event,yPosition){var layer=this.props.layer;var options={yPosition:yPosition};yPosition=parseInt(yPosition);if(yPosition<0){yPosition=0;}else if(yPosition>=layer.height){yPosition=layer.height-1;}if(Number.isInteger(yPosition)){options=Object.assign({},this.state,{yPosition:yPosition});this.applyFilter(options);}this.setState(options);}},{key:'onTargetColorChange',value:function onTargetColorChange(event,targetColor){var layer=this.props.layer;var options={targetColor:targetColor};targetColor=parseInt(targetColor);if(targetColor<0){targetColor=0;options={targetColor:targetColor};}else if(targetColor>=layer.colorBits){targetColor=layer.colorBits;options={targetColor:targetColor};}if(Number.isInteger(targetColor)){options=Object.assign({},this.state,{targetColor:targetColor});this.applyFilter(options);}this.setState(options);}},{key:'onColorSelect',value:function onColorSelect(){var canvas=this.props.canvas;if(this.state.listeners.colorPick){this.removeListener('colorPick');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR','colorPick',this.onColorRecieve);}}},{key:'onColorRecieve',value:function onColorRecieve(topic,options){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var targetColor={targetColor:options.targetColor};options=Object.assign({},this.state,targetColor);this.setState(targetColor);this.applyFilter(options);}},{key:'onPixelSelect',value:function onPixelSelect(){var canvas=this.props.canvas;if(this.state.listeners.pixelPos){this.removeListener('pixelPos');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_POS','pixelPos',this.onPixelRecieve);}}},{key:'onPixelRecieve',value:function onPixelRecieve(topic,position){this.applyFilter(Object.assign({},this.state,position));}},{key:'addListener',value:function addListener(topic,listener,callback){var _this2=this;callback=callback||function(){};var token=_pubsubJs2.default.subscribe(topic,function(topic,content){_this2.removeListener(listener);callback(topic,content);});var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,token))};this.setState(options);}},{key:'removeListener',value:function removeListener(listener){if(!this.state.listeners[listener]){return;}_pubsubJs2.default.unsubscribe(this.state.listeners[listener]);var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,null))};this.setState(options);}},{key:'removeListeners',value:function removeListeners(listeners){var _this3=this;var options={listeners:Object.assign({},this.state.listeners)};var change=false;Object.keys(this.state.listeners).forEach(function(listener){if(!listeners||!listeners[listener]){_pubsubJs2.default.unsubscribe(_this3.state.listeners[listener]);options.listeners[listener]=null;change=true;}});if(change){this.setState(options);}}}]);return ColorFill;}(_Filter3.default);exports.default=ColorFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var DistanceFill=function(_ColorFill){_inherits(DistanceFill,_ColorFill);function DistanceFill(props,content){_classCallCheck(this,DistanceFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(DistanceFill).call(this,props,content));_this.defaultState={type:'DISTANCE_FILL',filter:Filters.distanceFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,scaleFactor:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onScaleFactorChange=_this.onScaleFactorChange.bind(_this);return _this;}_createClass(DistanceFill,[{key:'onScaleFactorChange',value:function onScaleFactorChange(event,scaleFactor){var options={scaleFactor:scaleFactor};scaleFactor=parseInt(scaleFactor);if(scaleFactor<0){scaleFactor=1;options={scaleFactor:scaleFactor};}if(Number.isInteger(scaleFactor)){this.applyFilter(Object.assign({},this.state,{scaleFactor:scaleFactor}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Initial Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'scale',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.scaleFactor,onChange:this.onScaleFactorChange,floatingLabelText:'Scale Factor',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Distance Fill'});}}]);return DistanceFill;}(_ColorFill3.default);exports.default=DistanceFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Erosion=function(_ColorFill){_inherits(Erosion,_ColorFill);function Erosion(props,content){_classCallCheck(this,Erosion);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Erosion).call(this,props,content));_this.defaultState={type:'EROSION',disabled:true,filter:Filters.erosion,xPosition:'',yPosition:'',targetColor:0,iterations:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onIterationsChange=_this.onIterationsChange.bind(_this);return _this;}_createClass(Erosion,[{key:'onIterationsChange',value:function onIterationsChange(event,iterations){var layer=this.props.layer;var options={iterations:iterations};iterations=parseInt(iterations);if(iterations<0){iterations=0;options={iterations:iterations};}if(Number.isInteger(iterations)){this.applyFilter(Object.assign({},this.state,{iterations:iterations}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'iterations',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.iterations,onChange:this.onIterationsChange,floatingLabelText:'Iterations',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Erosion'});}}]);return Erosion;}(_ColorFill3.default);exports.default=Erosion;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Filter=function(_Component){_inherits(Filter,_Component);function Filter(props,content){_classCallCheck(this,Filter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Filter).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyFilter=_lodash2.default.debounce(_this.applyFilter,500);return _this;}_createClass(Filter,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.layer.filters[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var applyFilter=_props.applyFilter;applyFilter(canvas,layer,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyFilter',value:function applyFilter(options){var _props2=this.props;var canvas=_props2.canvas;var layer=_props2.layer;var applyFilter=_props2.applyFilter;var index=_props2.index;options=Object.assign({},options,{index:index});applyFilter(canvas,layer,options);}}]);return Filter;}(_react.Component);exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _SpatialResolution=require('./SpatialResolution');var _SpatialResolution2=_interopRequireDefault(_SpatialResolution);var _GrayLevel=require('./GrayLevel');var _GrayLevel2=_interopRequireDefault(_GrayLevel);var _GrayScale=require('./GrayScale');var _GrayScale2=_interopRequireDefault(_GrayScale);var _Histogram=require('./Histogram');var _Histogram2=_interopRequireDefault(_Histogram);var _NoiseReduce=require('./NoiseReduce');var _NoiseReduce2=_interopRequireDefault(_NoiseReduce);var _Sharpen=require('./Sharpen');var _Sharpen2=_interopRequireDefault(_Sharpen);var _BitPlanes=require('./BitPlanes');var _BitPlanes2=_interopRequireDefault(_BitPlanes);var _FloodFill=require('./FloodFill');var _FloodFill2=_interopRequireDefault(_FloodFill);var _BoundaryFill=require('./BoundaryFill');var _BoundaryFill2=_interopRequireDefault(_BoundaryFill);var _Erosion=require('./Erosion');var _Erosion2=_interopRequireDefault(_Erosion);var _DistanceFill=require('./DistanceFill');var _DistanceFill2=_interopRequireDefault(_DistanceFill);var _Skeletonization=require('./Skeletonization');var _Skeletonization2=_interopRequireDefault(_Skeletonization);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Filter:{displayName:'Filter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Filter=_wrapComponent('Filter')(function(_Component){_inherits(Filter,_Component);function Filter(){_classCallCheck(this,Filter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Filter).apply(this,arguments));}_createClass(Filter,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyFilter=_props.applyFilter;var layer=canvas.layers[0];var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Filters'),_react3.default.createElement(_SpatialResolution2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayScale2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayLevel2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Histogram2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_NoiseReduce2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Sharpen2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BitPlanes2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Fills'),_react3.default.createElement(_FloodFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BoundaryFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Erosion2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_DistanceFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Morphs'),_react3.default.createElement(_Skeletonization2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}));}}]);return Filter;}(_react2.Component));exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var FloodFill=function(_ColorFill){_inherits(FloodFill,_ColorFill);function FloodFill(props,content){_classCallCheck(this,FloodFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(FloodFill).call(this,props,content));_this.defaultState={type:'FLOOD_FILL',filter:Filters.floodfill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(FloodFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Target Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Flood Fill'});}}]);return FloodFill;}(_ColorFill3.default);exports.default=FloodFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165}};var GrayLevel=function(_Filter){_inherits(GrayLevel,_Filter);function GrayLevel(props,content){_classCallCheck(this,GrayLevel);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayLevel).call(this,props,content));_this.defaultState={type:'GRAY_LEVEL',disabled:true,level:8,filter:Filters.grayLevel};_this.state=Object.assign({},_this.defaultState);_this.onLevelChange=_this.onLevelChange.bind(_this);return _this;}_createClass(GrayLevel,[{key:'onLevelChange',value:function onLevelChange(event,level){var options={level:level};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:this.state.level+'-bit',disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onLevelChange,min:1,step:1,max:8,value:this.state.level,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Level'});}}]);return GrayLevel;}(_Filter3.default);exports.default=GrayLevel;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var GrayScale=function(_Filter){_inherits(GrayScale,_Filter);function GrayScale(props,content){_classCallCheck(this,GrayScale);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayScale).call(this,props,content));_this.defaultState={type:'GRAY_SCALE',disabled:true,filter:Filters.grayScale,transformMethod:1,constant:1.5,gamma:1};_this.state=Object.assign({},_this.defaultState);_this.onTransformMethodChange=_this.onTransformMethodChange.bind(_this);_this.onConstantChange=_this.onConstantChange.bind(_this);_this.onGammaChange=_this.onGammaChange.bind(_this);return _this;}_createClass(GrayScale,[{key:'onTransformMethodChange',value:function onTransformMethodChange(event,index,value){var options={transformMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onConstantChange',value:function onConstantChange(event,value){var options={constant:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onGammaChange',value:function onGammaChange(event,value){var options={gamma:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.transformMethod,onChange:this.onTransformMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Log'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Power'}))}),_react2.default.createElement(_List.ListItem,{key:'constantField',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.constant,onChange:this.onConstantChange,floatingLabelText:'Constant "c"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'gammaField',style:this.state.transformMethod!==2?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.gamma,onChange:this.onGammaChange,floatingLabelText:'Gamma "γ"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Scale'});}}]);return GrayScale;}(_Filter3.default);exports.default=GrayScale;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Histogram=function(_MaskFilter){_inherits(Histogram,_MaskFilter);function Histogram(props,content){_classCallCheck(this,Histogram);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Histogram).call(this,props,content));_this.defaultState={type:'HISTOGRAM',disabled:true,filter:Filters.histogram,global:true,dimension:5,canvasId:null};_this.state=Object.assign({},_this.defaultState);_this.onLocalityChange=_this.onLocalityChange.bind(_this);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMatchingChange=_this.onMatchingChange.bind(_this);return _this;}_createClass(Histogram,[{key:'onLocalityChange',value:function onLocalityChange(event,index,global){var options={global:global};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMatchingChange',value:function onMatchingChange(event,index,canvasId){var canvases=this.props.canvases;var options={canvasId:canvasId};this.applyFilter(Object.assign({},this.state,Object.assign({},options,{match:canvases.find(function(canvas){return canvas.id===canvasId;})})));this.setState(options);}},{key:'onDimensionChange',value:function onDimensionChange(event,dimension){var layer=this.props.layer;var global=false;if(dimension>=layer.colorBits){global=true;dimension=this.state.dimension;}var options={dimension:dimension,global:global};_get(Object.getPrototypeOf(Histogram.prototype),'onDimensionChange',this).call(this,event,options);}},{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var canvasMenuItems=[];canvases.forEach(function(_canvas){if(canvas.id!==_canvas.id){canvasMenuItems=[].concat(_toConsumableArray(canvasMenuItems),[_react2.default.createElement(_MenuItem2.default,{key:_canvas.id,value:_canvas.id,primaryText:_canvas.title})]);}});var controls=[_react2.default.createElement(_List.ListItem,{key:'equalization',disabled:true,secondaryText:'Equalization',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.global,onChange:this.onLocalityChange},_react2.default.createElement(_MenuItem2.default,{value:true,primaryText:'Global'}),_react2.default.createElement(_MenuItem2.default,{value:false,primaryText:'Local'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',style:this.state.global?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'matching',disabled:true,style:this.state.global?null:{display:'none'},secondaryText:'Matching',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.canvasId,onChange:this.onMatchingChange},_react2.default.createElement(_MenuItem2.default,{value:null,primaryText:'None'}),canvasMenuItems)})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Histogram'});}}]);return Histogram;}(_MaskFilter3.default);exports.default=Histogram;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.spatialResolution=spatialResolution;exports.grayLevel=grayLevel;exports.grayScale=grayScale;exports.histogram=histogram;exports.noiseReduce=noiseReduce;exports.sharpen=sharpen;exports.bitPlanes=bitPlanes;exports.floodfill=floodfill;exports.boundaryFill=boundaryFill;exports.erosion=erosion;exports.distanceFill=distanceFill;exports.skeletonization=skeletonization;var _canvasUtils=require('../../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function subsample(layer,ratio){var width=layer.width*ratio>>0;var height=layer.height*ratio>>0;var averagePixelCountW=layer.width/width>>0;var averagePixelCountH=layer.height/height>>0;var totalAveragePixels=averagePixelCountW*averagePixelCountH;var pixels=[];var colOffset=0;for(var nextRow=0;nextRow<layer.width;nextRow+=averagePixelCountW){colOffset=nextRow*layer.width;for(var nextCol=colOffset;nextCol<colOffset+layer.width;nextCol+=averagePixelCountW){var sum=0;var subIndex=0;for(var nextSubCol=nextCol;nextSubCol<nextCol+averagePixelCountH;nextSubCol++){for(var i=nextSubCol;i<nextSubCol+averagePixelCountW;i++){sum+=layer.pixels[i];if(subIndex+1===totalAveragePixels){pixels.push(Math.round(sum/totalAveragePixels));}subIndex++;}}}}return Object.assign({},layer,{width:width,height:height,pixels:pixels});}function getNeighborColors(layer,index,total,dimension,callback){var half=(dimension-1)/2;var pixels=[];var rowIndex=index/layer.width>>0;callback=callback||function(pixel){};for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;var pixel=layer.pixels[x];if(row===rowTarget&&0<=x&&x<total&&x!=index){pixels.push(pixel);}callback(pixel);}}return pixels;}function getNeighborPixels(layer,index,total,dimension){var half=(dimension-1)/2;var pixelsMap=[];var rowIndex=index/layer.width>>0;for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;if(row===rowTarget&&0<=x&&x<total&&x!=index){pixelsMap.push({pixel:x,color:layer.pixels[x]});}}}return pixelsMap;}function getNeighborhoodColors(layer,index,total,dimension){var neighborhood=[];getNeighborColors(layer,index,layer.pixels.length,3,function(pixel){neighborhood.push(pixel);});return neighborhood;}function padRows(pixels,rows,cols){for(var i=0;i<rows;i++){for(var j=0;j<cols;j++){pixels.push(0);}}}function padData(layer,maskDimension){if(maskDimension<3){return layer.pixels;}var pixels=[];var paddedRows=(maskDimension-1)/2;var paddedCols=(maskDimension-1)/2;var width=layer.width+maskDimension-1;var height=layer.height+maskDimension-1;pixels=[];padRows(pixels,paddedRows,width);for(var y=0;y<layer.height;y++){padRows(pixels,1,paddedCols);var colOffset=y*layer.width;for(var x=colOffset;x<colOffset+layer.width;x++){pixels.push(layer.pixels[x]);}padRows(pixels,1,paddedCols);}padRows(pixels,paddedRows,width);return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function blur(pixel,neighbors,maskDimension){var weight=1/(maskDimension*maskDimension);return neighbors.reduce(function(prev,value){return prev+weight*value;},weight*pixel)>>0;}function min(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[0];}function median(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[(sorted.length-1)/2];}function max(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[sorted.length-1];}function midpoint(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var midpoint=(sorted[0]+sorted[sorted.length-1])/2;return midpoint>>0;}function arithmeticMean(pixel,neighbors,maskDimension){var total=neighbors.reduce(function(prev,value){return prev+value;},pixel);return total/(neighbors.length+1)>>0;}function geometricMean(pixel,neighbors,maskDimension){var product=neighbors.reduce(function(prev,value){return prev*value;},pixel);return Math.pow(product,1/(maskDimension*maskDimension))>>0;}function harmonicMean(pixel,neighbors,maskDimension){var mean=maskDimension*maskDimension/neighbors.reduce(function(prev,value){return prev+1/value;},1/pixel);return mean>>0;}function contraharmonicMean(pixel,neighbors,maskDimension,order){var orderOffset=order+1;var numerator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,orderOffset);},Math.pow(pixel,orderOffset));var denominator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,order);},Math.pow(pixel,order));var mean=numerator/denominator;return mean>>0;}function alphaTrimmedMean(pixel,neighbors,maskDimension,constantD){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var A=Math.floor(constantD/2);var total=sorted.slice(A,sorted.length-A).reduce(function(prev,value){return prev+value;});return total/(maskDimension*maskDimension-2*A)>>0;}function laplace(pixel,neighbors,maskDimension){var midBit=maskDimension*maskDimension-1;var filtered=neighbors.reduce(function(prev,value){return prev-value;},midBit*pixel);filtered=pixel+filtered-Math.min(0,filtered);filtered=255*filtered/Math.max(255,filtered);return filtered>>0;}function highboost(pixel,neighbors,maskDimension,maskFactor){var mask=Math.max(0,pixel-blur(pixel,neighbors,maskDimension));return Math.min(pixel+maskFactor*mask,255);}function getHistogram(pixels,colorBits,total,target){var frequency={};pixels.forEach(function(pixel){frequency[pixel]=(frequency[pixel]||0)+1;});var prev=0;var histogram={};for(var pixel in frequency){prev+=frequency[pixel]/total*colorBits;histogram[pixel]=Math.round(prev);if(pixel==target)return histogram;}return histogram;}function getHistogramValue(layer,index,total,subtotal,dimension){var target=layer.pixels[index];var pixels=getNeighborColors(layer,index,total,dimension);pixels.push(layer.pixels[index]);var histogram=getHistogram(pixels,layer.colorBits,subtotal,target);return histogram[target];}function replication(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){pixels[x]=layer.pixels[pixelOffset+(colIndex++*options.ratio>>0)];}step+=options.ratio;}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bilinear(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){if(colIndex%scaleFactor===0){pixels[x]=layer.pixels[pixelOffset+(colIndex*options.ratio>>0)];}else {pixels[x]=null;}colIndex++;}step+=options.ratio;}layer=Object.assign({},layer,{pixels:pixels,width:width,height:height});for(var i=0;i<pixels.length;i++){if(pixels[i]==null){(function(){var neighbors=getNeighborColors(layer,i,pixels.length,3);var sum=0;var count=0;neighbors.forEach(function(pixel){if(pixel!=null){count++;sum+=pixel;}});pixels[i]=sum/count;})();}}return layer;}function spatialResolution(layer,context,options){layer=subsample(layer,options.ratio);if(options.zoomMethod===1){layer=replication(layer,options);}else if(options.zoomMethod===2){layer=bilinear(layer,options);}return layer;}function grayLevel(layer,context,options){var colorsBits=Math.pow(2,options.level)-1;var ratio=Math.round(255/colorsBits);var pixels=layer.pixels.map(function(pixel){return Math.round(pixel/layer.colorBits*colorsBits)*ratio;});return Object.assign({},layer,{pixels:pixels});}function grayScale(layer,context,options){var pixels=layer.pixels;var c=options.constant;var gamma=options.gamma;if(options.transformMethod===1){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.log(1+r);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}else if(options.transformMethod===2){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.pow(r,gamma);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}return Object.assign({},layer,{pixels:pixels});}function histogram(layer,context,options){var MN=layer.width*layer.height;var pixels=void 0;if(!options.global){(function(){var mn=options.dimension*options.dimension;pixels=layer.pixels.map(function(pixel,index){return getHistogramValue(layer,index,MN,mn,options.dimension);});})();}else {var pixel;(function(){var map=getHistogram(layer.pixels,layer.colorBits,MN);if(options.match){var canvas=options.match;MN=canvas.width*canvas.height;var targetPixels=canvasUtils.getPixels(canvas);var targetMap=getHistogram(targetPixels,256,MN);var targetValues=_lodash2.default.values(targetMap);var matchingMap={};for(pixel in map){var value=map[pixel];var beforePixel=void 0,afterPixel=void 0,targetPixel=void 0;for(targetPixel in targetMap){var targetValue=targetMap[targetPixel];if(targetValue<value){beforePixel=targetPixel;}if(targetValue==value){break;}if(targetValue>value){targetPixel=null;break;}}if(!targetPixel){if(!afterPixel||value-targetMap[beforePixel]<targetMap[afterPixel]-value){targetPixel=beforePixel;}else {targetPixel=afterPixel;}}matchingMap[pixel]=targetPixel;}map=matchingMap;}pixels=layer.pixels.map(function(pixel){return map[pixel];});})();}return Object.assign({},layer,{pixels:pixels});}function noiseReduce(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=blur(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=min(layer.pixels[x],neighbors,options.dimension);}else if(options.method==3){pixel=median(layer.pixels[x],neighbors,options.dimension);}else if(options.method==4){pixel=max(layer.pixels[x],neighbors,options.dimension);}else if(options.method==5){pixel=midpoint(layer.pixels[x],neighbors,options.dimension);}else if(options.method==6){pixel=arithmeticMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==7){pixel=geometricMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==8){pixel=harmonicMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==9){pixel=contraharmonicMean(layer.pixels[x],neighbors,options.dimension,options.order);}else if(options.method=10){pixel=alphaTrimmedMean(layer.pixels[x],neighbors,options.dimension,options.constantD);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function sharpen(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=laplace(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=highboost(layer.pixels[x],neighbors,options.dimension,options.maskFactor);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bitPlanes(layer,context,options){var disabledBits=Object.keys(options.planes).filter(function(bit){return !options.planes[bit];});var binaryReducer=disabledBits.map(function(bit){return {value:bit,binary:(Math.pow(2,bit-1)>>>0).toString(2)};});var pixels=layer.pixels.map(function(pixel){var binary=(pixel>>>0).toString(2);var result=binaryReducer.reduce(function(prev,bit){return prev-(prev.toString().charAt(8-bit.value)==1?bit.binary:'0');},binary);return parseInt(result,2);});return Object.assign({},layer,{pixels:pixels});}function floodfill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var pixels=[].concat(_toConsumableArray(layer.pixels));var initialColor=pixels[pixel];var queue=[pixel];var visited={};layer=Object.assign({},layer,{pixels:pixels});pixels[pixel]=options.targetColor;while(queue.length){var head=queue[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}visited[queue.shift()]=true;}return layer;}function isBoundaryPixel(layer,element,total,initialColor){if(element.color===initialColor){var neighbors=getNeighborColors(layer,element.pixel,total,3);if(neighbors.find(function(neighbor){return neighbor!==initialColor;})!==undefined){return true;}}return false;}function boundaryFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){pixels[neighbor.pixel]=options.targetColor;}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return Object.assign({},layer,{pixels:pixels});}function getBoundaryPixels(layer,options){var queue=[];if(options.xPosition===''||options.yPosition===''){return queue;}var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){queue.push(neighbor.pixel);}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return queue;}function erosion(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var iterations=options.iterations;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(iterations){queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}pixels[head]=options.targetColor;queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}iterations--;}return layer;}function distanceFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var distance=options.targetColor;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});queue.forEach(function(pixel){pixels[pixel]=distance;});while(queue.length){distance=Math.min(layer.colorBits,distance+options.scaleFactor);queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=distance;queue.push(neighbor.pixel);}});}queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}}return layer;} /*
* p9 (0) p2 (1) p3 (2)
* p8 (3) p1 (4) p4 (5)
* p7 (6) p6 (7) p5 (8)
*/function getTransitionCount(neighborhood,initialColor){var count=0; // p2 -> p3
if(neighborhood[1]!==initialColor&&neighborhood[2]===initialColor){count++;} // p3 -> p4
if(neighborhood[2]!==initialColor&&neighborhood[5]===initialColor){count++;} // p4 -> p5
if(neighborhood[5]!==initialColor&&neighborhood[8]===initialColor){count++;} // p5 -> p6
if(neighborhood[8]!==initialColor&&neighborhood[7]===initialColor){count++;} // p6 -> p7
if(neighborhood[7]!==initialColor&&neighborhood[6]===initialColor){count++;} // p7 -> p8
if(neighborhood[6]!==initialColor&&neighborhood[3]===initialColor){count++;} // p8 -> p9
if(neighborhood[3]!==initialColor&&neighborhood[0]===initialColor){count++;} // p9 -> p2
if(neighborhood[0]!==initialColor&&neighborhood[1]===initialColor){count++;}return count;}function zhangSuen(layer,options){var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel]; // for binary images this is usually black
var pixels=[].concat(_toConsumableArray(layer.pixels));var changed=void 0;layer=Object.assign({},layer,{pixels:pixels});var _loop=function _loop(){changed=false;var updated=[];pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P4 or P6 or (P2 and P8)
&&(neighborhood[5]===options.targetColor||neighborhood[7]===options.targetColor||neighborhood[1]===options.targetColor&&neighborhood[3]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P2 or P8 or (P4 and P6)
&&(neighborhood[1]===options.targetColor||neighborhood[3]===options.targetColor||neighborhood[5]===options.targetColor&&neighborhood[7]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});};do {_loop();}while(changed);return layer;}function zhangSuenBFS(layer,options){var queue=getBoundaryPixels(layer,options);var discarded={};var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(queue.length){queue.push(null);var head=queue[0];while(head!==null){if(!discarded[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(neighbor.color===initialColor){ // for each foreground neighbor of head
var neighborhood=getNeighborhoodColors(layer,neighbor.pixel,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1){ // can be removed
pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}else {pixels[neighbor.pixel]=initialColor;discarded[neighbor.pixel]=true;}}});}queue.shift();head=queue[0];}queue.shift();}return layer;}function skeletonization(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}if(options.method===1){return zhangSuen(layer,options);}else if(options.method===2){return zhangSuenBFS(layer,options);}return layer;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&_typeof5(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof5(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof5(obj);};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MaskFilter=function(_Filter){_inherits(MaskFilter,_Filter);function MaskFilter(props,contents){_classCallCheck(this,MaskFilter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(MaskFilter).call(this,props,contents));_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.applyDimensionChange=_lodash2.default.debounce(_this.applyDimensionChange,500);return _this;}_createClass(MaskFilter,[{key:'onDimensionChange',value:function onDimensionChange(event,options){var dimension=(typeof options==='undefined'?'undefined':_typeof(options))==='object'?options.dimension:options;options=Object.assign({},options,{dimension:dimension});this.applyDimensionChange(dimension,options);this.setState(options);}},{key:'applyDimensionChange',value:function applyDimensionChange(dimension,options){dimension=parseInt(dimension);if(dimension<3){dimension=3;}else if(dimension%2===0){dimension=dimension+1;}if(dimension&&Number.isInteger(dimension)){options=Object.assign({},options,{dimension:dimension});this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}}]);return MaskFilter;}(_Filter3.default);exports.default=MaskFilter;;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var NoiseReduce=function(_MaskFilter){_inherits(NoiseReduce,_MaskFilter);function NoiseReduce(props,content){_classCallCheck(this,NoiseReduce);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(NoiseReduce).call(this,props,content));_this.defaultState={type:'NOISE_REDUCE',disabled:true,filter:Filters.noiseReduce,method:1,dimension:3,order:1,constantD:1};_this.state=Object.assign({},_this.defaultState);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onOrderChange=_this.onOrderChange.bind(_this);_this.onConstantDChange=_this.onConstantDChange.bind(_this);return _this;}_createClass(NoiseReduce,[{key:'onDimensionChange',value:function onDimensionChange(event,dimension){if(dimension&&dimension>-1){var constantD=this.clampConstantD(this.state.constantD,dimension);this.applyConstantDChange(constantD,this.state);}_get(Object.getPrototypeOf(NoiseReduce.prototype),'onDimensionChange',this).call(this,event,dimension);}},{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onOrderChange',value:function onOrderChange(event,order){var options={order:order};order=parseFloat(order);if(order&&!Number.isNaN(order)){this.applyFilter(Object.assign({},this.state,{order:order}));}this.setState(options);}},{key:'onConstantDChange',value:function onConstantDChange(event,constantD){var options={constantD:constantD};this.applyConstantDChange(constantD,options);this.setState(options);}},{key:'applyConstantDChange',value:function applyConstantDChange(constantD,options){constantD=parseInt(constantD);constantD=this.clampConstantD(constantD,this.state.dimension);if(order&&Number.isInteger(constantD)){options={constantD:constantD};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}},{key:'clampConstantD',value:function clampConstantD(constantD,dimension){if(constantD<0){constantD=0;}else if(constantD>dimension*dimension-1){constantD=dimension*dimension-1;}return constantD;}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Blur'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Min'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Median'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'Max'}),_react2.default.createElement(_MenuItem2.default,{value:5,primaryText:'Midpoint'}),_react2.default.createElement(_MenuItem2.default,{value:6,primaryText:'Arithmetic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:7,primaryText:'Geometric Mean'}),_react2.default.createElement(_MenuItem2.default,{value:8,primaryText:'Harmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:9,primaryText:'Contraharmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:10,primaryText:'Alpha-trimmed Mean'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'mask_size',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'order',type:'number',disabled:true,style:this.state.method===9?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'order',style:styles.input,value:this.state.order,onChange:this.onOrderChange,floatingLabelText:'Order "Q"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'constantD',type:'number',disabled:true,style:this.state.method===10?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'constant_d',style:styles.input,value:this.state.constantD,onChange:this.onConstantDChange,floatingLabelText:'Alpha "a"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Noise Reduce'});}}]);return NoiseReduce;}(_MaskFilter3.default);exports.default=NoiseReduce;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Sharpen=function(_MaskFilter){_inherits(Sharpen,_MaskFilter);function Sharpen(props,content){_classCallCheck(this,Sharpen);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Sharpen).call(this,props,content));_this.defaultState={type:'SHARPEN',disabled:true,filter:Filters.sharpen,method:1,dimension:3,maskFactor:8};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onMaskFactorChange=_this.onMaskFactorChange.bind(_this);return _this;}_createClass(Sharpen,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMaskFactorChange',value:function onMaskFactorChange(event,maskFactor){var options={maskFactor:maskFactor};maskFactor=parseInt(maskFactor);if(maskFactor<1){maskFactor=1;options={maskFactor:maskFactor};}if(maskFactor&&Number.isInteger(maskFactor)){this.applyFilter(Object.assign({},this.state,options));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Laplacian'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Highboost'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'maskFactor',type:'number',style:this.state.method===1?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'factor',style:styles.input,value:this.state.maskFactor,onChange:this.onMaskFactorChange,floatingLabelText:'Mask Factor "A"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Sharpen'});}}]);return Sharpen;}(_MaskFilter3.default);exports.default=Sharpen;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Skeletonization=function(_ColorFill){_inherits(Skeletonization,_ColorFill);function Skeletonization(props,content){_classCallCheck(this,Skeletonization);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Skeletonization).call(this,props,content));_this.defaultState={type:'SKELETONIZATION',disabled:true,method:1,filter:Filters.skeletonization,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);return _this;}_createClass(Skeletonization,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Zhang-Suen'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Zhang-Suen (BFS)'}))}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Background Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Foreground Pixel',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'seed',style:this.state.method===1?{display:'none'}:undefined,disabled:true,primaryText:'Is Seed',leftCheckbox:_react2.default.createElement(_Checkbox2.default,{disabled:true,checked:true})}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Skeletonization'});}}]);return Skeletonization;}(_ColorFill3.default);exports.default=Skeletonization;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165},select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var SpatialResolution=function(_Filter){_inherits(SpatialResolution,_Filter);function SpatialResolution(props,content){_classCallCheck(this,SpatialResolution);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SpatialResolution).call(this,props,content));_this.defaultState={type:'SPATIAL_RESOLTUION',ratio:1,zoomMethod:1,disabled:true,filter:Filters.spatialResolution};_this.state=Object.assign({},_this.defaultState);_this.onRatioChange=_this.onRatioChange.bind(_this);_this.onZoomMethodChange=_this.onZoomMethodChange.bind(_this);return _this;}_createClass(SpatialResolution,[{key:'onRatioChange',value:function onRatioChange(event,value){var options={ratio:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onZoomMethodChange',value:function onZoomMethodChange(event,index,value){var options={zoomMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var layer=this.props.layer;var resolution='('+Math.floor(layer.width*this.state.ratio)+' X '+Math.floor(layer.height*this.state.ratio)+') ratio = '+this.state.ratio;var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.zoomMethod,onChange:this.onZoomMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Nearest Neighbor'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Bilinear Interpolation'}))}),_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:resolution,disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onRatioChange,min:0.50,step:0.50,value:this.state.ratio,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Spatial Resolution'});}}]);return SpatialResolution;}(_Filter3.default);exports.default=SpatialResolution;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactRouter=require('react-router');var _Home=require('./Home.css');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Home:{displayName:'Home'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Home.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Home.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Home=_wrapComponent('Home')(function(_Component){_inherits(Home,_Component);function Home(){_classCallCheck(this,Home);return _possibleConstructorReturn(this,Object.getPrototypeOf(Home).apply(this,arguments));}_createClass(Home,[{key:'render',value:function render(){return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Home2.default.container},_react3.default.createElement('h2',null,'Home'),_react3.default.createElement(_reactRouter.Link,{to:'/counter'},'to Counter')));}}]);return Home;}(_react2.Component));exports.default=Home;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Option2=require('./Option');var _Option3=_interopRequireDefault(_Option2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var Compression=function(_Option){_inherits(Compression,_Option);function Compression(props,content){_classCallCheck(this,Compression);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Compression).call(this,props,content));_this.defaultState={type:'COMPRESSION',disabled:true,method:1,mode:2};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onModeChange=_this.onModeChange.bind(_this);return _this;}_createClass(Compression,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'onModeChange',value:function onModeChange(event,index,mode){var options={mode:mode};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'method',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Run Length Encoding'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Huffman Tree'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Differential PCM'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'LZW'}))}),_react2.default.createElement(_List.ListItem,{key:'mode',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.mode,onChange:this.onModeChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'ASCII'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Binary'}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Compression'});}}]);return Compression;}(_Option3.default);exports.default=Compression;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Option=function(_Component){_inherits(Option,_Component);function Option(props,content){_classCallCheck(this,Option);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Option).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyOption=_lodash2.default.debounce(_this.applyOption,500);return _this;}_createClass(Option,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.canvas.options[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var applyOption=_props.applyOption;applyOption(canvas,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyOption',value:function applyOption(option){var _props2=this.props;var canvas=_props2.canvas;var applyOption=_props2.applyOption;var index=_props2.index;option=Object.assign({},option,{index:index});applyOption(canvas,option);}}]);return Option;}(_react.Component);exports.default=Option;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Compression=require('./Compression');var _Compression2=_interopRequireDefault(_Compression);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Options:{displayName:'Options'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/options/Options.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/options/Options.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Options=_wrapComponent('Options')(function(_Component){_inherits(Options,_Component);function Options(){_classCallCheck(this,Options);return _possibleConstructorReturn(this,Object.getPrototypeOf(Options).apply(this,arguments));}_createClass(Options,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyOption=_props.applyOption;var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Options'),_react3.default.createElement(_Compression2.default,{index:index++,canvas:canvas,applyOption:applyOption}));}}]);return Options;}(_react2.Component));exports.default=Options;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Drawer=require('material-ui/Drawer');var _Drawer2=_interopRequireDefault(_Drawer);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _Options=require('../containers/Options');var _Options2=_interopRequireDefault(_Options);var _Filters=require('../containers/Filters');var _Filters2=_interopRequireDefault(_Filters);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Sidebar:{displayName:'Sidebar'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Sidebar.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Sidebar.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles={input:{marginTop:-35,width:220}};var Sidebar=_wrapComponent('Sidebar')(function(_Component){_inherits(Sidebar,_Component);function Sidebar(){_classCallCheck(this,Sidebar);return _possibleConstructorReturn(this,Object.getPrototypeOf(Sidebar).apply(this,arguments));}_createClass(Sidebar,[{key:'render',value:function render(){var _props=this.props;var open=_props.open;var canvas=_props.canvas;var applyFilter=_props.applyFilter;if(!canvas){return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'No Selected Canvas')));}return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Canvas'),_react3.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:"Canvas "+canvas.id,floatingLabelText:'Name',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'width',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.width,floatingLabelText:'Width',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'height',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.height,floatingLabelText:'Height',disabled:true})}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Layers'),canvas.layers.length?canvas.layers.map(function(layer,index){return _react3.default.createElement(_List.List,{key:"layer_"+index},_react3.default.createElement(_List.ListItem,{primaryText:"Layer "+index,secondaryText:_react3.default.createElement('p',{style:{wordWrap:"break-word"}},layer.filepath),secondaryTextLines:2,disabled:true}),layer.compressionRatio?_react3.default.createElement(_List.ListItem,{primaryText:'Compression Ratio',disabled:true,secondaryText:layer.compressionRatio+':1'}):null);}):_react3.default.createElement(_List.ListItem,{primaryText:'Empty',disabled:true})),_react3.default.createElement(_Divider2.default,null),canvas.layers.length?_react3.default.createElement(_Options2.default,{canvas:canvas}):null,canvas.layers.length?_react3.default.createElement(_Divider2.default,null):null,canvas.layers.length?_react3.default.createElement(_Filters2.default,{canvas:canvas}):null);}}]);return Sidebar;}(_react2.Component));exports.default=Sidebar;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={SidebarGroup:{displayName:'SidebarGroup'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var SidebarGroup=_wrapComponent('SidebarGroup')(function(_Component){_inherits(SidebarGroup,_Component);function SidebarGroup(props,content){_classCallCheck(this,SidebarGroup);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SidebarGroup).call(this,props,content));_this.state={checked:false};_this.onChecked=_this.onChecked.bind(_this);return _this;}_createClass(SidebarGroup,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState({checked:nextProps.checked});}},{key:'onChecked',value:function onChecked(event){var onChecked=this.props.onChecked;this.setState({checked:!this.state.checked});onChecked(event,!this.state.checked);event.stopPropagation();}},{key:'render',value:function render(){var _props=this.props;var title=_props.title;var controls=_props.controls;var checkbox=_props.checkbox;return _react3.default.createElement(_List.ListItem,{primaryText:title,nestedItems:controls,leftCheckbox:checkbox?_react3.default.createElement(_Checkbox2.default,{checked:this.state.checked,onClick:this.onChecked}):null});}}]);return SidebarGroup;}(_react2.Component));exports.default=SidebarGroup;SidebarGroup.defaultProps={onChecked:function onChecked(){}};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Canvas=require('../containers/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _Canvas3=require('../components/Canvas');var _electron=require('electron');var _Workspace=require('./Workspace.css');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Workspace:{displayName:'Workspace'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Workspace.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Workspace.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Workspace=_wrapComponent('Workspace')(function(_Component){_inherits(Workspace,_Component);function Workspace(props,content){_classCallCheck(this,Workspace);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Workspace).call(this,props,content));_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);_this.loadImage=_this.loadImage.bind(_this);_this.saveImage=_this.saveImage.bind(_this);return _this;}_createClass(Workspace,[{key:'componentDidMount',value:function componentDidMount(){_electron.ipcRenderer.on('load-image',this.loadImage);_electron.ipcRenderer.on('save-image',this.saveImage);}},{key:'componentWillUnmount',value:function componentWillUnmount(){_electron.ipcRenderer.removeAllListeners('load-image');_electron.ipcRenderer.removeAllListeners('save-image');}},{key:'onCanvasSelect',value:function onCanvasSelect(canvas){var selectCanvas=this.props.selectCanvas;selectCanvas(canvas);}},{key:'loadImage',value:function loadImage(event,canvas){var _props=this.props;var canvases=_props.canvases;var addCanvas=_props.addCanvas;var removeCanvas=_props.removeCanvas;if(!canvases[0].id){removeCanvas(canvases[0]);}var width=canvas.imageFile.width;var height=canvas.imageFile.height;var paths=canvas.imageFile.filepath.split('\\');addCanvas(Object.assign({},_Canvas3.canvasProps,{id:canvas.id,title:paths[paths.length-1],width:width,height:height,layers:[Object.assign({},canvas.imageFile,{filters:{}})],options:{},status:'rendering'}));}},{key:'saveImage',value:function saveImage(event,destination){var _props2=this.props;var canvases=_props2.canvases;var saveImage=_props2.saveImage;var canvas=canvases.find(function(canvas){return canvas.selected;});if(canvas.layers.length){saveImage(canvas,destination);}}},{key:'render',value:function render(){var _this2=this;var _props3=this.props;var canvases=_props3.canvases;var sidebarOpen=_props3.sidebarOpen;var connectDropTarget=_props3.connectDropTarget;return connectDropTarget(_react3.default.createElement('div',{className:_Workspace2.default.workspace,style:{width:'calc(100% - '+(sidebarOpen?256:0)+'px)',marginLeft:(sidebarOpen?256:0)+'px'}},canvases.map(function(canvas,index){return _react3.default.createElement(_Canvas2.default,{key:index,canvas:canvas,onSelect:_this2.onCanvasSelect});})));}}]);return Workspace;}(_react2.Component));exports.default=Workspace;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={App:{displayName:'App'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/App.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/App.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var App=_wrapComponent('App')((_temp=_class=function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,Object.getPrototypeOf(App).apply(this,arguments));}_createClass(App,[{key:'render',value:function render(){return _react3.default.createElement('div',null,this.props.children,function(){if(process.env.NODE_ENV!=='production'){var DevTools=require('./DevTools'); // eslint-disable-line global-require
return _react3.default.createElement(DevTools,null);}}());}}]);return App;}(_react2.Component),_class.propTypes={children:_react2.PropTypes.element.isRequired},_temp));exports.default=App;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _Canvas=require('../components/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var canvasSource={beginDrag:function beginDrag(props,monitor,component){var canvas=props.canvas;var rect=component.refs.canvas.getBoundingClientRect();return Object.assign({},canvas,{left:rect.left,top:rect.top-50});}};function collect(connect,monitor){return {connectDragSource:connect.dragSource(),connectDragPreview:connect.dragPreview(),isDragging:monitor.isDragging()};}function mapStateToProps(state){return {};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragSource)(_ItemTypes2.default.CANVAS,canvasSource,collect)(_Canvas2.default));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Counter=require('../components/Counter');var _Counter2=_interopRequireDefault(_Counter);var _counter=require('../actions/counter');var CounterActions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {counter:state.counter};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(CounterActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Counter2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reduxDevtools=require('redux-devtools');var _reduxDevtoolsLogMonitor=require('redux-devtools-log-monitor');var _reduxDevtoolsLogMonitor2=_interopRequireDefault(_reduxDevtoolsLogMonitor);var _reduxDevtoolsDockMonitor=require('redux-devtools-dock-monitor');var _reduxDevtoolsDockMonitor2=_interopRequireDefault(_reduxDevtoolsDockMonitor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_reduxDevtools.createDevTools)(_react2.default.createElement(_reduxDevtoolsDockMonitor2.default,{toggleVisibilityKey:'ctrl-h',changePositionKey:'ctrl-q'},_react2.default.createElement(_reduxDevtoolsLogMonitor2.default,null)));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Editor=require('../components/Editor');var _Editor2=_interopRequireDefault(_Editor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_Editor2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Filters=require('../components/filters/Filters');var _Filters2=_interopRequireDefault(_Filters);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Filters2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Home=require('../components/Home');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof5(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof5(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={HomePage:{displayName:'HomePage'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/HomePage.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/HomePage.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var HomePage=_wrapComponent('HomePage')(function(_Component){_inherits(HomePage,_Component);function HomePage(){_classCallCheck(this,HomePage);return _possibleConstructorReturn(this,Object.getPrototypeOf(HomePage).apply(this,arguments));}_createClass(HomePage,[{key:'render',value:function render(){return _react3.default.createElement(_Home2.default,null);}}]);return HomePage;}(_react2.Component));exports.default=HomePage;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default={CANVAS:'canvas'};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Options=require('../components/options/Options');var _Options2=_interopRequireDefault(_Options);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Options2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _reactDndHtml5Backend=require('react-dnd-html5-backend');var _reactDndHtml5Backend2=_interopRequireDefault(_reactDndHtml5Backend);var _Workspace=require('../components/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);var _WorkspaceActions=require('../actions/WorkspaceActions');var workspaceActions=_interopRequireWildcard(_WorkspaceActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var editorTarget={drop:function drop(props,monitor,component){var moveCanvas=props.moveCanvas;var sidebarOpen=props.sidebarOpen;var item=monitor.getItem();var delta=monitor.getDifferenceFromInitialOffset();var left=Math.round(item.left+delta.x)-(sidebarOpen?256:0);var top=Math.round(item.top+delta.y);moveCanvas(Object.assign({},item,{left:left,top:top}));}};function collect(connect){return {connectDropTarget:connect.dropTarget()};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(workspaceActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)((0,_reactDnd.DropTarget)(_ItemTypes2.default.CANVAS,editorTarget,collect)(_Workspace2.default)));module.exports=exports['default'];'use strict';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactRedux=require('react-redux');var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _routes=require('./routes');var _routes2=_interopRequireDefault(_routes);var _configureStore=require('./store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);var _getMuiTheme=require('material-ui/styles/getMuiTheme');var _getMuiTheme2=_interopRequireDefault(_getMuiTheme);var _MuiThemeProvider=require('material-ui/styles/MuiThemeProvider');var _MuiThemeProvider2=_interopRequireDefault(_MuiThemeProvider);var _reactTapEventPlugin=require('react-tap-event-plugin');var _reactTapEventPlugin2=_interopRequireDefault(_reactTapEventPlugin);require('./app.global.css');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var store=(0,_configureStore2.default)();var history=(0,_reactRouterRedux.syncHistoryWithStore)(_reactRouter.hashHistory,store);(0,_reactTapEventPlugin2.default)();(0,_reactDom.render)(_react2.default.createElement(_MuiThemeProvider2.default,{muiTheme:(0,_getMuiTheme2.default)()},_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_reactRouter.Router,{history:history,routes:_routes2.default}))),document.getElementById('root'));'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=counter;var _counter=require('../actions/counter');function counter(){var state=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var action=arguments[1];switch(action.type){case _counter.INCREMENT_COUNTER:return state+1;case _counter.DECREMENT_COUNTER:return state-1;default:return state;}}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRouterRedux=require('react-router-redux');var _Canvas=require('../components/Canvas');var _WorkspaceActions=require('../actions/WorkspaceActions');var _counter=require('./counter');var _counter2=_interopRequireDefault(_counter);var _renderer=require('./renderer');var _renderer2=_interopRequireDefault(_renderer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function workspaceReducer(){var state=arguments.length<=0||arguments[0]===undefined?[Object.assign({},_Canvas.canvasProps,{selected:true})]:arguments[0];var action=arguments[1];state=(0,_renderer2.default)(state,action);var status=void 0;if(action.type===_WorkspaceActions.COMPRESS_IMAGE||action.type===_WorkspaceActions.SAVE_IMAGE){return state.map(function(canvas){if(canvas.id===action.payload.id){return action.payload;}return canvas;});}return state;}var rootReducer=(0,_redux.combineReducers)({ //counter,
canvases:workspaceReducer,routing:_reactRouterRedux.routerReducer});exports.default=rootReducer;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=renderer;var _WorkspaceActions=require('../actions/WorkspaceActions');var _CanvasActions=require('../actions/CanvasActions');var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function canvasRenderer(state,action){if(!state.id||action.payload.id!==state.id){return state;}if(action.type===_CanvasActions.INIT_CONTEXT&&!state.context){return action.payload;}if(action.type===_CanvasActions.APPLY_OPTION){return action.payload;}if(action.type===_CanvasActions.APPLY_FILTER){return Object.assign({},action.payload,{status:'rendering'});}if(action.type===_CanvasActions.RENDER_LAYER){return Object.assign({},state,action.payload,{status:'ready'});}if(action.type===_CanvasActions.RENDER_LAYERS){return Object.assign({},state,action.payload,{status:'ready'});}return state;}function renderer(state,action){state=state.map(function(canvas){return canvasRenderer(canvas,action);});if(action.type===_WorkspaceActions.ADD_CANVAS){return [].concat(_toConsumableArray(state.map(function(canvas){return Object.assign({},canvas,{selected:false});})),[Object.assign({},action.payload,{selected:true})]);}if(action.type===_WorkspaceActions.REMOVE_CANVAS){return state.filter(function(canvas){return canvas!==action.payload;});}if(action.type===_WorkspaceActions.MOVE_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,action.payload);}return canvas;});}if(action.type===_WorkspaceActions.SELECT_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,{selected:true});}return Object.assign({},canvas,{selected:false});});}return state;}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactRouter=require('react-router');var _App=require('./containers/App');var _App2=_interopRequireDefault(_App);var _Editor=require('./containers/Editor');var _Editor2=_interopRequireDefault(_Editor);var _CounterPage=require('./containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=_react2.default.createElement(_reactRouter.Route,{path:'/',component:_App2.default},_react2.default.createElement(_reactRouter.IndexRoute,{component:_Editor2.default}),'/* ',_react2.default.createElement(_reactRouter.Route,{path:'/counter',component:_CounterPage2.default}),' */');module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxDevtools=require('redux-devtools');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reduxLogger=require('redux-logger');var _reduxLogger2=_interopRequireDefault(_reduxLogger);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);var _DevTools=require('../containers/DevTools');var _DevTools2=_interopRequireDefault(_DevTools);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var logger=(0,_reduxLogger2.default)({level:'info',collapsed:true});var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.compose)((0,_redux.applyMiddleware)(_reduxThunk2.default,router,logger),_DevTools2.default.instrument(),(0,_reduxDevtools.persistState)(window.location.href.match(/[?&]debug_session=([^&]+)\b/)));function configureStore(initialState){var store=(0,_redux.createStore)(_reducers2.default,initialState,enhancer);if(module.hot){module.hot.accept('../reducers',function(){return store.replaceReducer(require('../reducers'));} // eslint-disable-line global-require
);}return store;}module.exports=exports['default'];'use strict';if(process.env.NODE_ENV==='production'){module.exports=require('./configureStore.production'); // eslint-disable-line global-require
}else {module.exports=require('./configureStore.development'); // eslint-disable-line global-require
}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.applyMiddleware)(_reduxThunk2.default,router);function configureStore(initialState){return (0,_redux.createStore)(_reducers2.default,initialState,enhancer);}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.createVertexShader=createVertexShader;exports.createFragmentShader=createFragmentShader;exports.initContext=initContext;exports.renderLayer=renderLayer;exports.getPixels=getPixels;exports.getPixel=getPixel;exports.cleanUp=cleanUp;exports.runLengthEncode=runLengthEncode;exports.huffmanEncode=huffmanEncode;exports.lzwEncode=lzwEncode;exports.exportCanvasAsImage=exportCanvasAsImage;var _imageSpatial=require('../shaders/image-spatial.vert');var _imageSpatial2=_interopRequireDefault(_imageSpatial);var _imageRaster=require('../shaders/image-raster.frag');var _imageRaster2=_interopRequireDefault(_imageRaster);var _stream=require('stream');var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);var _HuffmanTree=require('./HuffmanTree');var _HuffmanTree2=_interopRequireDefault(_HuffmanTree);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function isError(gl,shader){if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){var info=gl.getShaderInfoLog(shader);gl.deleteShader(shader);console.error("Could not compile vertex shader. \n\n"+info);return true;}return false;}function createVertexShader(gl,program){var shader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(shader,_imageSpatial2.default);gl.compileShader(shader);if(isError(gl,shader)){return null;}return shader;}function createFragmentShader(gl,program){var shader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(shader,_imageRaster2.default);gl.compileShader(shader);if(isError(gl,shader)){return;}return shader;}function initContext(canvas,gl){var context={gl:gl}; //create and init shaders
var program=gl.createProgram();var vertexShader=createVertexShader(gl,program);var fragmentShader=createFragmentShader(gl,program);if(!vertexShader||!fragmentShader){gl.deleteProgram(program);return;}gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){var info=gl.getProgramInfoLog(program);console.error("Error in program linking:"+info);cleanUp(context);return;}gl.useProgram(program); //create texture coordinate buffer
var vertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0]),gl.STATIC_DRAW); //specify the location of the texture coordinate data
var texCoordInLocation=gl.getAttribLocation(program,"a_texCoord");gl.enableVertexAttribArray(texCoordInLocation);gl.vertexAttribPointer(texCoordInLocation,2,gl.FLOAT,false,0,0); // set the resolution
var resolutionLocation=gl.getUniformLocation(program,"u_resolution");gl.uniform2f(resolutionLocation,canvas.width,canvas.height);return Object.assign({},context,{program:program,vertexShader:vertexShader,fragmentShader:fragmentShader});}function isPowerOfTwo(x){return (x&x-1)==0;}function nextHighestPowerOfTwo(x){--x;for(var i=1;i<32;i<<=1){x=x|x>>i;}return x+1;}function renderLayer(context,layer,layerIndex){if(layerIndex>31){console.error("Only up to 32 layers per Canvas is supported");return;}var gl=context.gl; // apply filters
var filters=_lodash2.default.values(layer.filters).sort(function(a,b){return a.index-b.index;});filters.forEach(function(options){if(!options.disabled){layer=options.filter(layer,context,options);}});var register=gl['TEXTURE'+layerIndex];var program=context.program;var width=isPowerOfTwo(layer.width)?layer.width:nextHighestPowerOfTwo(layer.width);var height=isPowerOfTwo(layer.height)?layer.height:nextHighestPowerOfTwo(layer.height);var texture=gl.createTexture();var pixels=new Uint8Array(3*width*height);var offset=width-layer.width;var index=0;var rowIndex=0; //map pixels for grayscale
layer.pixels.forEach(function(pixel){var remaining=layer.width-index;if(remaining%layer.width===0){rowIndex=index/layer.width;}pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;}); //create pixel data buffer
var textureBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,textureBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,width,0.0,0.0,height,0.0,height,width,0.0,width,height]),gl.STATIC_DRAW); //specify the location of the pixel position data
var positionLocation=gl.getAttribLocation(program,"a_position");gl.enableVertexAttribArray(positionLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,0,0); //config texture
gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,width,height,0,gl.RGB,gl.UNSIGNED_BYTE,pixels); //render
gl.clearColor(0.0,0.0,0.0,1.0);gl.clear(gl.COLOR_BUFFER_BIT);gl.activeTexture(register);gl.drawArrays(gl.TRIANGLES,0,6); // cleanup
gl.deleteBuffer(textureBuffer);gl.deleteTexture(texture);}function getPixels(canvas){var gl=canvas.context.gl;var pixels=new Uint8Array(4*canvas.width*canvas.height);gl.readPixels(0,0,canvas.width,canvas.height,gl.RGBA,gl.UNSIGNED_BYTE,pixels);var last=pixels.length/4-1;var rawPixels=[];var index=last;var offset=0;for(var i=0;i<pixels.length;i+=4){var pixel=Math.round((pixels[i]+pixels[i+1]+pixels[i+2])/3);if((index+1)%canvas.width===0){offset=index;}rawPixels[offset+(offset-index--)]=pixel;}return rawPixels;}function getPixel(canvas,x,y){var gl=canvas.context.gl;var pixel=new Uint8Array(4);gl.readPixels(x,canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel);return pixel[0];}function cleanUp(context){if(!context){return;}var gl=context.gl;gl.deleteProgram(context.program);gl.deleteShader(context.vertexShader);gl.deleteShader(context.fragmentShader);}function runLengthEncode(stream,pixels,width,height,mode){var magicNumber='E2';var count=1;var prev=void 0;if(mode===1){magicNumber='E1';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel,index){if(prev===pixel){count++;}else if(prev!==undefined&&prev!==pixel){if(mode===1){ // ASCII
stream.write(prev+' '+count+(index===pixels.length-1?'\n':' '));}else { // BIN
var pixelBuffer=new Buffer.allocUnsafe(1);var countBuffer=new Buffer(4);pixelBuffer.writeUInt8(prev);countBuffer.writeUInt32BE(count);stream.write(pixelBuffer);stream.write(countBuffer);}count=1;}prev=pixel;});}function huffmanEncode(stream,pixels,width,height,mode){var histogram={};pixels.forEach(function(pixel){if(histogram[pixel]){histogram[pixel]++;}else {histogram[pixel]=1;}});var tree=new _HuffmanTree2.default(histogram,',',pixels.length);var codeBook={};tree.leaves.forEach(function(node){if(node===tree.root){return;}var token=node.token;codeBook[token]=node.bit;while(node.parent!==tree.root){node=node.parent;codeBook[token]=node.bit+codeBook[token];}});var encoded='';pixels.forEach(function(pixel,index){encoded+=codeBook[pixel.toString()];});var chunks=encoded.match(/.{1,8}/g);var magicNumber='E4';if(mode===1){magicNumber='E3';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');Object.keys(codeBook).forEach(function(key){var buffer=new Buffer(2);buffer.writeUInt8(parseInt(key));buffer.writeUInt8(parseInt(codeBook[key],2),1);stream.write(buffer);});stream.write('\n');chunks.forEach(function(chunk,index){var byte=parseInt(chunk,2);if(mode===1){ // ASCII
stream.write(byte+' ');}else { // BIN
var buffer=new Buffer(1);buffer.writeUInt8(byte);stream.write(buffer);}});}function lzwEncode(stream,pixels,width,height,mode){var max=Math.pow(2,16);var writeBytes=function writeBytes(bytes){if(mode===1){ // ASCII
stream.write(bytes+' ');}else { // BIN
var buffer=new Buffer(2);buffer.writeUInt16BE(bytes);stream.write(buffer);}};var output=void 0;var index=255;var prev='';var dictionary={};var magicNumber='E6';if(mode===1){magicNumber='E5';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel){var key=prev+' '+pixel;if(dictionary[key]){prev=key;}else {output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);if(index+1>255){dictionary[key]=++index;}prev=pixel;}});output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);}function exportCanvasAsImage(canvas,destination){var stream=_fs2.default.createWriteStream(destination);var pixels=getPixels(canvas);var method=canvas.options.COMPRESSION?canvas.options.COMPRESSION.method:0;var mode=canvas.options.COMPRESSION?canvas.options.COMPRESSION.mode:0;if(method===1){ // Run length encoding
runLengthEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===2){ // huffman
huffmanEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===3){ // differential PCM
}else if(method===4){ // LZW
lzwEncode(stream,pixels,canvas.width,canvas.height,mode);}else {stream.write('P5\n'+canvas.width+' '+canvas.height+'\n255\n');pixels.forEach(function(pixel,index){var buffer=new Buffer.allocUnsafe(1);buffer.writeUInt8(pixel);stream.write(buffer);});}stream.end();}'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var HuffmanTree=function HuffmanTree(histogram,seperator,total){_classCallCheck(this,HuffmanTree);seperator=seperator||'';var nodes=Object.keys(histogram).map(function(key){return {token:key.toString(),probability:histogram[key]/total,parent:null};});nodes.sort(function(current,next){return current.probability-next.probability;});this.leaves=[].concat(_toConsumableArray(nodes));while(nodes.length){var current=nodes.shift();var next=nodes.shift();if(next){var parent={token:current.token+seperator+next.token,probability:current.probability+next.probability,left:current,right:next};current.parent=parent;current.bit='0';next.parent=parent;next.bit='1';nodes.push(parent);if(parent.probability<nodes[nodes.length-1].probability){nodes.sort(function(current,next){return current.probability-next.probability;});}}else {this.root=current;}}};exports.default=HuffmanTree;module.exports=exports['default'];"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runLengthDecode=runLengthDecode;function runLengthDecode(data){var pixels=[];var prev=void 0;data.forEach(function(value,index){if(index%2===1){var count=value;for(var i=0;i<count;i++){pixels.push(prev);}}prev=value;});return pixels;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lineReader=require('line-reader');var _lineReader2=_interopRequireDefault(_lineReader);var _PBMFileReader=require('./PBMFileReader');var _PBMFileReader2=_interopRequireDefault(_PBMFileReader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var PBM_COMPRESSED_FORMATS={ //"E1" : "PGM_ASCII_RLE_COMPRESSED",
"E2":"PGM_BIN_RLE_COMPRESSED", //"E3" : "PGM_ASCII_HME_COMPRESSED",
"E4":"PGM_BIN_HME_COMPRESSED", //"E5" : "PGM_ASCII_LZW_COMPRESSED",
"E6":"PGM_BIN_LZW_COMPRESSED"};var PBM_IMAGE_FORMATS=Object.assign({},{ //"P1" : "PBM_ASCII",
"P2":"PGM_ASCII", //"P3" : "PPM_ASCII",
//"P4" : "PBM_BIN",
"P5":"PGM_BIN"}, //"P6" : "PPM_BIN",
PBM_COMPRESSED_FORMATS);var PBMAsciiReader=function(){function PBMAsciiReader(filepath,onLine,onClose){var _this=this;_classCallCheck(this,PBMAsciiReader);var index=0;_lineReader2.default.eachLine(filepath,function(line,last){if(onLine){onLine(line,index++,last);}if(last||_this.error){onClose(_this.error);return false;}});}_createClass(PBMAsciiReader,[{key:'close',value:function close(error){this.error=error;}}]);return PBMAsciiReader;}();var ImageFile=function(){function ImageFile(filepath){_classCallCheck(this,ImageFile);this.filepath=filepath;this.length=0;this.pixels=[];}_createClass(ImageFile,[{key:'on',value:function on(event,callback){this[event]=callback;}},{key:'load',value:function load(){var _this2=this;var onLoad=this['load-data']||function(){};var onError=this['load-error']||function(error){};var onComplete=this['load-complete']||function(){};var complete=function complete(){var length=_this2.pixels.length*8;if(_this2.length!==length){_this2.compressionRatio=Math.ceil(length/_this2.length);}onComplete();console.log('Loaded image: '+_this2.filepath+' '+_this2.width+' '+_this2.height+' '+_this2.colorBits);};var getImagePixels=function getImagePixels(pixels){_this2.length+=pixels.length;pixels.forEach(function(pixel){_this2.pixels.push(pixel);});return pixels;};var fd=_fs2.default.openSync(this.filepath,'r');if(!fd){onError('Unable to open file');return;}var header=new Buffer(2);_fs2.default.readSync(fd,header,0,2,0);this.format=PBM_IMAGE_FORMATS[header.toString()];if(!this.format){_fs2.default.close(fd,function(){return onError('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));});}else {if(this.format.indexOf('_ASCII')!==-1){(function(){_fs2.default.close(fd);var reader=new PBMAsciiReader(_this2.filepath,function(line,index){if(index===0)return;if(!line.startsWith('#')){if(!_this2.width&&!_this2.height){var resolution=line.split(/\s+/);_this2.width=parseInt(resolution[0]);_this2.height=parseInt(resolution[1]);}else if(!_this2.colorBits){_this2.colorBits=parseInt(line);}else if(_this2['load-init']){_this2['load-init']();delete _this2['load-init'];onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else if(onLoad){onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else {reader.close('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));}}},function(err){if(err){onError(err);}else {complete();}});})();}else if(this.format.indexOf('_BIN')!==-1){var _reader=new _PBMFileReader2.default(fd,this.format);Object.assign(this,_reader.getInfo());this['load-init']();this.length=_reader.readPixels(function(pixels){return onLoad(getImagePixels(pixels));},64);_fs2.default.close(fd,complete);}else {fd.close(fd,function(){return onError('Unexpected error');});}}}}]);return ImageFile;}();exports.default=ImageFile;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _typeof=typeof Symbol==="function"&&_typeof5(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof5(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof5(obj);};var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _imageUtils=require('./image-utils');var imageUtils=_interopRequireWildcard(_imageUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function defaultReducer(pixels){return pixels;}function readBytes(fd,position){var length=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var buffer=new Buffer(length);var size=_fs2.default.readSync(fd,buffer,0,length,position);if(length!==size){buffer=Buffer.from(buffer,0,size);}return buffer;}function getUTF8String(fd,offset,term){var content='';var buffer=new Buffer(1);if(offset){readBytes(fd,offset);}var _loop=function _loop(){buffer=readBytes(fd);var val=buffer.toString();if(!term){return {v:val};}else if(Array.isArray(term)&&term.find(function(term){return val===term;})){return {v:content};}else if(val===term){return {v:content};}else {content+=val;}};while(buffer.length){var _ret=_loop();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}}function readPGMBinary(fd,collector,position,term){collector=collector||function(){};var buffer=readBytes(fd,position);var length=0;while(buffer.length){length+=8;collector(buffer);buffer=readBytes(fd);if(term&&term==buffer.toString()){break;}}return length;}function readPGMCompressedRLE(fd,collector,position){collector=collector||function(){};var pixelBuffer=readBytes(fd,position);var length=0;while(pixelBuffer.length){length+=8;collector(pixelBuffer);var countBuffer=new Buffer(4);for(var i=0;i<4;i++){ // read 4 bytes or a 32 bit unsigned integer
countBuffer[i]=readBytes(fd)[0];}length+=32;collector(countBuffer);pixelBuffer=readBytes(fd);}return length;}function readPGMCompressedHME(fd,collector,position){var index=0;var codeBook={};var value=void 0;var length=0;readPGMBinary(fd,function(buffer){if(index++%2===0){value=buffer.readUInt8(0);}else {codeBook[buffer.readUInt8(0).toString(2)]=value;}length+=8;},position,'\n');var encoded='';readPGMBinary(fd,function(buffer){var binary=buffer.readUInt8(0).toString(2);encoded+="00000000".substring(0,8-binary.length)+binary;length+=8;});value=null;var code='';for(var i=0;i<encoded.length;i++){code+=encoded.charAt(i);value=codeBook[code];if(value!==null){collector(value);code='';value=null;}}return length;}function readPGMCompressedLZW(fd,collector,position){collector=collector||function(){};var buffer=readBytes(fd,position,2);var prev=void 0;var index=255;var dictionary={};var length=0;while(buffer.length){length+=16;var bytes=buffer.readUInt16BE(0);var pixels=dictionary[bytes]?dictionary[bytes].split(' '):[bytes];pixels.forEach(function(pixel){collector(parseInt(pixel));});if(prev!==undefined){dictionary[++index]=prev+' '+pixels[0];}prev=pixels.join(' ');buffer=readBytes(fd,2);}return length;}var PBMFileReader=function(){function PBMFileReader(fd,format){_classCallCheck(this,PBMFileReader);this.fd=fd;this.format=format;}_createClass(PBMFileReader,[{key:'getInfo',value:function getInfo(){var width=void 0,height=void 0,colorBits=void 0;var str=getUTF8String(this.fd,2,[' ','\n']);while(str&&(!width||!height||!colorBits)){if(str.indexOf('#')===0){str=getUTF8String(this.fd,null,'\n');}else if(!width){width=parseInt(str);str=getUTF8String(this.fd,null,[' ','\n']);}else if(!height){height=parseInt(str);str=getUTF8String(this.fd,null,'\n');}else if(!colorBits){colorBits=parseInt(str);if(!colorBits){str=getUTF8String(this.fd,null,'\n');}}}return {width:width,height:height,colorBits:colorBits};}},{key:'readPixels',value:function readPixels(onRead,batchSize){var processor=defaultReducer;var pixels=[];var length=0;var collector=function collector(data){if(data!==undefined){if(Number.isInteger(data)){pixels.push(data);}else if(data.length===4){pixels.push(data.readUInt32BE(0));}else {pixels.push(data.readUInt8(0));}if(pixels.length===batchSize){onRead(processor(pixels));pixels=[];}}};if(this.format.indexOf('PGM_BIN_RLE')===0){processor=imageUtils.runLengthDecode;length=readPGMCompressedRLE(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_HME')===0){length=readPGMCompressedHME(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_LZW')===0){length=readPGMCompressedLZW(this.fd,collector);}else if(this.format.indexOf('PGM_BIN')===0){length=readPGMBinary(this.fd,collector);}if(pixels.length){onRead(processor(pixels));}return length;}}]);return PBMFileReader;}();exports.default=PBMFileReader;module.exports=exports['default'];'use strict';var _typeof4=typeof Symbol==="function"&&_typeof5(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof5(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof5(obj);};Object.defineProperty(exports,"__esModule",{value:true});exports.RENDER_LAYERS=exports.RENDER_LAYER=exports.APPLY_OPTION=exports.APPLY_FILTER=exports.INIT_CONTEXT=undefined;exports.initContext=initContext;exports.applyFilter=applyFilter;exports.applyOption=applyOption;exports.renderLayer=renderLayer;exports.renderLayers=renderLayers;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}var INIT_CONTEXT=exports.INIT_CONTEXT='INIT_CANVAS';var APPLY_FILTER=exports.APPLY_FILTER='APPLY_FILTER';var APPLY_OPTION=exports.APPLY_OPTION='APPLY_OPTION';var RENDER_LAYER=exports.RENDER_LAYER='RENDER_LAYER';var RENDER_LAYERS=exports.RENDER_LAYERS='RENDER_LAYERS';function initContext(canvas,gl){return function(dispatch){return dispatch({type:INIT_CONTEXT,payload:Object.assign({},canvas,{context:canvasUtils.initContext(canvas,gl)})});};}function applyFilter(canvas,layer,filter){return function(dispatch){var chain=function chain(canvas,dispatch){};var layers=canvas.layers.map(function(_layer,index){if(layer===_layer){_layer=Object.assign({},layer,{filters:Object.assign({},layer.filters,_defineProperty({},filter.type,filter))});chain=function chain(canvas,dispatch){renderLayer(canvas,_layer,index)(dispatch);};}return _layer;});canvas=Object.assign({},canvas,{layers:layers});dispatch({type:APPLY_FILTER,payload:canvas});chain(canvas,dispatch);};}function applyOption(canvas,option){return function(dispatch){dispatch({type:APPLY_OPTION,payload:Object.assign({},canvas,{options:Object.assign({},canvas.options,_defineProperty({},option.type,option))})});};}function renderLayer(canvas,layer,index){return function(dispatch){canvasUtils.renderLayer(canvas.context,layer,index);dispatch({type:RENDER_LAYER,payload:canvas});};}function renderLayers(canvas){return function(dispatch){canvas.layers.forEach(function(layer,index){canvasUtils.renderLayer(canvas.context,layer,index);});dispatch({type:RENDER_LAYERS,payload:canvas});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.increment=increment;exports.decrement=decrement;exports.incrementIfOdd=incrementIfOdd;exports.incrementAsync=incrementAsync;var INCREMENT_COUNTER=exports.INCREMENT_COUNTER='INCREMENT_COUNTER';var DECREMENT_COUNTER=exports.DECREMENT_COUNTER='DECREMENT_COUNTER';function increment(){return {type:INCREMENT_COUNTER};}function decrement(){return {type:DECREMENT_COUNTER};}function incrementIfOdd(){return function(dispatch,getState){var _getState=getState();var counter=_getState.counter;if(counter%2===0){return;}dispatch(increment());};}function incrementAsync(){var delay=arguments.length<=0||arguments[0]===undefined?1000:arguments[0];return function(dispatch){setTimeout(function(){dispatch(increment());},delay);};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_IMAGE=exports.COMPRESS_IMAGE=exports.SELECT_CANVAS=exports.MOVE_CANVAS=exports.REMOVE_CANVAS=exports.ADD_CANVAS=undefined;exports.addCanvas=addCanvas;exports.removeCanvas=removeCanvas;exports.moveCanvas=moveCanvas;exports.selectCanvas=selectCanvas;exports.saveImage=saveImage;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var ADD_CANVAS=exports.ADD_CANVAS='ADD_CANVAS';var REMOVE_CANVAS=exports.REMOVE_CANVAS='REMOVE_CANVAS';var MOVE_CANVAS=exports.MOVE_CANVAS='MOVE_CANVAS';var SELECT_CANVAS=exports.SELECT_CANVAS='SELECT_CANVAS';var COMPRESS_IMAGE=exports.COMPRESS_IMAGE='COMPRESS_IMAGE';var SAVE_IMAGE=exports.SAVE_IMAGE='SAVE_IMAGE';function addCanvas(canvas){return function(dispatch){return dispatch({type:ADD_CANVAS,payload:canvas});};}function removeCanvas(canvas){return function(dispatch){return dispatch({type:REMOVE_CANVAS,payload:canvas});};}function moveCanvas(canvas){return function(dispatch){return dispatch({type:MOVE_CANVAS,payload:canvas});};}function selectCanvas(canvas){return function(dispatch){return dispatch({type:SELECT_CANVAS,payload:canvas});};}function saveImage(canvas,destination){return function(dispatch){dispatch({type:COMPRESS_IMAGE,payload:Object.assign({},canvas,{status:'compressing'})});canvasUtils.exportCanvasAsImage(canvas,destination);dispatch({type:SAVE_IMAGE,payload:Object.assign({},canvas,{status:'ready'})});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.canvasProps=undefined;var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactDom=require('react-dom');var _Canvas=require('./Canvas.css');var _Canvas2=_interopRequireDefault(_Canvas);var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _electron=require('electron');var _Card=require('material-ui/Card');var _CircularProgress=require('material-ui/CircularProgress');var _CircularProgress2=_interopRequireDefault(_CircularProgress);var _Paper=require('material-ui/Paper');var _Paper2=_interopRequireDefault(_Paper);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Canvas:{displayName:'Canvas'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Canvas.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Canvas.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles=Object.assign({},_Canvas2.default,{progress:{margin:'-15px 0 0 -15px'}});var Canvas=_wrapComponent('Canvas')(function(_Component){_inherits(Canvas,_Component);function Canvas(props,content){_classCallCheck(this,Canvas);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Canvas).call(this,props,content));_this.onLoadData=_this.onLoadData.bind(_this);_this.onLoadComplete=_this.onLoadComplete.bind(_this);_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);return _this;}_createClass(Canvas,[{key:'componentDidMount',value:function componentDidMount(){var _props=this.props;var initContext=_props.initContext;var canvas=_props.canvas;var gl=this.refs.canvas.getContext('webgl',{preserveDrawingBuffer:true});initContext(canvas,gl);_electron.ipcRenderer.on('load-data',this.onLoadData);_electron.ipcRenderer.on('load-complete',this.onLoadComplete);}},{key:'componentWillUnmount',value:function componentWillUnmount(){var canvas=this.props.canvas;canvasUtils.cleanUp(canvas.context);_electron.ipcRenderer.removeListener('load-data',this.onLoadData);_electron.ipcRenderer.removeListener('load-complete',this.onLoadComplete);}},{key:'onLoadData',value:function onLoadData(event,data){var canvas=this.props.canvas;if(canvas.id!==data.id){return;}var layer=canvas.layers.find(function(layer){return layer.filepath===data.filepath;});for(var i=0;i<data.pixels.length;i++){layer.pixels.push(data.pixels[i]);}}},{key:'onLoadComplete',value:function onLoadComplete(event,data){var renderLayers=this.props.renderLayers;var canvas=this.props.canvas;if(canvas.id!==data.id){return;}if(data.compressionRatio){var layers=canvas.layers.map(function(layer){if(layer.filepath===data.filepath){return Object.assign({},layer,{compressionRatio:data.compressionRatio});}return layer;});canvas=Object.assign({},canvas,{layers:layers});}renderLayers(canvas);}},{key:'onCanvasSelect',value:function onCanvasSelect(event){var _props2=this.props;var canvas=_props2.canvas;var onSelect=_props2.onSelect;if(!canvas.layers.length){return;}if(!canvas.selected){onSelect(canvas);return;}var rect=this.refs.canvas.getBoundingClientRect();var xPosition=event.clientX-rect.left;var yPosition=event.clientY-rect.top;_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_POS',{xPosition:xPosition,yPosition:yPosition});_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR',{targetColor:canvasUtils.getPixel(canvas,xPosition,yPosition)});}},{key:'render',value:function render(){var _props3=this.props;var canvas=_props3.canvas;var connectDragPreview=_props3.connectDragPreview;var connectDragSource=_props3.connectDragSource;var isDragging=_props3.isDragging;return connectDragPreview(_react3.default.createElement('div',{className:styles.canvasContainer,selected:canvas.selected,style:{left:canvas.left,top:canvas.top,width:canvas.width,height:canvas.height+50,opacity:isDragging?0:1,zIndex:canvas.selected?1000:1}},_react3.default.createElement(_Paper2.default,{zDepth:2},_react3.default.createElement(_Card.Card,null,_react3.default.createElement(_Card.CardHeader,{title:canvas.title,avatar:canvas.status==='ready'?null:_react3.default.createElement(_CircularProgress2.default,{style:styles.progress,size:0.5}),style:{cursor:"move",maxHeight:'50px'},ref:function ref(cardHeader){return connectDragSource((0,_reactDom.findDOMNode)(cardHeader));},titleStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),_react3.default.createElement(_Card.CardMedia,null,_react3.default.createElement('canvas',{id:'canvas',className:styles.canvas,onClick:this.onCanvasSelect,width:canvas.width,height:canvas.height,ref:'canvas'}))))));}}]);return Canvas;}(_react2.Component));exports.default=Canvas;var canvasProps=exports.canvasProps={top:10,left:10,width:640,height:320,title:"<No Content>",layers:[],status:'ready'};Canvas.defaultProps=canvasProps;'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;var _reactRouter=require('react-router');var _Counter=require('./Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Counter:{displayName:'Counter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Counter.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Counter.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Counter=_wrapComponent('Counter')((_temp=_class=function(_Component){_inherits(Counter,_Component);function Counter(){_classCallCheck(this,Counter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Counter).apply(this,arguments));}_createClass(Counter,[{key:'render',value:function render(){var _props=this.props;var increment=_props.increment;var incrementIfOdd=_props.incrementIfOdd;var incrementAsync=_props.incrementAsync;var decrement=_props.decrement;var counter=_props.counter;return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Counter2.default.backButton},_react3.default.createElement(_reactRouter.Link,{to:'/'},_react3.default.createElement('i',{className:'fa fa-arrow-left fa-3x'}))),_react3.default.createElement('div',{className:'counter '+_Counter2.default.counter},counter),_react3.default.createElement('div',{className:_Counter2.default.btnGroup},_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:increment},_react3.default.createElement('i',{className:'fa fa-plus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:decrement},_react3.default.createElement('i',{className:'fa fa-minus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:incrementIfOdd},'odd'),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:function onClick(){return incrementAsync();}},'async')));}}]);return Counter;}(_react2.Component),_class.propTypes={increment:_react2.PropTypes.func.isRequired,incrementIfOdd:_react2.PropTypes.func.isRequired,incrementAsync:_react2.PropTypes.func.isRequired,decrement:_react2.PropTypes.func.isRequired,counter:_react2.PropTypes.number.isRequired},_temp));exports.default=Counter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Sidebar=require('../components/Sidebar');var _Sidebar2=_interopRequireDefault(_Sidebar);var _Workspace=require('../containers/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Editor:{displayName:'Editor'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Editor.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Editor.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Editor=_wrapComponent('Editor')(function(_Component){_inherits(Editor,_Component);function Editor(){_classCallCheck(this,Editor);return _possibleConstructorReturn(this,Object.getPrototypeOf(Editor).apply(this,arguments));}_createClass(Editor,[{key:'render',value:function render(){var canvases=this.props.canvases;var canvas=canvases.find(function(canvas){return canvas.selected;});var sidebarOpen=canvas!==undefined;return _react3.default.createElement('div',null,_react3.default.createElement(_Sidebar2.default,{canvas:canvas,open:sidebarOpen}),_react3.default.createElement(_Workspace2.default,{sidebarOpen:sidebarOpen}));}}]);return Editor;}(_react2.Component));exports.default=Editor;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _toggle=require('material-ui/toggle');var _toggle2=_interopRequireDefault(_toggle);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var BitPlanes=function(_Filter){_inherits(BitPlanes,_Filter);function BitPlanes(props,content){_classCallCheck(this,BitPlanes);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BitPlanes).call(this,props,content));var planes={};for(var i=1;i<=8;i++){planes[i]=true;}_this.defaultState={type:'BIT_PLANES',disabled:true,filter:Filters.bitPlanes,planes:planes};_this.state=Object.assign({},_this.defaultState);_this.onToggleChange=_this.onToggleChange.bind(_this);return _this;}_createClass(BitPlanes,[{key:'onToggleChange',value:function onToggleChange(event){var target=event.target.id.split('_')[1];var bit=Object.keys(this.state.planes).find(function(bit){return bit==target;});var planes=this.state.planes;if(bit){planes=Object.assign({},this.state.planes,_defineProperty({},bit,!this.state.planes[bit]));}var options={planes:planes};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var _this2=this;var controls=Object.keys(this.state.planes).map(function(bit){return _react2.default.createElement(_List.ListItem,{key:"plane_"+bit,primaryText:"Plane "+bit,rightToggle:_react2.default.createElement(_toggle2.default,{id:"plane_"+bit,toggled:_this2.state.planes[bit],onToggle:_this2.onToggleChange,disabled:_this2.state.disabled})});});return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Bit Plane Slicing'});}}]);return BitPlanes;}(_Filter3.default);exports.default=BitPlanes;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var BoundaryFill=function(_ColorFill){_inherits(BoundaryFill,_ColorFill);function BoundaryFill(props,content){_classCallCheck(this,BoundaryFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BoundaryFill).call(this,props,content));_this.defaultState={type:'BOUNDARY_FILL',filter:Filters.boundaryFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(BoundaryFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Boundary Fill'});}}]);return BoundaryFill;}(_ColorFill3.default);exports.default=BoundaryFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ColorFill=function(_Filter){_inherits(ColorFill,_Filter);function ColorFill(props,content){_classCallCheck(this,ColorFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ColorFill).call(this,props,content));_this.onXpositionChange=_this.onXpositionChange.bind(_this);_this.onYpositionChange=_this.onYpositionChange.bind(_this);_this.onTargetColorChange=_this.onTargetColorChange.bind(_this);_this.onColorSelect=_this.onColorSelect.bind(_this);_this.onColorRecieve=_this.onColorRecieve.bind(_this);_this.onPixelSelect=_this.onPixelSelect.bind(_this);_this.onPixelRecieve=_this.onPixelRecieve.bind(_this);return _this;}_createClass(ColorFill,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){_get(Object.getPrototypeOf(ColorFill.prototype),'componentWillReceiveProps',this).call(this,nextProps);this.removeListeners(nextProps.layer.filters[this.defaultState.type]);}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState){if(!prevState.disabled&&this.state.disabled){this.removeListeners();}}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.removeListeners();}},{key:'onXpositionChange',value:function onXpositionChange(event,xPosition){var layer=this.props.layer;var options={xPosition:xPosition};xPosition=parseInt(xPosition);if(xPosition<0){xPosition=0;}else if(xPosition>=layer.width){xPosition=layer.width-1;}if(Number.isInteger(xPosition)){options=Object.assign({},this.state,{xPosition:xPosition});this.applyFilter(options);}this.setState(options);}},{key:'onYpositionChange',value:function onYpositionChange(event,yPosition){var layer=this.props.layer;var options={yPosition:yPosition};yPosition=parseInt(yPosition);if(yPosition<0){yPosition=0;}else if(yPosition>=layer.height){yPosition=layer.height-1;}if(Number.isInteger(yPosition)){options=Object.assign({},this.state,{yPosition:yPosition});this.applyFilter(options);}this.setState(options);}},{key:'onTargetColorChange',value:function onTargetColorChange(event,targetColor){var layer=this.props.layer;var options={targetColor:targetColor};targetColor=parseInt(targetColor);if(targetColor<0){targetColor=0;options={targetColor:targetColor};}else if(targetColor>=layer.colorBits){targetColor=layer.colorBits;options={targetColor:targetColor};}if(Number.isInteger(targetColor)){options=Object.assign({},this.state,{targetColor:targetColor});this.applyFilter(options);}this.setState(options);}},{key:'onColorSelect',value:function onColorSelect(){var canvas=this.props.canvas;if(this.state.listeners.colorPick){this.removeListener('colorPick');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR','colorPick',this.onColorRecieve);}}},{key:'onColorRecieve',value:function onColorRecieve(topic,options){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var targetColor={targetColor:options.targetColor};options=Object.assign({},this.state,targetColor);this.setState(targetColor);this.applyFilter(options);}},{key:'onPixelSelect',value:function onPixelSelect(){var canvas=this.props.canvas;if(this.state.listeners.pixelPos){this.removeListener('pixelPos');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_POS','pixelPos',this.onPixelRecieve);}}},{key:'onPixelRecieve',value:function onPixelRecieve(topic,position){this.applyFilter(Object.assign({},this.state,position));}},{key:'addListener',value:function addListener(topic,listener,callback){var _this2=this;callback=callback||function(){};var token=_pubsubJs2.default.subscribe(topic,function(topic,content){_this2.removeListener(listener);callback(topic,content);});var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,token))};this.setState(options);}},{key:'removeListener',value:function removeListener(listener){if(!this.state.listeners[listener]){return;}_pubsubJs2.default.unsubscribe(this.state.listeners[listener]);var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,null))};this.setState(options);}},{key:'removeListeners',value:function removeListeners(listeners){var _this3=this;var options={listeners:Object.assign({},this.state.listeners)};var change=false;Object.keys(this.state.listeners).forEach(function(listener){if(!listeners||!listeners[listener]){_pubsubJs2.default.unsubscribe(_this3.state.listeners[listener]);options.listeners[listener]=null;change=true;}});if(change){this.setState(options);}}}]);return ColorFill;}(_Filter3.default);exports.default=ColorFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var DistanceFill=function(_ColorFill){_inherits(DistanceFill,_ColorFill);function DistanceFill(props,content){_classCallCheck(this,DistanceFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(DistanceFill).call(this,props,content));_this.defaultState={type:'DISTANCE_FILL',filter:Filters.distanceFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,scaleFactor:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onScaleFactorChange=_this.onScaleFactorChange.bind(_this);return _this;}_createClass(DistanceFill,[{key:'onScaleFactorChange',value:function onScaleFactorChange(event,scaleFactor){var options={scaleFactor:scaleFactor};scaleFactor=parseInt(scaleFactor);if(scaleFactor<0){scaleFactor=1;options={scaleFactor:scaleFactor};}if(Number.isInteger(scaleFactor)){this.applyFilter(Object.assign({},this.state,{scaleFactor:scaleFactor}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Initial Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'scale',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.scaleFactor,onChange:this.onScaleFactorChange,floatingLabelText:'Scale Factor',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Distance Fill'});}}]);return DistanceFill;}(_ColorFill3.default);exports.default=DistanceFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Erosion=function(_ColorFill){_inherits(Erosion,_ColorFill);function Erosion(props,content){_classCallCheck(this,Erosion);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Erosion).call(this,props,content));_this.defaultState={type:'EROSION',disabled:true,filter:Filters.erosion,xPosition:'',yPosition:'',targetColor:0,iterations:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onIterationsChange=_this.onIterationsChange.bind(_this);return _this;}_createClass(Erosion,[{key:'onIterationsChange',value:function onIterationsChange(event,iterations){var layer=this.props.layer;var options={iterations:iterations};iterations=parseInt(iterations);if(iterations<0){iterations=0;options={iterations:iterations};}if(Number.isInteger(iterations)){this.applyFilter(Object.assign({},this.state,{iterations:iterations}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'iterations',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.iterations,onChange:this.onIterationsChange,floatingLabelText:'Iterations',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Erosion'});}}]);return Erosion;}(_ColorFill3.default);exports.default=Erosion;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Filter=function(_Component){_inherits(Filter,_Component);function Filter(props,content){_classCallCheck(this,Filter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Filter).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyFilter=_lodash2.default.debounce(_this.applyFilter,500);return _this;}_createClass(Filter,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.layer.filters[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var applyFilter=_props.applyFilter;applyFilter(canvas,layer,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyFilter',value:function applyFilter(options){var _props2=this.props;var canvas=_props2.canvas;var layer=_props2.layer;var applyFilter=_props2.applyFilter;var index=_props2.index;options=Object.assign({},options,{index:index});applyFilter(canvas,layer,options);}}]);return Filter;}(_react.Component);exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _SpatialResolution=require('./SpatialResolution');var _SpatialResolution2=_interopRequireDefault(_SpatialResolution);var _GrayLevel=require('./GrayLevel');var _GrayLevel2=_interopRequireDefault(_GrayLevel);var _GrayScale=require('./GrayScale');var _GrayScale2=_interopRequireDefault(_GrayScale);var _Histogram=require('./Histogram');var _Histogram2=_interopRequireDefault(_Histogram);var _NoiseReduce=require('./NoiseReduce');var _NoiseReduce2=_interopRequireDefault(_NoiseReduce);var _Sharpen=require('./Sharpen');var _Sharpen2=_interopRequireDefault(_Sharpen);var _BitPlanes=require('./BitPlanes');var _BitPlanes2=_interopRequireDefault(_BitPlanes);var _FloodFill=require('./FloodFill');var _FloodFill2=_interopRequireDefault(_FloodFill);var _BoundaryFill=require('./BoundaryFill');var _BoundaryFill2=_interopRequireDefault(_BoundaryFill);var _Erosion=require('./Erosion');var _Erosion2=_interopRequireDefault(_Erosion);var _DistanceFill=require('./DistanceFill');var _DistanceFill2=_interopRequireDefault(_DistanceFill);var _Skeletonization=require('./Skeletonization');var _Skeletonization2=_interopRequireDefault(_Skeletonization);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Filter:{displayName:'Filter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Filter=_wrapComponent('Filter')(function(_Component){_inherits(Filter,_Component);function Filter(){_classCallCheck(this,Filter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Filter).apply(this,arguments));}_createClass(Filter,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyFilter=_props.applyFilter;var layer=canvas.layers[0];var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Filters'),_react3.default.createElement(_SpatialResolution2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayScale2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayLevel2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Histogram2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_NoiseReduce2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Sharpen2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BitPlanes2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Fills'),_react3.default.createElement(_FloodFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BoundaryFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Erosion2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_DistanceFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Morphs'),_react3.default.createElement(_Skeletonization2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}));}}]);return Filter;}(_react2.Component));exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var FloodFill=function(_ColorFill){_inherits(FloodFill,_ColorFill);function FloodFill(props,content){_classCallCheck(this,FloodFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(FloodFill).call(this,props,content));_this.defaultState={type:'FLOOD_FILL',filter:Filters.floodfill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(FloodFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Target Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Flood Fill'});}}]);return FloodFill;}(_ColorFill3.default);exports.default=FloodFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165}};var GrayLevel=function(_Filter){_inherits(GrayLevel,_Filter);function GrayLevel(props,content){_classCallCheck(this,GrayLevel);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayLevel).call(this,props,content));_this.defaultState={type:'GRAY_LEVEL',disabled:true,level:8,filter:Filters.grayLevel};_this.state=Object.assign({},_this.defaultState);_this.onLevelChange=_this.onLevelChange.bind(_this);return _this;}_createClass(GrayLevel,[{key:'onLevelChange',value:function onLevelChange(event,level){var options={level:level};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:this.state.level+'-bit',disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onLevelChange,min:1,step:1,max:8,value:this.state.level,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Level'});}}]);return GrayLevel;}(_Filter3.default);exports.default=GrayLevel;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var GrayScale=function(_Filter){_inherits(GrayScale,_Filter);function GrayScale(props,content){_classCallCheck(this,GrayScale);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayScale).call(this,props,content));_this.defaultState={type:'GRAY_SCALE',disabled:true,filter:Filters.grayScale,transformMethod:1,constant:1.5,gamma:1};_this.state=Object.assign({},_this.defaultState);_this.onTransformMethodChange=_this.onTransformMethodChange.bind(_this);_this.onConstantChange=_this.onConstantChange.bind(_this);_this.onGammaChange=_this.onGammaChange.bind(_this);return _this;}_createClass(GrayScale,[{key:'onTransformMethodChange',value:function onTransformMethodChange(event,index,value){var options={transformMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onConstantChange',value:function onConstantChange(event,value){var options={constant:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onGammaChange',value:function onGammaChange(event,value){var options={gamma:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.transformMethod,onChange:this.onTransformMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Log'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Power'}))}),_react2.default.createElement(_List.ListItem,{key:'constantField',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.constant,onChange:this.onConstantChange,floatingLabelText:'Constant "c"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'gammaField',style:this.state.transformMethod!==2?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.gamma,onChange:this.onGammaChange,floatingLabelText:'Gamma "γ"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Scale'});}}]);return GrayScale;}(_Filter3.default);exports.default=GrayScale;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Histogram=function(_MaskFilter){_inherits(Histogram,_MaskFilter);function Histogram(props,content){_classCallCheck(this,Histogram);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Histogram).call(this,props,content));_this.defaultState={type:'HISTOGRAM',disabled:true,filter:Filters.histogram,global:true,dimension:5,canvasId:null};_this.state=Object.assign({},_this.defaultState);_this.onLocalityChange=_this.onLocalityChange.bind(_this);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMatchingChange=_this.onMatchingChange.bind(_this);return _this;}_createClass(Histogram,[{key:'onLocalityChange',value:function onLocalityChange(event,index,global){var options={global:global};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMatchingChange',value:function onMatchingChange(event,index,canvasId){var canvases=this.props.canvases;var options={canvasId:canvasId};this.applyFilter(Object.assign({},this.state,Object.assign({},options,{match:canvases.find(function(canvas){return canvas.id===canvasId;})})));this.setState(options);}},{key:'onDimensionChange',value:function onDimensionChange(event,dimension){var layer=this.props.layer;var global=false;if(dimension>=layer.colorBits){global=true;dimension=this.state.dimension;}var options={dimension:dimension,global:global};_get(Object.getPrototypeOf(Histogram.prototype),'onDimensionChange',this).call(this,event,options);}},{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var canvasMenuItems=[];canvases.forEach(function(_canvas){if(canvas.id!==_canvas.id){canvasMenuItems=[].concat(_toConsumableArray(canvasMenuItems),[_react2.default.createElement(_MenuItem2.default,{key:_canvas.id,value:_canvas.id,primaryText:_canvas.title})]);}});var controls=[_react2.default.createElement(_List.ListItem,{key:'equalization',disabled:true,secondaryText:'Equalization',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.global,onChange:this.onLocalityChange},_react2.default.createElement(_MenuItem2.default,{value:true,primaryText:'Global'}),_react2.default.createElement(_MenuItem2.default,{value:false,primaryText:'Local'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',style:this.state.global?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'matching',disabled:true,style:this.state.global?null:{display:'none'},secondaryText:'Matching',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.canvasId,onChange:this.onMatchingChange},_react2.default.createElement(_MenuItem2.default,{value:null,primaryText:'None'}),canvasMenuItems)})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Histogram'});}}]);return Histogram;}(_MaskFilter3.default);exports.default=Histogram;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.spatialResolution=spatialResolution;exports.grayLevel=grayLevel;exports.grayScale=grayScale;exports.histogram=histogram;exports.noiseReduce=noiseReduce;exports.sharpen=sharpen;exports.bitPlanes=bitPlanes;exports.floodfill=floodfill;exports.boundaryFill=boundaryFill;exports.erosion=erosion;exports.distanceFill=distanceFill;exports.skeletonization=skeletonization;var _canvasUtils=require('../../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function subsample(layer,ratio){var width=layer.width*ratio>>0;var height=layer.height*ratio>>0;var averagePixelCountW=layer.width/width>>0;var averagePixelCountH=layer.height/height>>0;var totalAveragePixels=averagePixelCountW*averagePixelCountH;var pixels=[];var colOffset=0;for(var nextRow=0;nextRow<layer.width;nextRow+=averagePixelCountW){colOffset=nextRow*layer.width;for(var nextCol=colOffset;nextCol<colOffset+layer.width;nextCol+=averagePixelCountW){var sum=0;var subIndex=0;for(var nextSubCol=nextCol;nextSubCol<nextCol+averagePixelCountH;nextSubCol++){for(var i=nextSubCol;i<nextSubCol+averagePixelCountW;i++){sum+=layer.pixels[i];if(subIndex+1===totalAveragePixels){pixels.push(Math.round(sum/totalAveragePixels));}subIndex++;}}}}return Object.assign({},layer,{width:width,height:height,pixels:pixels});}function getNeighborColors(layer,index,total,dimension,callback){var half=(dimension-1)/2;var pixels=[];var rowIndex=index/layer.width>>0;callback=callback||function(pixel){};for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;var pixel=layer.pixels[x];if(row===rowTarget&&0<=x&&x<total&&x!=index){pixels.push(pixel);}callback(pixel);}}return pixels;}function getNeighborPixels(layer,index,total,dimension){var half=(dimension-1)/2;var pixelsMap=[];var rowIndex=index/layer.width>>0;for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;if(row===rowTarget&&0<=x&&x<total&&x!=index){pixelsMap.push({pixel:x,color:layer.pixels[x]});}}}return pixelsMap;}function getNeighborhoodColors(layer,index,total,dimension){var neighborhood=[];getNeighborColors(layer,index,layer.pixels.length,3,function(pixel){neighborhood.push(pixel);});return neighborhood;}function padRows(pixels,rows,cols){for(var i=0;i<rows;i++){for(var j=0;j<cols;j++){pixels.push(0);}}}function padData(layer,maskDimension){if(maskDimension<3){return layer.pixels;}var pixels=[];var paddedRows=(maskDimension-1)/2;var paddedCols=(maskDimension-1)/2;var width=layer.width+maskDimension-1;var height=layer.height+maskDimension-1;pixels=[];padRows(pixels,paddedRows,width);for(var y=0;y<layer.height;y++){padRows(pixels,1,paddedCols);var colOffset=y*layer.width;for(var x=colOffset;x<colOffset+layer.width;x++){pixels.push(layer.pixels[x]);}padRows(pixels,1,paddedCols);}padRows(pixels,paddedRows,width);return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function blur(pixel,neighbors,maskDimension){var weight=1/(maskDimension*maskDimension);return neighbors.reduce(function(prev,value){return prev+weight*value;},weight*pixel)>>0;}function min(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[0];}function median(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[(sorted.length-1)/2];}function max(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[sorted.length-1];}function midpoint(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var midpoint=(sorted[0]+sorted[sorted.length-1])/2;return midpoint>>0;}function arithmeticMean(pixel,neighbors,maskDimension){var total=neighbors.reduce(function(prev,value){return prev+value;},pixel);return total/(neighbors.length+1)>>0;}function geometricMean(pixel,neighbors,maskDimension){var product=neighbors.reduce(function(prev,value){return prev*value;},pixel);return Math.pow(product,1/(maskDimension*maskDimension))>>0;}function harmonicMean(pixel,neighbors,maskDimension){var mean=maskDimension*maskDimension/neighbors.reduce(function(prev,value){return prev+1/value;},1/pixel);return mean>>0;}function contraharmonicMean(pixel,neighbors,maskDimension,order){var orderOffset=order+1;var numerator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,orderOffset);},Math.pow(pixel,orderOffset));var denominator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,order);},Math.pow(pixel,order));var mean=numerator/denominator;return mean>>0;}function alphaTrimmedMean(pixel,neighbors,maskDimension,constantD){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var A=Math.floor(constantD/2);var total=sorted.slice(A,sorted.length-A).reduce(function(prev,value){return prev+value;});return total/(maskDimension*maskDimension-2*A)>>0;}function laplace(pixel,neighbors,maskDimension){var midBit=maskDimension*maskDimension-1;var filtered=neighbors.reduce(function(prev,value){return prev-value;},midBit*pixel);filtered=pixel+filtered-Math.min(0,filtered);filtered=255*filtered/Math.max(255,filtered);return filtered>>0;}function highboost(pixel,neighbors,maskDimension,maskFactor){var mask=Math.max(0,pixel-blur(pixel,neighbors,maskDimension));return Math.min(pixel+maskFactor*mask,255);}function getHistogram(pixels,colorBits,total,target){var frequency={};pixels.forEach(function(pixel){frequency[pixel]=(frequency[pixel]||0)+1;});var prev=0;var histogram={};for(var pixel in frequency){prev+=frequency[pixel]/total*colorBits;histogram[pixel]=Math.round(prev);if(pixel==target)return histogram;}return histogram;}function getHistogramValue(layer,index,total,subtotal,dimension){var target=layer.pixels[index];var pixels=getNeighborColors(layer,index,total,dimension);pixels.push(layer.pixels[index]);var histogram=getHistogram(pixels,layer.colorBits,subtotal,target);return histogram[target];}function replication(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){pixels[x]=layer.pixels[pixelOffset+(colIndex++*options.ratio>>0)];}step+=options.ratio;}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bilinear(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){if(colIndex%scaleFactor===0){pixels[x]=layer.pixels[pixelOffset+(colIndex*options.ratio>>0)];}else {pixels[x]=null;}colIndex++;}step+=options.ratio;}layer=Object.assign({},layer,{pixels:pixels,width:width,height:height});for(var i=0;i<pixels.length;i++){if(pixels[i]==null){(function(){var neighbors=getNeighborColors(layer,i,pixels.length,3);var sum=0;var count=0;neighbors.forEach(function(pixel){if(pixel!=null){count++;sum+=pixel;}});pixels[i]=sum/count;})();}}return layer;}function spatialResolution(layer,context,options){layer=subsample(layer,options.ratio);if(options.zoomMethod===1){layer=replication(layer,options);}else if(options.zoomMethod===2){layer=bilinear(layer,options);}return layer;}function grayLevel(layer,context,options){var colorsBits=Math.pow(2,options.level)-1;var ratio=Math.round(255/colorsBits);var pixels=layer.pixels.map(function(pixel){return Math.round(pixel/layer.colorBits*colorsBits)*ratio;});return Object.assign({},layer,{pixels:pixels});}function grayScale(layer,context,options){var pixels=layer.pixels;var c=options.constant;var gamma=options.gamma;if(options.transformMethod===1){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.log(1+r);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}else if(options.transformMethod===2){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.pow(r,gamma);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}return Object.assign({},layer,{pixels:pixels});}function histogram(layer,context,options){var MN=layer.width*layer.height;var pixels=void 0;if(!options.global){(function(){var mn=options.dimension*options.dimension;pixels=layer.pixels.map(function(pixel,index){return getHistogramValue(layer,index,MN,mn,options.dimension);});})();}else {var pixel;(function(){var map=getHistogram(layer.pixels,layer.colorBits,MN);if(options.match){var canvas=options.match;MN=canvas.width*canvas.height;var targetPixels=canvasUtils.getPixels(canvas);var targetMap=getHistogram(targetPixels,256,MN);var targetValues=_lodash2.default.values(targetMap);var matchingMap={};for(pixel in map){var value=map[pixel];var beforePixel=void 0,afterPixel=void 0,targetPixel=void 0;for(targetPixel in targetMap){var targetValue=targetMap[targetPixel];if(targetValue<value){beforePixel=targetPixel;}if(targetValue==value){break;}if(targetValue>value){targetPixel=null;break;}}if(!targetPixel){if(!afterPixel||value-targetMap[beforePixel]<targetMap[afterPixel]-value){targetPixel=beforePixel;}else {targetPixel=afterPixel;}}matchingMap[pixel]=targetPixel;}map=matchingMap;}pixels=layer.pixels.map(function(pixel){return map[pixel];});})();}return Object.assign({},layer,{pixels:pixels});}function noiseReduce(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=blur(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=min(layer.pixels[x],neighbors,options.dimension);}else if(options.method==3){pixel=median(layer.pixels[x],neighbors,options.dimension);}else if(options.method==4){pixel=max(layer.pixels[x],neighbors,options.dimension);}else if(options.method==5){pixel=midpoint(layer.pixels[x],neighbors,options.dimension);}else if(options.method==6){pixel=arithmeticMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==7){pixel=geometricMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==8){pixel=harmonicMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==9){pixel=contraharmonicMean(layer.pixels[x],neighbors,options.dimension,options.order);}else if(options.method=10){pixel=alphaTrimmedMean(layer.pixels[x],neighbors,options.dimension,options.constantD);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function sharpen(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=laplace(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=highboost(layer.pixels[x],neighbors,options.dimension,options.maskFactor);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bitPlanes(layer,context,options){var disabledBits=Object.keys(options.planes).filter(function(bit){return !options.planes[bit];});var binaryReducer=disabledBits.map(function(bit){return {value:bit,binary:(Math.pow(2,bit-1)>>>0).toString(2)};});var pixels=layer.pixels.map(function(pixel){var binary=(pixel>>>0).toString(2);var result=binaryReducer.reduce(function(prev,bit){return prev-(prev.toString().charAt(8-bit.value)==1?bit.binary:'0');},binary);return parseInt(result,2);});return Object.assign({},layer,{pixels:pixels});}function floodfill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var pixels=[].concat(_toConsumableArray(layer.pixels));var initialColor=pixels[pixel];var queue=[pixel];var visited={};layer=Object.assign({},layer,{pixels:pixels});pixels[pixel]=options.targetColor;while(queue.length){var head=queue[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}visited[queue.shift()]=true;}return layer;}function isBoundaryPixel(layer,element,total,initialColor){if(element.color===initialColor){var neighbors=getNeighborColors(layer,element.pixel,total,3);if(neighbors.find(function(neighbor){return neighbor!==initialColor;})!==undefined){return true;}}return false;}function boundaryFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){pixels[neighbor.pixel]=options.targetColor;}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return Object.assign({},layer,{pixels:pixels});}function getBoundaryPixels(layer,options){var queue=[];if(options.xPosition===''||options.yPosition===''){return queue;}var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){queue.push(neighbor.pixel);}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return queue;}function erosion(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var iterations=options.iterations;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(iterations){queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}pixels[head]=options.targetColor;queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}iterations--;}return layer;}function distanceFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var distance=options.targetColor;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});queue.forEach(function(pixel){pixels[pixel]=distance;});while(queue.length){distance=Math.min(layer.colorBits,distance+options.scaleFactor);queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=distance;queue.push(neighbor.pixel);}});}queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}}return layer;} /*
* p9 (0) p2 (1) p3 (2)
* p8 (3) p1 (4) p4 (5)
* p7 (6) p6 (7) p5 (8)
*/function getTransitionCount(neighborhood,initialColor){var count=0; // p2 -> p3
if(neighborhood[1]!==initialColor&&neighborhood[2]===initialColor){count++;} // p3 -> p4
if(neighborhood[2]!==initialColor&&neighborhood[5]===initialColor){count++;} // p4 -> p5
if(neighborhood[5]!==initialColor&&neighborhood[8]===initialColor){count++;} // p5 -> p6
if(neighborhood[8]!==initialColor&&neighborhood[7]===initialColor){count++;} // p6 -> p7
if(neighborhood[7]!==initialColor&&neighborhood[6]===initialColor){count++;} // p7 -> p8
if(neighborhood[6]!==initialColor&&neighborhood[3]===initialColor){count++;} // p8 -> p9
if(neighborhood[3]!==initialColor&&neighborhood[0]===initialColor){count++;} // p9 -> p2
if(neighborhood[0]!==initialColor&&neighborhood[1]===initialColor){count++;}return count;}function zhangSuen(layer,options){var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel]; // for binary images this is usually black
var pixels=[].concat(_toConsumableArray(layer.pixels));var changed=void 0;layer=Object.assign({},layer,{pixels:pixels});var _loop=function _loop(){changed=false;var updated=[];pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P4 or P6 or (P2 and P8)
&&(neighborhood[5]===options.targetColor||neighborhood[7]===options.targetColor||neighborhood[1]===options.targetColor&&neighborhood[3]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P2 or P8 or (P4 and P6)
&&(neighborhood[1]===options.targetColor||neighborhood[3]===options.targetColor||neighborhood[5]===options.targetColor&&neighborhood[7]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});};do {_loop();}while(changed);return layer;}function zhangSuenBFS(layer,options){var queue=getBoundaryPixels(layer,options);var discarded={};var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(queue.length){queue.push(null);var head=queue[0];while(head!==null){if(!discarded[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(neighbor.color===initialColor){ // for each foreground neighbor of head
var neighborhood=getNeighborhoodColors(layer,neighbor.pixel,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1){ // can be removed
pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}else {pixels[neighbor.pixel]=initialColor;discarded[neighbor.pixel]=true;}}});}queue.shift();head=queue[0];}queue.shift();}return layer;}function skeletonization(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}if(options.method===1){return zhangSuen(layer,options);}else if(options.method===2){return zhangSuenBFS(layer,options);}return layer;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&_typeof4(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof4(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof4(obj);};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MaskFilter=function(_Filter){_inherits(MaskFilter,_Filter);function MaskFilter(props,contents){_classCallCheck(this,MaskFilter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(MaskFilter).call(this,props,contents));_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.applyDimensionChange=_lodash2.default.debounce(_this.applyDimensionChange,500);return _this;}_createClass(MaskFilter,[{key:'onDimensionChange',value:function onDimensionChange(event,options){var dimension=(typeof options==='undefined'?'undefined':_typeof(options))==='object'?options.dimension:options;options=Object.assign({},options,{dimension:dimension});this.applyDimensionChange(dimension,options);this.setState(options);}},{key:'applyDimensionChange',value:function applyDimensionChange(dimension,options){dimension=parseInt(dimension);if(dimension<3){dimension=3;}else if(dimension%2===0){dimension=dimension+1;}if(dimension&&Number.isInteger(dimension)){options=Object.assign({},options,{dimension:dimension});this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}}]);return MaskFilter;}(_Filter3.default);exports.default=MaskFilter;;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var NoiseReduce=function(_MaskFilter){_inherits(NoiseReduce,_MaskFilter);function NoiseReduce(props,content){_classCallCheck(this,NoiseReduce);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(NoiseReduce).call(this,props,content));_this.defaultState={type:'NOISE_REDUCE',disabled:true,filter:Filters.noiseReduce,method:1,dimension:3,order:1,constantD:1};_this.state=Object.assign({},_this.defaultState);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onOrderChange=_this.onOrderChange.bind(_this);_this.onConstantDChange=_this.onConstantDChange.bind(_this);return _this;}_createClass(NoiseReduce,[{key:'onDimensionChange',value:function onDimensionChange(event,dimension){if(dimension&&dimension>-1){var constantD=this.clampConstantD(this.state.constantD,dimension);this.applyConstantDChange(constantD,this.state);}_get(Object.getPrototypeOf(NoiseReduce.prototype),'onDimensionChange',this).call(this,event,dimension);}},{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onOrderChange',value:function onOrderChange(event,order){var options={order:order};order=parseFloat(order);if(order&&!Number.isNaN(order)){this.applyFilter(Object.assign({},this.state,{order:order}));}this.setState(options);}},{key:'onConstantDChange',value:function onConstantDChange(event,constantD){var options={constantD:constantD};this.applyConstantDChange(constantD,options);this.setState(options);}},{key:'applyConstantDChange',value:function applyConstantDChange(constantD,options){constantD=parseInt(constantD);constantD=this.clampConstantD(constantD,this.state.dimension);if(order&&Number.isInteger(constantD)){options={constantD:constantD};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}},{key:'clampConstantD',value:function clampConstantD(constantD,dimension){if(constantD<0){constantD=0;}else if(constantD>dimension*dimension-1){constantD=dimension*dimension-1;}return constantD;}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Blur'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Min'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Median'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'Max'}),_react2.default.createElement(_MenuItem2.default,{value:5,primaryText:'Midpoint'}),_react2.default.createElement(_MenuItem2.default,{value:6,primaryText:'Arithmetic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:7,primaryText:'Geometric Mean'}),_react2.default.createElement(_MenuItem2.default,{value:8,primaryText:'Harmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:9,primaryText:'Contraharmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:10,primaryText:'Alpha-trimmed Mean'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'mask_size',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'order',type:'number',disabled:true,style:this.state.method===9?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'order',style:styles.input,value:this.state.order,onChange:this.onOrderChange,floatingLabelText:'Order "Q"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'constantD',type:'number',disabled:true,style:this.state.method===10?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'constant_d',style:styles.input,value:this.state.constantD,onChange:this.onConstantDChange,floatingLabelText:'Alpha "a"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Noise Reduce'});}}]);return NoiseReduce;}(_MaskFilter3.default);exports.default=NoiseReduce;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Sharpen=function(_MaskFilter){_inherits(Sharpen,_MaskFilter);function Sharpen(props,content){_classCallCheck(this,Sharpen);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Sharpen).call(this,props,content));_this.defaultState={type:'SHARPEN',disabled:true,filter:Filters.sharpen,method:1,dimension:3,maskFactor:8};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onMaskFactorChange=_this.onMaskFactorChange.bind(_this);return _this;}_createClass(Sharpen,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMaskFactorChange',value:function onMaskFactorChange(event,maskFactor){var options={maskFactor:maskFactor};maskFactor=parseInt(maskFactor);if(maskFactor<1){maskFactor=1;options={maskFactor:maskFactor};}if(maskFactor&&Number.isInteger(maskFactor)){this.applyFilter(Object.assign({},this.state,options));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Laplacian'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Highboost'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'maskFactor',type:'number',style:this.state.method===1?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'factor',style:styles.input,value:this.state.maskFactor,onChange:this.onMaskFactorChange,floatingLabelText:'Mask Factor "A"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Sharpen'});}}]);return Sharpen;}(_MaskFilter3.default);exports.default=Sharpen;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Skeletonization=function(_ColorFill){_inherits(Skeletonization,_ColorFill);function Skeletonization(props,content){_classCallCheck(this,Skeletonization);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Skeletonization).call(this,props,content));_this.defaultState={type:'SKELETONIZATION',disabled:true,method:1,filter:Filters.skeletonization,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);return _this;}_createClass(Skeletonization,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Zhang-Suen'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Zhang-Suen (BFS)'}))}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Background Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Foreground Pixel',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'seed',style:this.state.method===1?{display:'none'}:undefined,disabled:true,primaryText:'Is Seed',leftCheckbox:_react2.default.createElement(_Checkbox2.default,{disabled:true,checked:true})}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Skeletonization'});}}]);return Skeletonization;}(_ColorFill3.default);exports.default=Skeletonization;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165},select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var SpatialResolution=function(_Filter){_inherits(SpatialResolution,_Filter);function SpatialResolution(props,content){_classCallCheck(this,SpatialResolution);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SpatialResolution).call(this,props,content));_this.defaultState={type:'SPATIAL_RESOLTUION',ratio:1,zoomMethod:1,disabled:true,filter:Filters.spatialResolution};_this.state=Object.assign({},_this.defaultState);_this.onRatioChange=_this.onRatioChange.bind(_this);_this.onZoomMethodChange=_this.onZoomMethodChange.bind(_this);return _this;}_createClass(SpatialResolution,[{key:'onRatioChange',value:function onRatioChange(event,value){var options={ratio:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onZoomMethodChange',value:function onZoomMethodChange(event,index,value){var options={zoomMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var layer=this.props.layer;var resolution='('+Math.floor(layer.width*this.state.ratio)+' X '+Math.floor(layer.height*this.state.ratio)+') ratio = '+this.state.ratio;var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.zoomMethod,onChange:this.onZoomMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Nearest Neighbor'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Bilinear Interpolation'}))}),_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:resolution,disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onRatioChange,min:0.50,step:0.50,value:this.state.ratio,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Spatial Resolution'});}}]);return SpatialResolution;}(_Filter3.default);exports.default=SpatialResolution;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactRouter=require('react-router');var _Home=require('./Home.css');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Home:{displayName:'Home'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Home.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Home.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Home=_wrapComponent('Home')(function(_Component){_inherits(Home,_Component);function Home(){_classCallCheck(this,Home);return _possibleConstructorReturn(this,Object.getPrototypeOf(Home).apply(this,arguments));}_createClass(Home,[{key:'render',value:function render(){return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Home2.default.container},_react3.default.createElement('h2',null,'Home'),_react3.default.createElement(_reactRouter.Link,{to:'/counter'},'to Counter')));}}]);return Home;}(_react2.Component));exports.default=Home;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Option2=require('./Option');var _Option3=_interopRequireDefault(_Option2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var Compression=function(_Option){_inherits(Compression,_Option);function Compression(props,content){_classCallCheck(this,Compression);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Compression).call(this,props,content));_this.defaultState={type:'COMPRESSION',disabled:true,method:1,mode:2};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onModeChange=_this.onModeChange.bind(_this);return _this;}_createClass(Compression,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'onModeChange',value:function onModeChange(event,index,mode){var options={mode:mode};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'method',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Run Length Encoding'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Huffman Tree'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Differential PCM'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'LZW'}))}),_react2.default.createElement(_List.ListItem,{key:'mode',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.mode,onChange:this.onModeChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'ASCII'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Binary'}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Compression'});}}]);return Compression;}(_Option3.default);exports.default=Compression;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Option=function(_Component){_inherits(Option,_Component);function Option(props,content){_classCallCheck(this,Option);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Option).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyOption=_lodash2.default.debounce(_this.applyOption,500);return _this;}_createClass(Option,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.canvas.options[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var applyOption=_props.applyOption;applyOption(canvas,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyOption',value:function applyOption(option){var _props2=this.props;var canvas=_props2.canvas;var applyOption=_props2.applyOption;var index=_props2.index;option=Object.assign({},option,{index:index});applyOption(canvas,option);}}]);return Option;}(_react.Component);exports.default=Option;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Compression=require('./Compression');var _Compression2=_interopRequireDefault(_Compression);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Options:{displayName:'Options'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/options/Options.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/options/Options.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Options=_wrapComponent('Options')(function(_Component){_inherits(Options,_Component);function Options(){_classCallCheck(this,Options);return _possibleConstructorReturn(this,Object.getPrototypeOf(Options).apply(this,arguments));}_createClass(Options,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyOption=_props.applyOption;var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Options'),_react3.default.createElement(_Compression2.default,{index:index++,canvas:canvas,applyOption:applyOption}));}}]);return Options;}(_react2.Component));exports.default=Options;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Drawer=require('material-ui/Drawer');var _Drawer2=_interopRequireDefault(_Drawer);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _Options=require('../containers/Options');var _Options2=_interopRequireDefault(_Options);var _Filters=require('../containers/Filters');var _Filters2=_interopRequireDefault(_Filters);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Sidebar:{displayName:'Sidebar'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Sidebar.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Sidebar.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles={input:{marginTop:-35,width:220}};var Sidebar=_wrapComponent('Sidebar')(function(_Component){_inherits(Sidebar,_Component);function Sidebar(){_classCallCheck(this,Sidebar);return _possibleConstructorReturn(this,Object.getPrototypeOf(Sidebar).apply(this,arguments));}_createClass(Sidebar,[{key:'render',value:function render(){var _props=this.props;var open=_props.open;var canvas=_props.canvas;var applyFilter=_props.applyFilter;if(!canvas){return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'No Selected Canvas')));}return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Canvas'),_react3.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:"Canvas "+canvas.id,floatingLabelText:'Name',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'width',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.width,floatingLabelText:'Width',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'height',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.height,floatingLabelText:'Height',disabled:true})}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Layers'),canvas.layers.length?canvas.layers.map(function(layer,index){return _react3.default.createElement(_List.List,{key:"layer_"+index},_react3.default.createElement(_List.ListItem,{primaryText:"Layer "+index,secondaryText:_react3.default.createElement('p',{style:{wordWrap:"break-word"}},layer.filepath),secondaryTextLines:2,disabled:true}),layer.compressionRatio?_react3.default.createElement(_List.ListItem,{primaryText:'Compression Ratio',disabled:true,secondaryText:layer.compressionRatio+':1'}):null);}):_react3.default.createElement(_List.ListItem,{primaryText:'Empty',disabled:true})),_react3.default.createElement(_Divider2.default,null),canvas.layers.length?_react3.default.createElement(_Options2.default,{canvas:canvas}):null,canvas.layers.length?_react3.default.createElement(_Divider2.default,null):null,canvas.layers.length?_react3.default.createElement(_Filters2.default,{canvas:canvas}):null);}}]);return Sidebar;}(_react2.Component));exports.default=Sidebar;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={SidebarGroup:{displayName:'SidebarGroup'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var SidebarGroup=_wrapComponent('SidebarGroup')(function(_Component){_inherits(SidebarGroup,_Component);function SidebarGroup(props,content){_classCallCheck(this,SidebarGroup);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SidebarGroup).call(this,props,content));_this.state={checked:false};_this.onChecked=_this.onChecked.bind(_this);return _this;}_createClass(SidebarGroup,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState({checked:nextProps.checked});}},{key:'onChecked',value:function onChecked(event){var onChecked=this.props.onChecked;this.setState({checked:!this.state.checked});onChecked(event,!this.state.checked);event.stopPropagation();}},{key:'render',value:function render(){var _props=this.props;var title=_props.title;var controls=_props.controls;var checkbox=_props.checkbox;return _react3.default.createElement(_List.ListItem,{primaryText:title,nestedItems:controls,leftCheckbox:checkbox?_react3.default.createElement(_Checkbox2.default,{checked:this.state.checked,onClick:this.onChecked}):null});}}]);return SidebarGroup;}(_react2.Component));exports.default=SidebarGroup;SidebarGroup.defaultProps={onChecked:function onChecked(){}};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Canvas=require('../containers/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _Canvas3=require('../components/Canvas');var _electron=require('electron');var _Workspace=require('./Workspace.css');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Workspace:{displayName:'Workspace'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Workspace.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Workspace.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Workspace=_wrapComponent('Workspace')(function(_Component){_inherits(Workspace,_Component);function Workspace(props,content){_classCallCheck(this,Workspace);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Workspace).call(this,props,content));_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);_this.loadImage=_this.loadImage.bind(_this);_this.saveImage=_this.saveImage.bind(_this);return _this;}_createClass(Workspace,[{key:'componentDidMount',value:function componentDidMount(){_electron.ipcRenderer.on('load-image',this.loadImage);_electron.ipcRenderer.on('save-image',this.saveImage);}},{key:'componentWillUnmount',value:function componentWillUnmount(){_electron.ipcRenderer.removeAllListeners('load-image');_electron.ipcRenderer.removeAllListeners('save-image');}},{key:'onCanvasSelect',value:function onCanvasSelect(canvas){var selectCanvas=this.props.selectCanvas;selectCanvas(canvas);}},{key:'loadImage',value:function loadImage(event,canvas){var _props=this.props;var canvases=_props.canvases;var addCanvas=_props.addCanvas;var removeCanvas=_props.removeCanvas;if(!canvases[0].id){removeCanvas(canvases[0]);}var width=canvas.imageFile.width;var height=canvas.imageFile.height;var paths=canvas.imageFile.filepath.split('\\');addCanvas(Object.assign({},_Canvas3.canvasProps,{id:canvas.id,title:paths[paths.length-1],width:width,height:height,layers:[Object.assign({},canvas.imageFile,{filters:{}})],options:{},status:'rendering'}));}},{key:'saveImage',value:function saveImage(event,destination){var _props2=this.props;var canvases=_props2.canvases;var saveImage=_props2.saveImage;var canvas=canvases.find(function(canvas){return canvas.selected;});if(canvas.layers.length){saveImage(canvas,destination);}}},{key:'render',value:function render(){var _this2=this;var _props3=this.props;var canvases=_props3.canvases;var sidebarOpen=_props3.sidebarOpen;var connectDropTarget=_props3.connectDropTarget;return connectDropTarget(_react3.default.createElement('div',{className:_Workspace2.default.workspace,style:{width:'calc(100% - '+(sidebarOpen?256:0)+'px)',marginLeft:(sidebarOpen?256:0)+'px'}},canvases.map(function(canvas,index){return _react3.default.createElement(_Canvas2.default,{key:index,canvas:canvas,onSelect:_this2.onCanvasSelect});})));}}]);return Workspace;}(_react2.Component));exports.default=Workspace;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={App:{displayName:'App'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/App.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/App.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var App=_wrapComponent('App')((_temp=_class=function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,Object.getPrototypeOf(App).apply(this,arguments));}_createClass(App,[{key:'render',value:function render(){return _react3.default.createElement('div',null,this.props.children,function(){if(process.env.NODE_ENV!=='production'){var DevTools=require('./DevTools'); // eslint-disable-line global-require
return _react3.default.createElement(DevTools,null);}}());}}]);return App;}(_react2.Component),_class.propTypes={children:_react2.PropTypes.element.isRequired},_temp));exports.default=App;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _Canvas=require('../components/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var canvasSource={beginDrag:function beginDrag(props,monitor,component){var canvas=props.canvas;var rect=component.refs.canvas.getBoundingClientRect();return Object.assign({},canvas,{left:rect.left,top:rect.top-50});}};function collect(connect,monitor){return {connectDragSource:connect.dragSource(),connectDragPreview:connect.dragPreview(),isDragging:monitor.isDragging()};}function mapStateToProps(state){return {};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragSource)(_ItemTypes2.default.CANVAS,canvasSource,collect)(_Canvas2.default));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Counter=require('../components/Counter');var _Counter2=_interopRequireDefault(_Counter);var _counter=require('../actions/counter');var CounterActions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {counter:state.counter};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(CounterActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Counter2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reduxDevtools=require('redux-devtools');var _reduxDevtoolsLogMonitor=require('redux-devtools-log-monitor');var _reduxDevtoolsLogMonitor2=_interopRequireDefault(_reduxDevtoolsLogMonitor);var _reduxDevtoolsDockMonitor=require('redux-devtools-dock-monitor');var _reduxDevtoolsDockMonitor2=_interopRequireDefault(_reduxDevtoolsDockMonitor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_reduxDevtools.createDevTools)(_react2.default.createElement(_reduxDevtoolsDockMonitor2.default,{toggleVisibilityKey:'ctrl-h',changePositionKey:'ctrl-q'},_react2.default.createElement(_reduxDevtoolsLogMonitor2.default,null)));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Editor=require('../components/Editor');var _Editor2=_interopRequireDefault(_Editor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_Editor2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Filters=require('../components/filters/Filters');var _Filters2=_interopRequireDefault(_Filters);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Filters2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Home=require('../components/Home');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof4(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof4(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={HomePage:{displayName:'HomePage'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/HomePage.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/HomePage.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var HomePage=_wrapComponent('HomePage')(function(_Component){_inherits(HomePage,_Component);function HomePage(){_classCallCheck(this,HomePage);return _possibleConstructorReturn(this,Object.getPrototypeOf(HomePage).apply(this,arguments));}_createClass(HomePage,[{key:'render',value:function render(){return _react3.default.createElement(_Home2.default,null);}}]);return HomePage;}(_react2.Component));exports.default=HomePage;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default={CANVAS:'canvas'};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Options=require('../components/options/Options');var _Options2=_interopRequireDefault(_Options);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Options2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _reactDndHtml5Backend=require('react-dnd-html5-backend');var _reactDndHtml5Backend2=_interopRequireDefault(_reactDndHtml5Backend);var _Workspace=require('../components/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);var _WorkspaceActions=require('../actions/WorkspaceActions');var workspaceActions=_interopRequireWildcard(_WorkspaceActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var editorTarget={drop:function drop(props,monitor,component){var moveCanvas=props.moveCanvas;var sidebarOpen=props.sidebarOpen;var item=monitor.getItem();var delta=monitor.getDifferenceFromInitialOffset();var left=Math.round(item.left+delta.x)-(sidebarOpen?256:0);var top=Math.round(item.top+delta.y);moveCanvas(Object.assign({},item,{left:left,top:top}));}};function collect(connect){return {connectDropTarget:connect.dropTarget()};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(workspaceActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)((0,_reactDnd.DropTarget)(_ItemTypes2.default.CANVAS,editorTarget,collect)(_Workspace2.default)));module.exports=exports['default'];'use strict';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactRedux=require('react-redux');var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _routes=require('./routes');var _routes2=_interopRequireDefault(_routes);var _configureStore=require('./store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);var _getMuiTheme=require('material-ui/styles/getMuiTheme');var _getMuiTheme2=_interopRequireDefault(_getMuiTheme);var _MuiThemeProvider=require('material-ui/styles/MuiThemeProvider');var _MuiThemeProvider2=_interopRequireDefault(_MuiThemeProvider);var _reactTapEventPlugin=require('react-tap-event-plugin');var _reactTapEventPlugin2=_interopRequireDefault(_reactTapEventPlugin);require('./app.global.css');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var store=(0,_configureStore2.default)();var history=(0,_reactRouterRedux.syncHistoryWithStore)(_reactRouter.hashHistory,store);(0,_reactTapEventPlugin2.default)();(0,_reactDom.render)(_react2.default.createElement(_MuiThemeProvider2.default,{muiTheme:(0,_getMuiTheme2.default)()},_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_reactRouter.Router,{history:history,routes:_routes2.default}))),document.getElementById('root'));'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=counter;var _counter=require('../actions/counter');function counter(){var state=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var action=arguments[1];switch(action.type){case _counter.INCREMENT_COUNTER:return state+1;case _counter.DECREMENT_COUNTER:return state-1;default:return state;}}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRouterRedux=require('react-router-redux');var _Canvas=require('../components/Canvas');var _WorkspaceActions=require('../actions/WorkspaceActions');var _counter=require('./counter');var _counter2=_interopRequireDefault(_counter);var _renderer=require('./renderer');var _renderer2=_interopRequireDefault(_renderer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function workspaceReducer(){var state=arguments.length<=0||arguments[0]===undefined?[Object.assign({},_Canvas.canvasProps,{selected:true})]:arguments[0];var action=arguments[1];state=(0,_renderer2.default)(state,action);var status=void 0;if(action.type===_WorkspaceActions.COMPRESS_IMAGE||action.type===_WorkspaceActions.SAVE_IMAGE){return state.map(function(canvas){if(canvas.id===action.payload.id){return action.payload;}return canvas;});}return state;}var rootReducer=(0,_redux.combineReducers)({ //counter,
canvases:workspaceReducer,routing:_reactRouterRedux.routerReducer});exports.default=rootReducer;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=renderer;var _WorkspaceActions=require('../actions/WorkspaceActions');var _CanvasActions=require('../actions/CanvasActions');var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function canvasRenderer(state,action){if(!state.id||action.payload.id!==state.id){return state;}if(action.type===_CanvasActions.INIT_CONTEXT&&!state.context){return action.payload;}if(action.type===_CanvasActions.APPLY_OPTION){return action.payload;}if(action.type===_CanvasActions.APPLY_FILTER){return Object.assign({},action.payload,{status:'rendering'});}if(action.type===_CanvasActions.RENDER_LAYER){return Object.assign({},state,action.payload,{status:'ready'});}if(action.type===_CanvasActions.RENDER_LAYERS){return Object.assign({},state,action.payload,{status:'ready'});}return state;}function renderer(state,action){state=state.map(function(canvas){return canvasRenderer(canvas,action);});if(action.type===_WorkspaceActions.ADD_CANVAS){return [].concat(_toConsumableArray(state.map(function(canvas){return Object.assign({},canvas,{selected:false});})),[Object.assign({},action.payload,{selected:true})]);}if(action.type===_WorkspaceActions.REMOVE_CANVAS){return state.filter(function(canvas){return canvas!==action.payload;});}if(action.type===_WorkspaceActions.MOVE_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,action.payload);}return canvas;});}if(action.type===_WorkspaceActions.SELECT_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,{selected:true});}return Object.assign({},canvas,{selected:false});});}return state;}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactRouter=require('react-router');var _App=require('./containers/App');var _App2=_interopRequireDefault(_App);var _Editor=require('./containers/Editor');var _Editor2=_interopRequireDefault(_Editor);var _CounterPage=require('./containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=_react2.default.createElement(_reactRouter.Route,{path:'/',component:_App2.default},_react2.default.createElement(_reactRouter.IndexRoute,{component:_Editor2.default}),'/* ',_react2.default.createElement(_reactRouter.Route,{path:'/counter',component:_CounterPage2.default}),' */');module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxDevtools=require('redux-devtools');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reduxLogger=require('redux-logger');var _reduxLogger2=_interopRequireDefault(_reduxLogger);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);var _DevTools=require('../containers/DevTools');var _DevTools2=_interopRequireDefault(_DevTools);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var logger=(0,_reduxLogger2.default)({level:'info',collapsed:true});var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.compose)((0,_redux.applyMiddleware)(_reduxThunk2.default,router,logger),_DevTools2.default.instrument(),(0,_reduxDevtools.persistState)(window.location.href.match(/[?&]debug_session=([^&]+)\b/)));function configureStore(initialState){var store=(0,_redux.createStore)(_reducers2.default,initialState,enhancer);if(module.hot){module.hot.accept('../reducers',function(){return store.replaceReducer(require('../reducers'));} // eslint-disable-line global-require
);}return store;}module.exports=exports['default'];'use strict';if(process.env.NODE_ENV==='production'){module.exports=require('./configureStore.production'); // eslint-disable-line global-require
}else {module.exports=require('./configureStore.development'); // eslint-disable-line global-require
}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.applyMiddleware)(_reduxThunk2.default,router);function configureStore(initialState){return (0,_redux.createStore)(_reducers2.default,initialState,enhancer);}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.createVertexShader=createVertexShader;exports.createFragmentShader=createFragmentShader;exports.initContext=initContext;exports.renderLayer=renderLayer;exports.getPixels=getPixels;exports.getPixel=getPixel;exports.cleanUp=cleanUp;exports.runLengthEncode=runLengthEncode;exports.huffmanEncode=huffmanEncode;exports.lzwEncode=lzwEncode;exports.exportCanvasAsImage=exportCanvasAsImage;var _imageSpatial=require('../shaders/image-spatial.vert');var _imageSpatial2=_interopRequireDefault(_imageSpatial);var _imageRaster=require('../shaders/image-raster.frag');var _imageRaster2=_interopRequireDefault(_imageRaster);var _stream=require('stream');var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);var _HuffmanTree=require('./HuffmanTree');var _HuffmanTree2=_interopRequireDefault(_HuffmanTree);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function isError(gl,shader){if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){var info=gl.getShaderInfoLog(shader);gl.deleteShader(shader);console.error("Could not compile vertex shader. \n\n"+info);return true;}return false;}function createVertexShader(gl,program){var shader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(shader,_imageSpatial2.default);gl.compileShader(shader);if(isError(gl,shader)){return null;}return shader;}function createFragmentShader(gl,program){var shader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(shader,_imageRaster2.default);gl.compileShader(shader);if(isError(gl,shader)){return;}return shader;}function initContext(canvas,gl){var context={gl:gl}; //create and init shaders
var program=gl.createProgram();var vertexShader=createVertexShader(gl,program);var fragmentShader=createFragmentShader(gl,program);if(!vertexShader||!fragmentShader){gl.deleteProgram(program);return;}gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){var info=gl.getProgramInfoLog(program);console.error("Error in program linking:"+info);cleanUp(context);return;}gl.useProgram(program); //create texture coordinate buffer
var vertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0]),gl.STATIC_DRAW); //specify the location of the texture coordinate data
var texCoordInLocation=gl.getAttribLocation(program,"a_texCoord");gl.enableVertexAttribArray(texCoordInLocation);gl.vertexAttribPointer(texCoordInLocation,2,gl.FLOAT,false,0,0); // set the resolution
var resolutionLocation=gl.getUniformLocation(program,"u_resolution");gl.uniform2f(resolutionLocation,canvas.width,canvas.height);return Object.assign({},context,{program:program,vertexShader:vertexShader,fragmentShader:fragmentShader});}function isPowerOfTwo(x){return (x&x-1)==0;}function nextHighestPowerOfTwo(x){--x;for(var i=1;i<32;i<<=1){x=x|x>>i;}return x+1;}function renderLayer(context,layer,layerIndex){if(layerIndex>31){console.error("Only up to 32 layers per Canvas is supported");return;}var gl=context.gl; // apply filters
var filters=_lodash2.default.values(layer.filters).sort(function(a,b){return a.index-b.index;});filters.forEach(function(options){if(!options.disabled){layer=options.filter(layer,context,options);}});var register=gl['TEXTURE'+layerIndex];var program=context.program;var width=isPowerOfTwo(layer.width)?layer.width:nextHighestPowerOfTwo(layer.width);var height=isPowerOfTwo(layer.height)?layer.height:nextHighestPowerOfTwo(layer.height);var texture=gl.createTexture();var pixels=new Uint8Array(3*width*height);var offset=width-layer.width;var index=0;var rowIndex=0; //map pixels for grayscale
layer.pixels.forEach(function(pixel){var remaining=layer.width-index;if(remaining%layer.width===0){rowIndex=index/layer.width;}pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;}); //create pixel data buffer
var textureBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,textureBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,width,0.0,0.0,height,0.0,height,width,0.0,width,height]),gl.STATIC_DRAW); //specify the location of the pixel position data
var positionLocation=gl.getAttribLocation(program,"a_position");gl.enableVertexAttribArray(positionLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,0,0); //config texture
gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,width,height,0,gl.RGB,gl.UNSIGNED_BYTE,pixels); //render
gl.clearColor(0.0,0.0,0.0,1.0);gl.clear(gl.COLOR_BUFFER_BIT);gl.activeTexture(register);gl.drawArrays(gl.TRIANGLES,0,6); // cleanup
gl.deleteBuffer(textureBuffer);gl.deleteTexture(texture);}function getPixels(canvas){var gl=canvas.context.gl;var pixels=new Uint8Array(4*canvas.width*canvas.height);gl.readPixels(0,0,canvas.width,canvas.height,gl.RGBA,gl.UNSIGNED_BYTE,pixels);var last=pixels.length/4-1;var rawPixels=[];var index=last;var offset=0;for(var i=0;i<pixels.length;i+=4){var pixel=Math.round((pixels[i]+pixels[i+1]+pixels[i+2])/3);if((index+1)%canvas.width===0){offset=index;}rawPixels[offset+(offset-index--)]=pixel;}return rawPixels;}function getPixel(canvas,x,y){var gl=canvas.context.gl;var pixel=new Uint8Array(4);gl.readPixels(x,canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel);return pixel[0];}function cleanUp(context){if(!context){return;}var gl=context.gl;gl.deleteProgram(context.program);gl.deleteShader(context.vertexShader);gl.deleteShader(context.fragmentShader);}function runLengthEncode(stream,pixels,width,height,mode){var magicNumber='E2';var count=1;var prev=void 0;if(mode===1){magicNumber='E1';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel,index){if(prev===pixel){count++;}else if(prev!==undefined&&prev!==pixel){if(mode===1){ // ASCII
stream.write(prev+' '+count+(index===pixels.length-1?'\n':' '));}else { // BIN
var pixelBuffer=new Buffer.allocUnsafe(1);var countBuffer=new Buffer(4);pixelBuffer.writeUInt8(prev);countBuffer.writeUInt32BE(count);stream.write(pixelBuffer);stream.write(countBuffer);}count=1;}prev=pixel;});}function huffmanEncode(stream,pixels,width,height,mode){var histogram={};pixels.forEach(function(pixel){if(histogram[pixel]){histogram[pixel]++;}else {histogram[pixel]=1;}});var tree=new _HuffmanTree2.default(histogram,',',pixels.length);var codeBook={};tree.leaves.forEach(function(node){if(node===tree.root){return;}var token=node.token;codeBook[token]=node.bit;while(node.parent!==tree.root){node=node.parent;codeBook[token]=node.bit+codeBook[token];}});var encoded='';pixels.forEach(function(pixel,index){encoded+=codeBook[pixel.toString()];});var chunks=encoded.match(/.{1,8}/g);var magicNumber='E4';if(mode===1){magicNumber='E3';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');Object.keys(codeBook).forEach(function(key){var buffer=new Buffer(2);buffer.writeUInt8(parseInt(key));buffer.writeUInt8(parseInt(codeBook[key],2),1);stream.write(buffer);});stream.write('\n');chunks.forEach(function(chunk,index){var byte=parseInt(chunk,2);if(mode===1){ // ASCII
stream.write(byte+' ');}else { // BIN
var buffer=new Buffer(1);buffer.writeUInt8(byte);stream.write(buffer);}});}function lzwEncode(stream,pixels,width,height,mode){var max=Math.pow(2,16);var writeBytes=function writeBytes(bytes){if(mode===1){ // ASCII
stream.write(bytes+' ');}else { // BIN
var buffer=new Buffer(2);buffer.writeUInt16BE(bytes);stream.write(buffer);}};var output=void 0;var index=255;var prev='';var dictionary={};var magicNumber='E6';if(mode===1){magicNumber='E5';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel){var key=prev+' '+pixel;if(dictionary[key]){prev=key;}else {output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);if(index+1>255){dictionary[key]=++index;}prev=pixel;}});output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);}function exportCanvasAsImage(canvas,destination){var stream=_fs2.default.createWriteStream(destination);var pixels=getPixels(canvas);var method=canvas.options.COMPRESSION?canvas.options.COMPRESSION.method:0;var mode=canvas.options.COMPRESSION?canvas.options.COMPRESSION.mode:0;if(method===1){ // Run length encoding
runLengthEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===2){ // huffman
huffmanEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===3){ // differential PCM
}else if(method===4){ // LZW
lzwEncode(stream,pixels,canvas.width,canvas.height,mode);}else {stream.write('P5\n'+canvas.width+' '+canvas.height+'\n255\n');pixels.forEach(function(pixel,index){var buffer=new Buffer.allocUnsafe(1);buffer.writeUInt8(pixel);stream.write(buffer);});}stream.end();}'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var HuffmanTree=function HuffmanTree(histogram,seperator,total){_classCallCheck(this,HuffmanTree);seperator=seperator||'';var nodes=Object.keys(histogram).map(function(key){return {token:key.toString(),probability:histogram[key]/total,parent:null};});nodes.sort(function(current,next){return current.probability-next.probability;});this.leaves=[].concat(_toConsumableArray(nodes));while(nodes.length){var current=nodes.shift();var next=nodes.shift();if(next){var parent={token:current.token+seperator+next.token,probability:current.probability+next.probability,left:current,right:next};current.parent=parent;current.bit='0';next.parent=parent;next.bit='1';nodes.push(parent);if(parent.probability<nodes[nodes.length-1].probability){nodes.sort(function(current,next){return current.probability-next.probability;});}}else {this.root=current;}}};exports.default=HuffmanTree;module.exports=exports['default'];"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runLengthDecode=runLengthDecode;function runLengthDecode(data){var pixels=[];var prev=void 0;data.forEach(function(value,index){if(index%2===1){var count=value;for(var i=0;i<count;i++){pixels.push(prev);}}prev=value;});return pixels;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lineReader=require('line-reader');var _lineReader2=_interopRequireDefault(_lineReader);var _PBMFileReader=require('./PBMFileReader');var _PBMFileReader2=_interopRequireDefault(_PBMFileReader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var PBM_COMPRESSED_FORMATS={ //"E1" : "PGM_ASCII_RLE_COMPRESSED",
"E2":"PGM_BIN_RLE_COMPRESSED", //"E3" : "PGM_ASCII_HME_COMPRESSED",
"E4":"PGM_BIN_HME_COMPRESSED", //"E5" : "PGM_ASCII_LZW_COMPRESSED",
"E6":"PGM_BIN_LZW_COMPRESSED"};var PBM_IMAGE_FORMATS=Object.assign({},{ //"P1" : "PBM_ASCII",
"P2":"PGM_ASCII", //"P3" : "PPM_ASCII",
//"P4" : "PBM_BIN",
"P5":"PGM_BIN"}, //"P6" : "PPM_BIN",
PBM_COMPRESSED_FORMATS);var PBMAsciiReader=function(){function PBMAsciiReader(filepath,onLine,onClose){var _this=this;_classCallCheck(this,PBMAsciiReader);var index=0;_lineReader2.default.eachLine(filepath,function(line,last){if(onLine){onLine(line,index++,last);}if(last||_this.error){onClose(_this.error);return false;}});}_createClass(PBMAsciiReader,[{key:'close',value:function close(error){this.error=error;}}]);return PBMAsciiReader;}();var ImageFile=function(){function ImageFile(filepath){_classCallCheck(this,ImageFile);this.filepath=filepath;this.length=0;this.pixels=[];}_createClass(ImageFile,[{key:'on',value:function on(event,callback){this[event]=callback;}},{key:'load',value:function load(){var _this2=this;var onLoad=this['load-data']||function(){};var onError=this['load-error']||function(error){};var onComplete=this['load-complete']||function(){};var complete=function complete(){var length=_this2.pixels.length*8;if(_this2.length!==length){_this2.compressionRatio=Math.ceil(length/_this2.length);}onComplete();console.log('Loaded image: '+_this2.filepath+' '+_this2.width+' '+_this2.height+' '+_this2.colorBits);};var getImagePixels=function getImagePixels(pixels){_this2.length+=pixels.length;pixels.forEach(function(pixel){_this2.pixels.push(pixel);});return pixels;};var fd=_fs2.default.openSync(this.filepath,'r');if(!fd){onError('Unable to open file');return;}var header=new Buffer(2);_fs2.default.readSync(fd,header,0,2,0);this.format=PBM_IMAGE_FORMATS[header.toString()];if(!this.format){_fs2.default.close(fd,function(){return onError('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));});}else {if(this.format.indexOf('_ASCII')!==-1){(function(){_fs2.default.close(fd);var reader=new PBMAsciiReader(_this2.filepath,function(line,index){if(index===0)return;if(!line.startsWith('#')){if(!_this2.width&&!_this2.height){var resolution=line.split(/\s+/);_this2.width=parseInt(resolution[0]);_this2.height=parseInt(resolution[1]);}else if(!_this2.colorBits){_this2.colorBits=parseInt(line);}else if(_this2['load-init']){_this2['load-init']();delete _this2['load-init'];onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else if(onLoad){onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else {reader.close('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));}}},function(err){if(err){onError(err);}else {complete();}});})();}else if(this.format.indexOf('_BIN')!==-1){var _reader=new _PBMFileReader2.default(fd,this.format);Object.assign(this,_reader.getInfo());this['load-init']();this.length=_reader.readPixels(function(pixels){return onLoad(getImagePixels(pixels));},64);_fs2.default.close(fd,complete);}else {fd.close(fd,function(){return onError('Unexpected error');});}}}}]);return ImageFile;}();exports.default=ImageFile;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _typeof=typeof Symbol==="function"&&_typeof4(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof4(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof4(obj);};var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _imageUtils=require('./image-utils');var imageUtils=_interopRequireWildcard(_imageUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function defaultReducer(pixels){return pixels;}function readBytes(fd,position){var length=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var buffer=new Buffer(length);var size=_fs2.default.readSync(fd,buffer,0,length,position);if(length!==size){buffer=Buffer.from(buffer,0,size);}return buffer;}function getUTF8String(fd,offset,term){var content='';var buffer=new Buffer(1);if(offset){readBytes(fd,offset);}var _loop=function _loop(){buffer=readBytes(fd);var val=buffer.toString();if(!term){return {v:val};}else if(Array.isArray(term)&&term.find(function(term){return val===term;})){return {v:content};}else if(val===term){return {v:content};}else {content+=val;}};while(buffer.length){var _ret=_loop();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}}function readPGMBinary(fd,collector,position,term){collector=collector||function(){};var buffer=readBytes(fd,position);var length=0;while(buffer.length){length+=8;collector(buffer);buffer=readBytes(fd);if(term&&term==buffer.toString()){break;}}return length;}function readPGMCompressedRLE(fd,collector,position){collector=collector||function(){};var pixelBuffer=readBytes(fd,position);var length=0;while(pixelBuffer.length){length+=8;collector(pixelBuffer);var countBuffer=new Buffer(4);for(var i=0;i<4;i++){ // read 4 bytes or a 32 bit unsigned integer
countBuffer[i]=readBytes(fd)[0];}length+=32;collector(countBuffer);pixelBuffer=readBytes(fd);}return length;}function readPGMCompressedHME(fd,collector,position){var index=0;var codeBook={};var value=void 0;var length=0;readPGMBinary(fd,function(buffer){if(index++%2===0){value=buffer.readUInt8(0);}else {codeBook[buffer.readUInt8(0).toString(2)]=value;}length+=8;},position,'\n');var encoded='';readPGMBinary(fd,function(buffer){var binary=buffer.readUInt8(0).toString(2);encoded+="00000000".substring(0,8-binary.length)+binary;length+=8;});value=null;var code='';for(var i=0;i<encoded.length;i++){code+=encoded.charAt(i);value=codeBook[code];if(value!==null){collector(value);code='';value=null;}}return length;}function readPGMCompressedLZW(fd,collector,position){collector=collector||function(){};var buffer=readBytes(fd,position,2);var prev=void 0;var index=255;var dictionary={};var length=0;while(buffer.length){length+=16;var bytes=buffer.readUInt16BE(0);var pixels=dictionary[bytes]?dictionary[bytes].split(' '):[bytes];pixels.forEach(function(pixel){collector(parseInt(pixel));});if(prev!==undefined){dictionary[++index]=prev+' '+pixels[0];}prev=pixels.join(' ');buffer=readBytes(fd,2);}return length;}var PBMFileReader=function(){function PBMFileReader(fd,format){_classCallCheck(this,PBMFileReader);this.fd=fd;this.format=format;}_createClass(PBMFileReader,[{key:'getInfo',value:function getInfo(){var width=void 0,height=void 0,colorBits=void 0;var str=getUTF8String(this.fd,2,[' ','\n']);while(str&&(!width||!height||!colorBits)){if(str.indexOf('#')===0){str=getUTF8String(this.fd,null,'\n');}else if(!width){width=parseInt(str);str=getUTF8String(this.fd,null,[' ','\n']);}else if(!height){height=parseInt(str);str=getUTF8String(this.fd,null,'\n');}else if(!colorBits){colorBits=parseInt(str);if(!colorBits){str=getUTF8String(this.fd,null,'\n');}}}return {width:width,height:height,colorBits:colorBits};}},{key:'readPixels',value:function readPixels(onRead,batchSize){var processor=defaultReducer;var pixels=[];var length=0;var collector=function collector(data){if(data!==undefined){if(Number.isInteger(data)){pixels.push(data);}else if(data.length===4){pixels.push(data.readUInt32BE(0));}else {pixels.push(data.readUInt8(0));}if(pixels.length===batchSize){onRead(processor(pixels));pixels=[];}}};if(this.format.indexOf('PGM_BIN_RLE')===0){processor=imageUtils.runLengthDecode;length=readPGMCompressedRLE(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_HME')===0){length=readPGMCompressedHME(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_LZW')===0){length=readPGMCompressedLZW(this.fd,collector);}else if(this.format.indexOf('PGM_BIN')===0){length=readPGMBinary(this.fd,collector);}if(pixels.length){onRead(processor(pixels));}return length;}}]);return PBMFileReader;}();exports.default=PBMFileReader;module.exports=exports['default'];'use strict';var _typeof3=typeof Symbol==="function"&&_typeof4(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof4(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof4(obj);};Object.defineProperty(exports,"__esModule",{value:true});exports.RENDER_LAYERS=exports.RENDER_LAYER=exports.APPLY_OPTION=exports.APPLY_FILTER=exports.INIT_CONTEXT=undefined;exports.initContext=initContext;exports.applyFilter=applyFilter;exports.applyOption=applyOption;exports.renderLayer=renderLayer;exports.renderLayers=renderLayers;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}var INIT_CONTEXT=exports.INIT_CONTEXT='INIT_CANVAS';var APPLY_FILTER=exports.APPLY_FILTER='APPLY_FILTER';var APPLY_OPTION=exports.APPLY_OPTION='APPLY_OPTION';var RENDER_LAYER=exports.RENDER_LAYER='RENDER_LAYER';var RENDER_LAYERS=exports.RENDER_LAYERS='RENDER_LAYERS';function initContext(canvas,gl){return function(dispatch){return dispatch({type:INIT_CONTEXT,payload:Object.assign({},canvas,{context:canvasUtils.initContext(canvas,gl)})});};}function applyFilter(canvas,layer,filter){return function(dispatch){var chain=function chain(canvas,dispatch){};var layers=canvas.layers.map(function(_layer,index){if(layer===_layer){_layer=Object.assign({},layer,{filters:Object.assign({},layer.filters,_defineProperty({},filter.type,filter))});chain=function chain(canvas,dispatch){renderLayer(canvas,_layer,index)(dispatch);};}return _layer;});canvas=Object.assign({},canvas,{layers:layers});dispatch({type:APPLY_FILTER,payload:canvas});chain(canvas,dispatch);};}function applyOption(canvas,option){return function(dispatch){dispatch({type:APPLY_OPTION,payload:Object.assign({},canvas,{options:Object.assign({},canvas.options,_defineProperty({},option.type,option))})});};}function renderLayer(canvas,layer,index){return function(dispatch){canvasUtils.renderLayer(canvas.context,layer,index);dispatch({type:RENDER_LAYER,payload:canvas});};}function renderLayers(canvas){return function(dispatch){canvas.layers.forEach(function(layer,index){canvasUtils.renderLayer(canvas.context,layer,index);});dispatch({type:RENDER_LAYERS,payload:canvas});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.increment=increment;exports.decrement=decrement;exports.incrementIfOdd=incrementIfOdd;exports.incrementAsync=incrementAsync;var INCREMENT_COUNTER=exports.INCREMENT_COUNTER='INCREMENT_COUNTER';var DECREMENT_COUNTER=exports.DECREMENT_COUNTER='DECREMENT_COUNTER';function increment(){return {type:INCREMENT_COUNTER};}function decrement(){return {type:DECREMENT_COUNTER};}function incrementIfOdd(){return function(dispatch,getState){var _getState=getState();var counter=_getState.counter;if(counter%2===0){return;}dispatch(increment());};}function incrementAsync(){var delay=arguments.length<=0||arguments[0]===undefined?1000:arguments[0];return function(dispatch){setTimeout(function(){dispatch(increment());},delay);};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_IMAGE=exports.COMPRESS_IMAGE=exports.SELECT_CANVAS=exports.MOVE_CANVAS=exports.REMOVE_CANVAS=exports.ADD_CANVAS=undefined;exports.addCanvas=addCanvas;exports.removeCanvas=removeCanvas;exports.moveCanvas=moveCanvas;exports.selectCanvas=selectCanvas;exports.saveImage=saveImage;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var ADD_CANVAS=exports.ADD_CANVAS='ADD_CANVAS';var REMOVE_CANVAS=exports.REMOVE_CANVAS='REMOVE_CANVAS';var MOVE_CANVAS=exports.MOVE_CANVAS='MOVE_CANVAS';var SELECT_CANVAS=exports.SELECT_CANVAS='SELECT_CANVAS';var COMPRESS_IMAGE=exports.COMPRESS_IMAGE='COMPRESS_IMAGE';var SAVE_IMAGE=exports.SAVE_IMAGE='SAVE_IMAGE';function addCanvas(canvas){return function(dispatch){return dispatch({type:ADD_CANVAS,payload:canvas});};}function removeCanvas(canvas){return function(dispatch){return dispatch({type:REMOVE_CANVAS,payload:canvas});};}function moveCanvas(canvas){return function(dispatch){return dispatch({type:MOVE_CANVAS,payload:canvas});};}function selectCanvas(canvas){return function(dispatch){return dispatch({type:SELECT_CANVAS,payload:canvas});};}function saveImage(canvas,destination){return function(dispatch){dispatch({type:COMPRESS_IMAGE,payload:Object.assign({},canvas,{status:'compressing'})});canvasUtils.exportCanvasAsImage(canvas,destination);dispatch({type:SAVE_IMAGE,payload:Object.assign({},canvas,{status:'ready'})});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.canvasProps=undefined;var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactDom=require('react-dom');var _Canvas=require('./Canvas.css');var _Canvas2=_interopRequireDefault(_Canvas);var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _electron=require('electron');var _Card=require('material-ui/Card');var _CircularProgress=require('material-ui/CircularProgress');var _CircularProgress2=_interopRequireDefault(_CircularProgress);var _Paper=require('material-ui/Paper');var _Paper2=_interopRequireDefault(_Paper);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Canvas:{displayName:'Canvas'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Canvas.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Canvas.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles=Object.assign({},_Canvas2.default,{progress:{margin:'-15px 0 0 -15px'}});var Canvas=_wrapComponent('Canvas')(function(_Component){_inherits(Canvas,_Component);function Canvas(props,content){_classCallCheck(this,Canvas);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Canvas).call(this,props,content));_this.onLoadData=_this.onLoadData.bind(_this);_this.onLoadComplete=_this.onLoadComplete.bind(_this);_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);return _this;}_createClass(Canvas,[{key:'componentDidMount',value:function componentDidMount(){var _props=this.props;var initContext=_props.initContext;var canvas=_props.canvas;var gl=this.refs.canvas.getContext('webgl',{preserveDrawingBuffer:true});initContext(canvas,gl);_electron.ipcRenderer.on('load-data',this.onLoadData);_electron.ipcRenderer.on('load-complete',this.onLoadComplete);}},{key:'componentWillUnmount',value:function componentWillUnmount(){var canvas=this.props.canvas;canvasUtils.cleanUp(canvas.context);_electron.ipcRenderer.removeListener('load-data',this.onLoadData);_electron.ipcRenderer.removeListener('load-complete',this.onLoadComplete);}},{key:'onLoadData',value:function onLoadData(event,data){var canvas=this.props.canvas;if(canvas.id!==data.id){return;}var layer=canvas.layers.find(function(layer){return layer.filepath===data.filepath;});for(var i=0;i<data.pixels.length;i++){layer.pixels.push(data.pixels[i]);}}},{key:'onLoadComplete',value:function onLoadComplete(event,data){var renderLayers=this.props.renderLayers;var canvas=this.props.canvas;if(canvas.id!==data.id){return;}if(data.compressionRatio){var layers=canvas.layers.map(function(layer){if(layer.filepath===data.filepath){return Object.assign({},layer,{compressionRatio:data.compressionRatio});}return layer;});canvas=Object.assign({},canvas,{layers:layers});}renderLayers(canvas);}},{key:'onCanvasSelect',value:function onCanvasSelect(event){var _props2=this.props;var canvas=_props2.canvas;var onSelect=_props2.onSelect;if(!canvas.layers.length){return;}if(!canvas.selected){onSelect(canvas);return;}var rect=this.refs.canvas.getBoundingClientRect();var xPosition=event.clientX-rect.left;var yPosition=event.clientY-rect.top;_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_POS',{xPosition:xPosition,yPosition:yPosition});_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR',{targetColor:canvasUtils.getPixel(canvas,xPosition,yPosition)});}},{key:'render',value:function render(){var _props3=this.props;var canvas=_props3.canvas;var connectDragPreview=_props3.connectDragPreview;var connectDragSource=_props3.connectDragSource;var isDragging=_props3.isDragging;return connectDragPreview(_react3.default.createElement('div',{className:styles.canvasContainer,selected:canvas.selected,style:{left:canvas.left,top:canvas.top,width:canvas.width,height:canvas.height+50,opacity:isDragging?0:1,zIndex:canvas.selected?1000:1}},_react3.default.createElement(_Paper2.default,{zDepth:2},_react3.default.createElement(_Card.Card,null,_react3.default.createElement(_Card.CardHeader,{title:canvas.title,avatar:canvas.status==='ready'?null:_react3.default.createElement(_CircularProgress2.default,{style:styles.progress,size:0.5}),style:{cursor:"move",maxHeight:'50px'},ref:function ref(cardHeader){return connectDragSource((0,_reactDom.findDOMNode)(cardHeader));},titleStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),_react3.default.createElement(_Card.CardMedia,null,_react3.default.createElement('canvas',{id:'canvas',className:styles.canvas,onClick:this.onCanvasSelect,width:canvas.width,height:canvas.height,ref:'canvas'}))))));}}]);return Canvas;}(_react2.Component));exports.default=Canvas;var canvasProps=exports.canvasProps={top:10,left:10,width:640,height:320,title:"<No Content>",layers:[],status:'ready'};Canvas.defaultProps=canvasProps;'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;var _reactRouter=require('react-router');var _Counter=require('./Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Counter:{displayName:'Counter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Counter.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Counter.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Counter=_wrapComponent('Counter')((_temp=_class=function(_Component){_inherits(Counter,_Component);function Counter(){_classCallCheck(this,Counter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Counter).apply(this,arguments));}_createClass(Counter,[{key:'render',value:function render(){var _props=this.props;var increment=_props.increment;var incrementIfOdd=_props.incrementIfOdd;var incrementAsync=_props.incrementAsync;var decrement=_props.decrement;var counter=_props.counter;return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Counter2.default.backButton},_react3.default.createElement(_reactRouter.Link,{to:'/'},_react3.default.createElement('i',{className:'fa fa-arrow-left fa-3x'}))),_react3.default.createElement('div',{className:'counter '+_Counter2.default.counter},counter),_react3.default.createElement('div',{className:_Counter2.default.btnGroup},_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:increment},_react3.default.createElement('i',{className:'fa fa-plus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:decrement},_react3.default.createElement('i',{className:'fa fa-minus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:incrementIfOdd},'odd'),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:function onClick(){return incrementAsync();}},'async')));}}]);return Counter;}(_react2.Component),_class.propTypes={increment:_react2.PropTypes.func.isRequired,incrementIfOdd:_react2.PropTypes.func.isRequired,incrementAsync:_react2.PropTypes.func.isRequired,decrement:_react2.PropTypes.func.isRequired,counter:_react2.PropTypes.number.isRequired},_temp));exports.default=Counter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Sidebar=require('../components/Sidebar');var _Sidebar2=_interopRequireDefault(_Sidebar);var _Workspace=require('../containers/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Editor:{displayName:'Editor'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Editor.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Editor.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Editor=_wrapComponent('Editor')(function(_Component){_inherits(Editor,_Component);function Editor(){_classCallCheck(this,Editor);return _possibleConstructorReturn(this,Object.getPrototypeOf(Editor).apply(this,arguments));}_createClass(Editor,[{key:'render',value:function render(){var canvases=this.props.canvases;var canvas=canvases.find(function(canvas){return canvas.selected;});var sidebarOpen=canvas!==undefined;return _react3.default.createElement('div',null,_react3.default.createElement(_Sidebar2.default,{canvas:canvas,open:sidebarOpen}),_react3.default.createElement(_Workspace2.default,{sidebarOpen:sidebarOpen}));}}]);return Editor;}(_react2.Component));exports.default=Editor;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _toggle=require('material-ui/toggle');var _toggle2=_interopRequireDefault(_toggle);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var BitPlanes=function(_Filter){_inherits(BitPlanes,_Filter);function BitPlanes(props,content){_classCallCheck(this,BitPlanes);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BitPlanes).call(this,props,content));var planes={};for(var i=1;i<=8;i++){planes[i]=true;}_this.defaultState={type:'BIT_PLANES',disabled:true,filter:Filters.bitPlanes,planes:planes};_this.state=Object.assign({},_this.defaultState);_this.onToggleChange=_this.onToggleChange.bind(_this);return _this;}_createClass(BitPlanes,[{key:'onToggleChange',value:function onToggleChange(event){var target=event.target.id.split('_')[1];var bit=Object.keys(this.state.planes).find(function(bit){return bit==target;});var planes=this.state.planes;if(bit){planes=Object.assign({},this.state.planes,_defineProperty({},bit,!this.state.planes[bit]));}var options={planes:planes};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var _this2=this;var controls=Object.keys(this.state.planes).map(function(bit){return _react2.default.createElement(_List.ListItem,{key:"plane_"+bit,primaryText:"Plane "+bit,rightToggle:_react2.default.createElement(_toggle2.default,{id:"plane_"+bit,toggled:_this2.state.planes[bit],onToggle:_this2.onToggleChange,disabled:_this2.state.disabled})});});return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Bit Plane Slicing'});}}]);return BitPlanes;}(_Filter3.default);exports.default=BitPlanes;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var BoundaryFill=function(_ColorFill){_inherits(BoundaryFill,_ColorFill);function BoundaryFill(props,content){_classCallCheck(this,BoundaryFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BoundaryFill).call(this,props,content));_this.defaultState={type:'BOUNDARY_FILL',filter:Filters.boundaryFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(BoundaryFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Boundary Fill'});}}]);return BoundaryFill;}(_ColorFill3.default);exports.default=BoundaryFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ColorFill=function(_Filter){_inherits(ColorFill,_Filter);function ColorFill(props,content){_classCallCheck(this,ColorFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ColorFill).call(this,props,content));_this.onXpositionChange=_this.onXpositionChange.bind(_this);_this.onYpositionChange=_this.onYpositionChange.bind(_this);_this.onTargetColorChange=_this.onTargetColorChange.bind(_this);_this.onColorSelect=_this.onColorSelect.bind(_this);_this.onColorRecieve=_this.onColorRecieve.bind(_this);_this.onPixelSelect=_this.onPixelSelect.bind(_this);_this.onPixelRecieve=_this.onPixelRecieve.bind(_this);return _this;}_createClass(ColorFill,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){_get(Object.getPrototypeOf(ColorFill.prototype),'componentWillReceiveProps',this).call(this,nextProps);this.removeListeners(nextProps.layer.filters[this.defaultState.type]);}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState){if(!prevState.disabled&&this.state.disabled){this.removeListeners();}}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.removeListeners();}},{key:'onXpositionChange',value:function onXpositionChange(event,xPosition){var layer=this.props.layer;var options={xPosition:xPosition};xPosition=parseInt(xPosition);if(xPosition<0){xPosition=0;}else if(xPosition>=layer.width){xPosition=layer.width-1;}if(Number.isInteger(xPosition)){options=Object.assign({},this.state,{xPosition:xPosition});this.applyFilter(options);}this.setState(options);}},{key:'onYpositionChange',value:function onYpositionChange(event,yPosition){var layer=this.props.layer;var options={yPosition:yPosition};yPosition=parseInt(yPosition);if(yPosition<0){yPosition=0;}else if(yPosition>=layer.height){yPosition=layer.height-1;}if(Number.isInteger(yPosition)){options=Object.assign({},this.state,{yPosition:yPosition});this.applyFilter(options);}this.setState(options);}},{key:'onTargetColorChange',value:function onTargetColorChange(event,targetColor){var layer=this.props.layer;var options={targetColor:targetColor};targetColor=parseInt(targetColor);if(targetColor<0){targetColor=0;options={targetColor:targetColor};}else if(targetColor>=layer.colorBits){targetColor=layer.colorBits;options={targetColor:targetColor};}if(Number.isInteger(targetColor)){options=Object.assign({},this.state,{targetColor:targetColor});this.applyFilter(options);}this.setState(options);}},{key:'onColorSelect',value:function onColorSelect(){var canvas=this.props.canvas;if(this.state.listeners.colorPick){this.removeListener('colorPick');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR','colorPick',this.onColorRecieve);}}},{key:'onColorRecieve',value:function onColorRecieve(topic,options){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var targetColor={targetColor:options.targetColor};options=Object.assign({},this.state,targetColor);this.setState(targetColor);this.applyFilter(options);}},{key:'onPixelSelect',value:function onPixelSelect(){var canvas=this.props.canvas;if(this.state.listeners.pixelPos){this.removeListener('pixelPos');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_POS','pixelPos',this.onPixelRecieve);}}},{key:'onPixelRecieve',value:function onPixelRecieve(topic,position){this.applyFilter(Object.assign({},this.state,position));}},{key:'addListener',value:function addListener(topic,listener,callback){var _this2=this;callback=callback||function(){};var token=_pubsubJs2.default.subscribe(topic,function(topic,content){_this2.removeListener(listener);callback(topic,content);});var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,token))};this.setState(options);}},{key:'removeListener',value:function removeListener(listener){if(!this.state.listeners[listener]){return;}_pubsubJs2.default.unsubscribe(this.state.listeners[listener]);var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,null))};this.setState(options);}},{key:'removeListeners',value:function removeListeners(listeners){var _this3=this;var options={listeners:Object.assign({},this.state.listeners)};var change=false;Object.keys(this.state.listeners).forEach(function(listener){if(!listeners||!listeners[listener]){_pubsubJs2.default.unsubscribe(_this3.state.listeners[listener]);options.listeners[listener]=null;change=true;}});if(change){this.setState(options);}}}]);return ColorFill;}(_Filter3.default);exports.default=ColorFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var DistanceFill=function(_ColorFill){_inherits(DistanceFill,_ColorFill);function DistanceFill(props,content){_classCallCheck(this,DistanceFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(DistanceFill).call(this,props,content));_this.defaultState={type:'DISTANCE_FILL',filter:Filters.distanceFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,scaleFactor:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onScaleFactorChange=_this.onScaleFactorChange.bind(_this);return _this;}_createClass(DistanceFill,[{key:'onScaleFactorChange',value:function onScaleFactorChange(event,scaleFactor){var options={scaleFactor:scaleFactor};scaleFactor=parseInt(scaleFactor);if(scaleFactor<0){scaleFactor=1;options={scaleFactor:scaleFactor};}if(Number.isInteger(scaleFactor)){this.applyFilter(Object.assign({},this.state,{scaleFactor:scaleFactor}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Initial Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'scale',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.scaleFactor,onChange:this.onScaleFactorChange,floatingLabelText:'Scale Factor',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Distance Fill'});}}]);return DistanceFill;}(_ColorFill3.default);exports.default=DistanceFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Erosion=function(_ColorFill){_inherits(Erosion,_ColorFill);function Erosion(props,content){_classCallCheck(this,Erosion);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Erosion).call(this,props,content));_this.defaultState={type:'EROSION',disabled:true,filter:Filters.erosion,xPosition:'',yPosition:'',targetColor:0,iterations:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onIterationsChange=_this.onIterationsChange.bind(_this);return _this;}_createClass(Erosion,[{key:'onIterationsChange',value:function onIterationsChange(event,iterations){var layer=this.props.layer;var options={iterations:iterations};iterations=parseInt(iterations);if(iterations<0){iterations=0;options={iterations:iterations};}if(Number.isInteger(iterations)){this.applyFilter(Object.assign({},this.state,{iterations:iterations}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'iterations',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.iterations,onChange:this.onIterationsChange,floatingLabelText:'Iterations',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Erosion'});}}]);return Erosion;}(_ColorFill3.default);exports.default=Erosion;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Filter=function(_Component){_inherits(Filter,_Component);function Filter(props,content){_classCallCheck(this,Filter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Filter).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyFilter=_lodash2.default.debounce(_this.applyFilter,500);return _this;}_createClass(Filter,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.layer.filters[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var applyFilter=_props.applyFilter;applyFilter(canvas,layer,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyFilter',value:function applyFilter(options){var _props2=this.props;var canvas=_props2.canvas;var layer=_props2.layer;var applyFilter=_props2.applyFilter;var index=_props2.index;options=Object.assign({},options,{index:index});applyFilter(canvas,layer,options);}}]);return Filter;}(_react.Component);exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _SpatialResolution=require('./SpatialResolution');var _SpatialResolution2=_interopRequireDefault(_SpatialResolution);var _GrayLevel=require('./GrayLevel');var _GrayLevel2=_interopRequireDefault(_GrayLevel);var _GrayScale=require('./GrayScale');var _GrayScale2=_interopRequireDefault(_GrayScale);var _Histogram=require('./Histogram');var _Histogram2=_interopRequireDefault(_Histogram);var _NoiseReduce=require('./NoiseReduce');var _NoiseReduce2=_interopRequireDefault(_NoiseReduce);var _Sharpen=require('./Sharpen');var _Sharpen2=_interopRequireDefault(_Sharpen);var _BitPlanes=require('./BitPlanes');var _BitPlanes2=_interopRequireDefault(_BitPlanes);var _FloodFill=require('./FloodFill');var _FloodFill2=_interopRequireDefault(_FloodFill);var _BoundaryFill=require('./BoundaryFill');var _BoundaryFill2=_interopRequireDefault(_BoundaryFill);var _Erosion=require('./Erosion');var _Erosion2=_interopRequireDefault(_Erosion);var _DistanceFill=require('./DistanceFill');var _DistanceFill2=_interopRequireDefault(_DistanceFill);var _Skeletonization=require('./Skeletonization');var _Skeletonization2=_interopRequireDefault(_Skeletonization);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Filter:{displayName:'Filter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Filter=_wrapComponent('Filter')(function(_Component){_inherits(Filter,_Component);function Filter(){_classCallCheck(this,Filter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Filter).apply(this,arguments));}_createClass(Filter,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyFilter=_props.applyFilter;var layer=canvas.layers[0];var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Filters'),_react3.default.createElement(_SpatialResolution2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayScale2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayLevel2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Histogram2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_NoiseReduce2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Sharpen2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BitPlanes2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Fills'),_react3.default.createElement(_FloodFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BoundaryFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Erosion2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_DistanceFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Morphs'),_react3.default.createElement(_Skeletonization2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}));}}]);return Filter;}(_react2.Component));exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var FloodFill=function(_ColorFill){_inherits(FloodFill,_ColorFill);function FloodFill(props,content){_classCallCheck(this,FloodFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(FloodFill).call(this,props,content));_this.defaultState={type:'FLOOD_FILL',filter:Filters.floodfill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(FloodFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Target Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Flood Fill'});}}]);return FloodFill;}(_ColorFill3.default);exports.default=FloodFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165}};var GrayLevel=function(_Filter){_inherits(GrayLevel,_Filter);function GrayLevel(props,content){_classCallCheck(this,GrayLevel);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayLevel).call(this,props,content));_this.defaultState={type:'GRAY_LEVEL',disabled:true,level:8,filter:Filters.grayLevel};_this.state=Object.assign({},_this.defaultState);_this.onLevelChange=_this.onLevelChange.bind(_this);return _this;}_createClass(GrayLevel,[{key:'onLevelChange',value:function onLevelChange(event,level){var options={level:level};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:this.state.level+'-bit',disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onLevelChange,min:1,step:1,max:8,value:this.state.level,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Level'});}}]);return GrayLevel;}(_Filter3.default);exports.default=GrayLevel;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var GrayScale=function(_Filter){_inherits(GrayScale,_Filter);function GrayScale(props,content){_classCallCheck(this,GrayScale);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayScale).call(this,props,content));_this.defaultState={type:'GRAY_SCALE',disabled:true,filter:Filters.grayScale,transformMethod:1,constant:1.5,gamma:1};_this.state=Object.assign({},_this.defaultState);_this.onTransformMethodChange=_this.onTransformMethodChange.bind(_this);_this.onConstantChange=_this.onConstantChange.bind(_this);_this.onGammaChange=_this.onGammaChange.bind(_this);return _this;}_createClass(GrayScale,[{key:'onTransformMethodChange',value:function onTransformMethodChange(event,index,value){var options={transformMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onConstantChange',value:function onConstantChange(event,value){var options={constant:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onGammaChange',value:function onGammaChange(event,value){var options={gamma:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.transformMethod,onChange:this.onTransformMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Log'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Power'}))}),_react2.default.createElement(_List.ListItem,{key:'constantField',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.constant,onChange:this.onConstantChange,floatingLabelText:'Constant "c"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'gammaField',style:this.state.transformMethod!==2?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.gamma,onChange:this.onGammaChange,floatingLabelText:'Gamma "γ"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Scale'});}}]);return GrayScale;}(_Filter3.default);exports.default=GrayScale;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Histogram=function(_MaskFilter){_inherits(Histogram,_MaskFilter);function Histogram(props,content){_classCallCheck(this,Histogram);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Histogram).call(this,props,content));_this.defaultState={type:'HISTOGRAM',disabled:true,filter:Filters.histogram,global:true,dimension:5,canvasId:null};_this.state=Object.assign({},_this.defaultState);_this.onLocalityChange=_this.onLocalityChange.bind(_this);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMatchingChange=_this.onMatchingChange.bind(_this);return _this;}_createClass(Histogram,[{key:'onLocalityChange',value:function onLocalityChange(event,index,global){var options={global:global};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMatchingChange',value:function onMatchingChange(event,index,canvasId){var canvases=this.props.canvases;var options={canvasId:canvasId};this.applyFilter(Object.assign({},this.state,Object.assign({},options,{match:canvases.find(function(canvas){return canvas.id===canvasId;})})));this.setState(options);}},{key:'onDimensionChange',value:function onDimensionChange(event,dimension){var layer=this.props.layer;var global=false;if(dimension>=layer.colorBits){global=true;dimension=this.state.dimension;}var options={dimension:dimension,global:global};_get(Object.getPrototypeOf(Histogram.prototype),'onDimensionChange',this).call(this,event,options);}},{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var canvasMenuItems=[];canvases.forEach(function(_canvas){if(canvas.id!==_canvas.id){canvasMenuItems=[].concat(_toConsumableArray(canvasMenuItems),[_react2.default.createElement(_MenuItem2.default,{key:_canvas.id,value:_canvas.id,primaryText:_canvas.title})]);}});var controls=[_react2.default.createElement(_List.ListItem,{key:'equalization',disabled:true,secondaryText:'Equalization',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.global,onChange:this.onLocalityChange},_react2.default.createElement(_MenuItem2.default,{value:true,primaryText:'Global'}),_react2.default.createElement(_MenuItem2.default,{value:false,primaryText:'Local'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',style:this.state.global?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'matching',disabled:true,style:this.state.global?null:{display:'none'},secondaryText:'Matching',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.canvasId,onChange:this.onMatchingChange},_react2.default.createElement(_MenuItem2.default,{value:null,primaryText:'None'}),canvasMenuItems)})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Histogram'});}}]);return Histogram;}(_MaskFilter3.default);exports.default=Histogram;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.spatialResolution=spatialResolution;exports.grayLevel=grayLevel;exports.grayScale=grayScale;exports.histogram=histogram;exports.noiseReduce=noiseReduce;exports.sharpen=sharpen;exports.bitPlanes=bitPlanes;exports.floodfill=floodfill;exports.boundaryFill=boundaryFill;exports.erosion=erosion;exports.distanceFill=distanceFill;exports.skeletonization=skeletonization;var _canvasUtils=require('../../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function subsample(layer,ratio){var width=layer.width*ratio>>0;var height=layer.height*ratio>>0;var averagePixelCountW=layer.width/width>>0;var averagePixelCountH=layer.height/height>>0;var totalAveragePixels=averagePixelCountW*averagePixelCountH;var pixels=[];var colOffset=0;for(var nextRow=0;nextRow<layer.width;nextRow+=averagePixelCountW){colOffset=nextRow*layer.width;for(var nextCol=colOffset;nextCol<colOffset+layer.width;nextCol+=averagePixelCountW){var sum=0;var subIndex=0;for(var nextSubCol=nextCol;nextSubCol<nextCol+averagePixelCountH;nextSubCol++){for(var i=nextSubCol;i<nextSubCol+averagePixelCountW;i++){sum+=layer.pixels[i];if(subIndex+1===totalAveragePixels){pixels.push(Math.round(sum/totalAveragePixels));}subIndex++;}}}}return Object.assign({},layer,{width:width,height:height,pixels:pixels});}function getNeighborColors(layer,index,total,dimension,callback){var half=(dimension-1)/2;var pixels=[];var rowIndex=index/layer.width>>0;callback=callback||function(pixel){};for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;var pixel=layer.pixels[x];if(row===rowTarget&&0<=x&&x<total&&x!=index){pixels.push(pixel);}callback(pixel);}}return pixels;}function getNeighborPixels(layer,index,total,dimension){var half=(dimension-1)/2;var pixelsMap=[];var rowIndex=index/layer.width>>0;for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;if(row===rowTarget&&0<=x&&x<total&&x!=index){pixelsMap.push({pixel:x,color:layer.pixels[x]});}}}return pixelsMap;}function getNeighborhoodColors(layer,index,total,dimension){var neighborhood=[];getNeighborColors(layer,index,layer.pixels.length,3,function(pixel){neighborhood.push(pixel);});return neighborhood;}function padRows(pixels,rows,cols){for(var i=0;i<rows;i++){for(var j=0;j<cols;j++){pixels.push(0);}}}function padData(layer,maskDimension){if(maskDimension<3){return layer.pixels;}var pixels=[];var paddedRows=(maskDimension-1)/2;var paddedCols=(maskDimension-1)/2;var width=layer.width+maskDimension-1;var height=layer.height+maskDimension-1;pixels=[];padRows(pixels,paddedRows,width);for(var y=0;y<layer.height;y++){padRows(pixels,1,paddedCols);var colOffset=y*layer.width;for(var x=colOffset;x<colOffset+layer.width;x++){pixels.push(layer.pixels[x]);}padRows(pixels,1,paddedCols);}padRows(pixels,paddedRows,width);return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function blur(pixel,neighbors,maskDimension){var weight=1/(maskDimension*maskDimension);return neighbors.reduce(function(prev,value){return prev+weight*value;},weight*pixel)>>0;}function min(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[0];}function median(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[(sorted.length-1)/2];}function max(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[sorted.length-1];}function midpoint(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var midpoint=(sorted[0]+sorted[sorted.length-1])/2;return midpoint>>0;}function arithmeticMean(pixel,neighbors,maskDimension){var total=neighbors.reduce(function(prev,value){return prev+value;},pixel);return total/(neighbors.length+1)>>0;}function geometricMean(pixel,neighbors,maskDimension){var product=neighbors.reduce(function(prev,value){return prev*value;},pixel);return Math.pow(product,1/(maskDimension*maskDimension))>>0;}function harmonicMean(pixel,neighbors,maskDimension){var mean=maskDimension*maskDimension/neighbors.reduce(function(prev,value){return prev+1/value;},1/pixel);return mean>>0;}function contraharmonicMean(pixel,neighbors,maskDimension,order){var orderOffset=order+1;var numerator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,orderOffset);},Math.pow(pixel,orderOffset));var denominator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,order);},Math.pow(pixel,order));var mean=numerator/denominator;return mean>>0;}function alphaTrimmedMean(pixel,neighbors,maskDimension,constantD){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var A=Math.floor(constantD/2);var total=sorted.slice(A,sorted.length-A).reduce(function(prev,value){return prev+value;});return total/(maskDimension*maskDimension-2*A)>>0;}function laplace(pixel,neighbors,maskDimension){var midBit=maskDimension*maskDimension-1;var filtered=neighbors.reduce(function(prev,value){return prev-value;},midBit*pixel);filtered=pixel+filtered-Math.min(0,filtered);filtered=255*filtered/Math.max(255,filtered);return filtered>>0;}function highboost(pixel,neighbors,maskDimension,maskFactor){var mask=Math.max(0,pixel-blur(pixel,neighbors,maskDimension));return Math.min(pixel+maskFactor*mask,255);}function getHistogram(pixels,colorBits,total,target){var frequency={};pixels.forEach(function(pixel){frequency[pixel]=(frequency[pixel]||0)+1;});var prev=0;var histogram={};for(var pixel in frequency){prev+=frequency[pixel]/total*colorBits;histogram[pixel]=Math.round(prev);if(pixel==target)return histogram;}return histogram;}function getHistogramValue(layer,index,total,subtotal,dimension){var target=layer.pixels[index];var pixels=getNeighborColors(layer,index,total,dimension);pixels.push(layer.pixels[index]);var histogram=getHistogram(pixels,layer.colorBits,subtotal,target);return histogram[target];}function replication(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){pixels[x]=layer.pixels[pixelOffset+(colIndex++*options.ratio>>0)];}step+=options.ratio;}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bilinear(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){if(colIndex%scaleFactor===0){pixels[x]=layer.pixels[pixelOffset+(colIndex*options.ratio>>0)];}else {pixels[x]=null;}colIndex++;}step+=options.ratio;}layer=Object.assign({},layer,{pixels:pixels,width:width,height:height});for(var i=0;i<pixels.length;i++){if(pixels[i]==null){(function(){var neighbors=getNeighborColors(layer,i,pixels.length,3);var sum=0;var count=0;neighbors.forEach(function(pixel){if(pixel!=null){count++;sum+=pixel;}});pixels[i]=sum/count;})();}}return layer;}function spatialResolution(layer,context,options){layer=subsample(layer,options.ratio);if(options.zoomMethod===1){layer=replication(layer,options);}else if(options.zoomMethod===2){layer=bilinear(layer,options);}return layer;}function grayLevel(layer,context,options){var colorsBits=Math.pow(2,options.level)-1;var ratio=Math.round(255/colorsBits);var pixels=layer.pixels.map(function(pixel){return Math.round(pixel/layer.colorBits*colorsBits)*ratio;});return Object.assign({},layer,{pixels:pixels});}function grayScale(layer,context,options){var pixels=layer.pixels;var c=options.constant;var gamma=options.gamma;if(options.transformMethod===1){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.log(1+r);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}else if(options.transformMethod===2){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.pow(r,gamma);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}return Object.assign({},layer,{pixels:pixels});}function histogram(layer,context,options){var MN=layer.width*layer.height;var pixels=void 0;if(!options.global){(function(){var mn=options.dimension*options.dimension;pixels=layer.pixels.map(function(pixel,index){return getHistogramValue(layer,index,MN,mn,options.dimension);});})();}else {var pixel;(function(){var map=getHistogram(layer.pixels,layer.colorBits,MN);if(options.match){var canvas=options.match;MN=canvas.width*canvas.height;var targetPixels=canvasUtils.getPixels(canvas);var targetMap=getHistogram(targetPixels,256,MN);var targetValues=_lodash2.default.values(targetMap);var matchingMap={};for(pixel in map){var value=map[pixel];var beforePixel=void 0,afterPixel=void 0,targetPixel=void 0;for(targetPixel in targetMap){var targetValue=targetMap[targetPixel];if(targetValue<value){beforePixel=targetPixel;}if(targetValue==value){break;}if(targetValue>value){targetPixel=null;break;}}if(!targetPixel){if(!afterPixel||value-targetMap[beforePixel]<targetMap[afterPixel]-value){targetPixel=beforePixel;}else {targetPixel=afterPixel;}}matchingMap[pixel]=targetPixel;}map=matchingMap;}pixels=layer.pixels.map(function(pixel){return map[pixel];});})();}return Object.assign({},layer,{pixels:pixels});}function noiseReduce(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=blur(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=min(layer.pixels[x],neighbors,options.dimension);}else if(options.method==3){pixel=median(layer.pixels[x],neighbors,options.dimension);}else if(options.method==4){pixel=max(layer.pixels[x],neighbors,options.dimension);}else if(options.method==5){pixel=midpoint(layer.pixels[x],neighbors,options.dimension);}else if(options.method==6){pixel=arithmeticMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==7){pixel=geometricMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==8){pixel=harmonicMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==9){pixel=contraharmonicMean(layer.pixels[x],neighbors,options.dimension,options.order);}else if(options.method=10){pixel=alphaTrimmedMean(layer.pixels[x],neighbors,options.dimension,options.constantD);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function sharpen(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=laplace(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=highboost(layer.pixels[x],neighbors,options.dimension,options.maskFactor);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bitPlanes(layer,context,options){var disabledBits=Object.keys(options.planes).filter(function(bit){return !options.planes[bit];});var binaryReducer=disabledBits.map(function(bit){return {value:bit,binary:(Math.pow(2,bit-1)>>>0).toString(2)};});var pixels=layer.pixels.map(function(pixel){var binary=(pixel>>>0).toString(2);var result=binaryReducer.reduce(function(prev,bit){return prev-(prev.toString().charAt(8-bit.value)==1?bit.binary:'0');},binary);return parseInt(result,2);});return Object.assign({},layer,{pixels:pixels});}function floodfill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var pixels=[].concat(_toConsumableArray(layer.pixels));var initialColor=pixels[pixel];var queue=[pixel];var visited={};layer=Object.assign({},layer,{pixels:pixels});pixels[pixel]=options.targetColor;while(queue.length){var head=queue[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}visited[queue.shift()]=true;}return layer;}function isBoundaryPixel(layer,element,total,initialColor){if(element.color===initialColor){var neighbors=getNeighborColors(layer,element.pixel,total,3);if(neighbors.find(function(neighbor){return neighbor!==initialColor;})!==undefined){return true;}}return false;}function boundaryFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){pixels[neighbor.pixel]=options.targetColor;}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return Object.assign({},layer,{pixels:pixels});}function getBoundaryPixels(layer,options){var queue=[];if(options.xPosition===''||options.yPosition===''){return queue;}var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){queue.push(neighbor.pixel);}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return queue;}function erosion(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var iterations=options.iterations;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(iterations){queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}pixels[head]=options.targetColor;queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}iterations--;}return layer;}function distanceFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var distance=options.targetColor;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});queue.forEach(function(pixel){pixels[pixel]=distance;});while(queue.length){distance=Math.min(layer.colorBits,distance+options.scaleFactor);queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=distance;queue.push(neighbor.pixel);}});}queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}}return layer;} /*
* p9 (0) p2 (1) p3 (2)
* p8 (3) p1 (4) p4 (5)
* p7 (6) p6 (7) p5 (8)
*/function getTransitionCount(neighborhood,initialColor){var count=0; // p2 -> p3
if(neighborhood[1]!==initialColor&&neighborhood[2]===initialColor){count++;} // p3 -> p4
if(neighborhood[2]!==initialColor&&neighborhood[5]===initialColor){count++;} // p4 -> p5
if(neighborhood[5]!==initialColor&&neighborhood[8]===initialColor){count++;} // p5 -> p6
if(neighborhood[8]!==initialColor&&neighborhood[7]===initialColor){count++;} // p6 -> p7
if(neighborhood[7]!==initialColor&&neighborhood[6]===initialColor){count++;} // p7 -> p8
if(neighborhood[6]!==initialColor&&neighborhood[3]===initialColor){count++;} // p8 -> p9
if(neighborhood[3]!==initialColor&&neighborhood[0]===initialColor){count++;} // p9 -> p2
if(neighborhood[0]!==initialColor&&neighborhood[1]===initialColor){count++;}return count;}function zhangSuen(layer,options){var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel]; // for binary images this is usually black
var pixels=[].concat(_toConsumableArray(layer.pixels));var changed=void 0;layer=Object.assign({},layer,{pixels:pixels});var _loop=function _loop(){changed=false;var updated=[];pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P4 or P6 or (P2 and P8)
&&(neighborhood[5]===options.targetColor||neighborhood[7]===options.targetColor||neighborhood[1]===options.targetColor&&neighborhood[3]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P2 or P8 or (P4 and P6)
&&(neighborhood[1]===options.targetColor||neighborhood[3]===options.targetColor||neighborhood[5]===options.targetColor&&neighborhood[7]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});};do {_loop();}while(changed);return layer;}function zhangSuenBFS(layer,options){var queue=getBoundaryPixels(layer,options);var discarded={};var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(queue.length){queue.push(null);var head=queue[0];while(head!==null){if(!discarded[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(neighbor.color===initialColor){ // for each foreground neighbor of head
var neighborhood=getNeighborhoodColors(layer,neighbor.pixel,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1){ // can be removed
pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}else {pixels[neighbor.pixel]=initialColor;discarded[neighbor.pixel]=true;}}});}queue.shift();head=queue[0];}queue.shift();}return layer;}function skeletonization(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}if(options.method===1){return zhangSuen(layer,options);}else if(options.method===2){return zhangSuenBFS(layer,options);}return layer;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&_typeof3(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof3(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof3(obj);};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MaskFilter=function(_Filter){_inherits(MaskFilter,_Filter);function MaskFilter(props,contents){_classCallCheck(this,MaskFilter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(MaskFilter).call(this,props,contents));_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.applyDimensionChange=_lodash2.default.debounce(_this.applyDimensionChange,500);return _this;}_createClass(MaskFilter,[{key:'onDimensionChange',value:function onDimensionChange(event,options){var dimension=(typeof options==='undefined'?'undefined':_typeof(options))==='object'?options.dimension:options;options=Object.assign({},options,{dimension:dimension});this.applyDimensionChange(dimension,options);this.setState(options);}},{key:'applyDimensionChange',value:function applyDimensionChange(dimension,options){dimension=parseInt(dimension);if(dimension<3){dimension=3;}else if(dimension%2===0){dimension=dimension+1;}if(dimension&&Number.isInteger(dimension)){options=Object.assign({},options,{dimension:dimension});this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}}]);return MaskFilter;}(_Filter3.default);exports.default=MaskFilter;;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var NoiseReduce=function(_MaskFilter){_inherits(NoiseReduce,_MaskFilter);function NoiseReduce(props,content){_classCallCheck(this,NoiseReduce);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(NoiseReduce).call(this,props,content));_this.defaultState={type:'NOISE_REDUCE',disabled:true,filter:Filters.noiseReduce,method:1,dimension:3,order:1,constantD:1};_this.state=Object.assign({},_this.defaultState);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onOrderChange=_this.onOrderChange.bind(_this);_this.onConstantDChange=_this.onConstantDChange.bind(_this);return _this;}_createClass(NoiseReduce,[{key:'onDimensionChange',value:function onDimensionChange(event,dimension){if(dimension&&dimension>-1){var constantD=this.clampConstantD(this.state.constantD,dimension);this.applyConstantDChange(constantD,this.state);}_get(Object.getPrototypeOf(NoiseReduce.prototype),'onDimensionChange',this).call(this,event,dimension);}},{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onOrderChange',value:function onOrderChange(event,order){var options={order:order};order=parseFloat(order);if(order&&!Number.isNaN(order)){this.applyFilter(Object.assign({},this.state,{order:order}));}this.setState(options);}},{key:'onConstantDChange',value:function onConstantDChange(event,constantD){var options={constantD:constantD};this.applyConstantDChange(constantD,options);this.setState(options);}},{key:'applyConstantDChange',value:function applyConstantDChange(constantD,options){constantD=parseInt(constantD);constantD=this.clampConstantD(constantD,this.state.dimension);if(order&&Number.isInteger(constantD)){options={constantD:constantD};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}},{key:'clampConstantD',value:function clampConstantD(constantD,dimension){if(constantD<0){constantD=0;}else if(constantD>dimension*dimension-1){constantD=dimension*dimension-1;}return constantD;}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Blur'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Min'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Median'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'Max'}),_react2.default.createElement(_MenuItem2.default,{value:5,primaryText:'Midpoint'}),_react2.default.createElement(_MenuItem2.default,{value:6,primaryText:'Arithmetic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:7,primaryText:'Geometric Mean'}),_react2.default.createElement(_MenuItem2.default,{value:8,primaryText:'Harmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:9,primaryText:'Contraharmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:10,primaryText:'Alpha-trimmed Mean'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'mask_size',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'order',type:'number',disabled:true,style:this.state.method===9?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'order',style:styles.input,value:this.state.order,onChange:this.onOrderChange,floatingLabelText:'Order "Q"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'constantD',type:'number',disabled:true,style:this.state.method===10?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'constant_d',style:styles.input,value:this.state.constantD,onChange:this.onConstantDChange,floatingLabelText:'Alpha "a"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Noise Reduce'});}}]);return NoiseReduce;}(_MaskFilter3.default);exports.default=NoiseReduce;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Sharpen=function(_MaskFilter){_inherits(Sharpen,_MaskFilter);function Sharpen(props,content){_classCallCheck(this,Sharpen);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Sharpen).call(this,props,content));_this.defaultState={type:'SHARPEN',disabled:true,filter:Filters.sharpen,method:1,dimension:3,maskFactor:8};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onMaskFactorChange=_this.onMaskFactorChange.bind(_this);return _this;}_createClass(Sharpen,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMaskFactorChange',value:function onMaskFactorChange(event,maskFactor){var options={maskFactor:maskFactor};maskFactor=parseInt(maskFactor);if(maskFactor<1){maskFactor=1;options={maskFactor:maskFactor};}if(maskFactor&&Number.isInteger(maskFactor)){this.applyFilter(Object.assign({},this.state,options));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Laplacian'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Highboost'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'maskFactor',type:'number',style:this.state.method===1?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'factor',style:styles.input,value:this.state.maskFactor,onChange:this.onMaskFactorChange,floatingLabelText:'Mask Factor "A"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Sharpen'});}}]);return Sharpen;}(_MaskFilter3.default);exports.default=Sharpen;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Skeletonization=function(_ColorFill){_inherits(Skeletonization,_ColorFill);function Skeletonization(props,content){_classCallCheck(this,Skeletonization);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Skeletonization).call(this,props,content));_this.defaultState={type:'SKELETONIZATION',disabled:true,method:1,filter:Filters.skeletonization,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);return _this;}_createClass(Skeletonization,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Zhang-Suen'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Zhang-Suen (BFS)'}))}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Background Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Foreground Pixel',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'seed',style:this.state.method===1?{display:'none'}:undefined,disabled:true,primaryText:'Is Seed',leftCheckbox:_react2.default.createElement(_Checkbox2.default,{disabled:true,checked:true})}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Skeletonization'});}}]);return Skeletonization;}(_ColorFill3.default);exports.default=Skeletonization;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165},select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var SpatialResolution=function(_Filter){_inherits(SpatialResolution,_Filter);function SpatialResolution(props,content){_classCallCheck(this,SpatialResolution);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SpatialResolution).call(this,props,content));_this.defaultState={type:'SPATIAL_RESOLTUION',ratio:1,zoomMethod:1,disabled:true,filter:Filters.spatialResolution};_this.state=Object.assign({},_this.defaultState);_this.onRatioChange=_this.onRatioChange.bind(_this);_this.onZoomMethodChange=_this.onZoomMethodChange.bind(_this);return _this;}_createClass(SpatialResolution,[{key:'onRatioChange',value:function onRatioChange(event,value){var options={ratio:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onZoomMethodChange',value:function onZoomMethodChange(event,index,value){var options={zoomMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var layer=this.props.layer;var resolution='('+Math.floor(layer.width*this.state.ratio)+' X '+Math.floor(layer.height*this.state.ratio)+') ratio = '+this.state.ratio;var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.zoomMethod,onChange:this.onZoomMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Nearest Neighbor'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Bilinear Interpolation'}))}),_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:resolution,disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onRatioChange,min:0.50,step:0.50,value:this.state.ratio,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Spatial Resolution'});}}]);return SpatialResolution;}(_Filter3.default);exports.default=SpatialResolution;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactRouter=require('react-router');var _Home=require('./Home.css');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Home:{displayName:'Home'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Home.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Home.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Home=_wrapComponent('Home')(function(_Component){_inherits(Home,_Component);function Home(){_classCallCheck(this,Home);return _possibleConstructorReturn(this,Object.getPrototypeOf(Home).apply(this,arguments));}_createClass(Home,[{key:'render',value:function render(){return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Home2.default.container},_react3.default.createElement('h2',null,'Home'),_react3.default.createElement(_reactRouter.Link,{to:'/counter'},'to Counter')));}}]);return Home;}(_react2.Component));exports.default=Home;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Option2=require('./Option');var _Option3=_interopRequireDefault(_Option2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var Compression=function(_Option){_inherits(Compression,_Option);function Compression(props,content){_classCallCheck(this,Compression);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Compression).call(this,props,content));_this.defaultState={type:'COMPRESSION',disabled:true,method:1,mode:2};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onModeChange=_this.onModeChange.bind(_this);return _this;}_createClass(Compression,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'onModeChange',value:function onModeChange(event,index,mode){var options={mode:mode};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'method',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Run Length Encoding'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Huffman Tree'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Differential PCM'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'LZW'}))}),_react2.default.createElement(_List.ListItem,{key:'mode',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.mode,onChange:this.onModeChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'ASCII'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Binary'}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Compression'});}}]);return Compression;}(_Option3.default);exports.default=Compression;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Option=function(_Component){_inherits(Option,_Component);function Option(props,content){_classCallCheck(this,Option);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Option).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyOption=_lodash2.default.debounce(_this.applyOption,500);return _this;}_createClass(Option,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.canvas.options[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var applyOption=_props.applyOption;applyOption(canvas,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyOption',value:function applyOption(option){var _props2=this.props;var canvas=_props2.canvas;var applyOption=_props2.applyOption;var index=_props2.index;option=Object.assign({},option,{index:index});applyOption(canvas,option);}}]);return Option;}(_react.Component);exports.default=Option;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Compression=require('./Compression');var _Compression2=_interopRequireDefault(_Compression);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Options:{displayName:'Options'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/options/Options.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/options/Options.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Options=_wrapComponent('Options')(function(_Component){_inherits(Options,_Component);function Options(){_classCallCheck(this,Options);return _possibleConstructorReturn(this,Object.getPrototypeOf(Options).apply(this,arguments));}_createClass(Options,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyOption=_props.applyOption;var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Options'),_react3.default.createElement(_Compression2.default,{index:index++,canvas:canvas,applyOption:applyOption}));}}]);return Options;}(_react2.Component));exports.default=Options;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Drawer=require('material-ui/Drawer');var _Drawer2=_interopRequireDefault(_Drawer);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _Options=require('../containers/Options');var _Options2=_interopRequireDefault(_Options);var _Filters=require('../containers/Filters');var _Filters2=_interopRequireDefault(_Filters);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Sidebar:{displayName:'Sidebar'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Sidebar.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Sidebar.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles={input:{marginTop:-35,width:220}};var Sidebar=_wrapComponent('Sidebar')(function(_Component){_inherits(Sidebar,_Component);function Sidebar(){_classCallCheck(this,Sidebar);return _possibleConstructorReturn(this,Object.getPrototypeOf(Sidebar).apply(this,arguments));}_createClass(Sidebar,[{key:'render',value:function render(){var _props=this.props;var open=_props.open;var canvas=_props.canvas;var applyFilter=_props.applyFilter;if(!canvas){return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'No Selected Canvas')));}return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Canvas'),_react3.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:"Canvas "+canvas.id,floatingLabelText:'Name',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'width',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.width,floatingLabelText:'Width',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'height',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.height,floatingLabelText:'Height',disabled:true})}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Layers'),canvas.layers.length?canvas.layers.map(function(layer,index){return _react3.default.createElement(_List.List,{key:"layer_"+index},_react3.default.createElement(_List.ListItem,{primaryText:"Layer "+index,secondaryText:_react3.default.createElement('p',{style:{wordWrap:"break-word"}},layer.filepath),secondaryTextLines:2,disabled:true}),layer.compressionRatio?_react3.default.createElement(_List.ListItem,{primaryText:'Compression Ratio',disabled:true,secondaryText:layer.compressionRatio+':1'}):null);}):_react3.default.createElement(_List.ListItem,{primaryText:'Empty',disabled:true})),_react3.default.createElement(_Divider2.default,null),canvas.layers.length?_react3.default.createElement(_Options2.default,{canvas:canvas}):null,canvas.layers.length?_react3.default.createElement(_Divider2.default,null):null,canvas.layers.length?_react3.default.createElement(_Filters2.default,{canvas:canvas}):null);}}]);return Sidebar;}(_react2.Component));exports.default=Sidebar;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={SidebarGroup:{displayName:'SidebarGroup'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var SidebarGroup=_wrapComponent('SidebarGroup')(function(_Component){_inherits(SidebarGroup,_Component);function SidebarGroup(props,content){_classCallCheck(this,SidebarGroup);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SidebarGroup).call(this,props,content));_this.state={checked:false};_this.onChecked=_this.onChecked.bind(_this);return _this;}_createClass(SidebarGroup,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState({checked:nextProps.checked});}},{key:'onChecked',value:function onChecked(event){var onChecked=this.props.onChecked;this.setState({checked:!this.state.checked});onChecked(event,!this.state.checked);event.stopPropagation();}},{key:'render',value:function render(){var _props=this.props;var title=_props.title;var controls=_props.controls;var checkbox=_props.checkbox;return _react3.default.createElement(_List.ListItem,{primaryText:title,nestedItems:controls,leftCheckbox:checkbox?_react3.default.createElement(_Checkbox2.default,{checked:this.state.checked,onClick:this.onChecked}):null});}}]);return SidebarGroup;}(_react2.Component));exports.default=SidebarGroup;SidebarGroup.defaultProps={onChecked:function onChecked(){}};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Canvas=require('../containers/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _Canvas3=require('../components/Canvas');var _electron=require('electron');var _Workspace=require('./Workspace.css');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Workspace:{displayName:'Workspace'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Workspace.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Workspace.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Workspace=_wrapComponent('Workspace')(function(_Component){_inherits(Workspace,_Component);function Workspace(props,content){_classCallCheck(this,Workspace);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Workspace).call(this,props,content));_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);_this.loadImage=_this.loadImage.bind(_this);_this.saveImage=_this.saveImage.bind(_this);return _this;}_createClass(Workspace,[{key:'componentDidMount',value:function componentDidMount(){_electron.ipcRenderer.on('load-image',this.loadImage);_electron.ipcRenderer.on('save-image',this.saveImage);}},{key:'componentWillUnmount',value:function componentWillUnmount(){_electron.ipcRenderer.removeAllListeners('load-image');_electron.ipcRenderer.removeAllListeners('save-image');}},{key:'onCanvasSelect',value:function onCanvasSelect(canvas){var selectCanvas=this.props.selectCanvas;selectCanvas(canvas);}},{key:'loadImage',value:function loadImage(event,canvas){var _props=this.props;var canvases=_props.canvases;var addCanvas=_props.addCanvas;var removeCanvas=_props.removeCanvas;if(!canvases[0].id){removeCanvas(canvases[0]);}var width=canvas.imageFile.width;var height=canvas.imageFile.height;var paths=canvas.imageFile.filepath.split('\\');addCanvas(Object.assign({},_Canvas3.canvasProps,{id:canvas.id,title:paths[paths.length-1],width:width,height:height,layers:[Object.assign({},canvas.imageFile,{filters:{}})],options:{},status:'rendering'}));}},{key:'saveImage',value:function saveImage(event,destination){var _props2=this.props;var canvases=_props2.canvases;var saveImage=_props2.saveImage;var canvas=canvases.find(function(canvas){return canvas.selected;});if(canvas.layers.length){saveImage(canvas,destination);}}},{key:'render',value:function render(){var _this2=this;var _props3=this.props;var canvases=_props3.canvases;var sidebarOpen=_props3.sidebarOpen;var connectDropTarget=_props3.connectDropTarget;return connectDropTarget(_react3.default.createElement('div',{className:_Workspace2.default.workspace,style:{width:'calc(100% - '+(sidebarOpen?256:0)+'px)',marginLeft:(sidebarOpen?256:0)+'px'}},canvases.map(function(canvas,index){return _react3.default.createElement(_Canvas2.default,{key:index,canvas:canvas,onSelect:_this2.onCanvasSelect});})));}}]);return Workspace;}(_react2.Component));exports.default=Workspace;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={App:{displayName:'App'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/App.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/App.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var App=_wrapComponent('App')((_temp=_class=function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,Object.getPrototypeOf(App).apply(this,arguments));}_createClass(App,[{key:'render',value:function render(){return _react3.default.createElement('div',null,this.props.children,function(){if(process.env.NODE_ENV!=='production'){var DevTools=require('./DevTools'); // eslint-disable-line global-require
return _react3.default.createElement(DevTools,null);}}());}}]);return App;}(_react2.Component),_class.propTypes={children:_react2.PropTypes.element.isRequired},_temp));exports.default=App;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _Canvas=require('../components/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var canvasSource={beginDrag:function beginDrag(props,monitor,component){var canvas=props.canvas;var rect=component.refs.canvas.getBoundingClientRect();return Object.assign({},canvas,{left:rect.left,top:rect.top-50});}};function collect(connect,monitor){return {connectDragSource:connect.dragSource(),connectDragPreview:connect.dragPreview(),isDragging:monitor.isDragging()};}function mapStateToProps(state){return {};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragSource)(_ItemTypes2.default.CANVAS,canvasSource,collect)(_Canvas2.default));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Counter=require('../components/Counter');var _Counter2=_interopRequireDefault(_Counter);var _counter=require('../actions/counter');var CounterActions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {counter:state.counter};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(CounterActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Counter2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reduxDevtools=require('redux-devtools');var _reduxDevtoolsLogMonitor=require('redux-devtools-log-monitor');var _reduxDevtoolsLogMonitor2=_interopRequireDefault(_reduxDevtoolsLogMonitor);var _reduxDevtoolsDockMonitor=require('redux-devtools-dock-monitor');var _reduxDevtoolsDockMonitor2=_interopRequireDefault(_reduxDevtoolsDockMonitor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_reduxDevtools.createDevTools)(_react2.default.createElement(_reduxDevtoolsDockMonitor2.default,{toggleVisibilityKey:'ctrl-h',changePositionKey:'ctrl-q'},_react2.default.createElement(_reduxDevtoolsLogMonitor2.default,null)));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Editor=require('../components/Editor');var _Editor2=_interopRequireDefault(_Editor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_Editor2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Filters=require('../components/filters/Filters');var _Filters2=_interopRequireDefault(_Filters);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Filters2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Home=require('../components/Home');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof3(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof3(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={HomePage:{displayName:'HomePage'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/HomePage.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/HomePage.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var HomePage=_wrapComponent('HomePage')(function(_Component){_inherits(HomePage,_Component);function HomePage(){_classCallCheck(this,HomePage);return _possibleConstructorReturn(this,Object.getPrototypeOf(HomePage).apply(this,arguments));}_createClass(HomePage,[{key:'render',value:function render(){return _react3.default.createElement(_Home2.default,null);}}]);return HomePage;}(_react2.Component));exports.default=HomePage;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default={CANVAS:'canvas'};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Options=require('../components/options/Options');var _Options2=_interopRequireDefault(_Options);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Options2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _reactDndHtml5Backend=require('react-dnd-html5-backend');var _reactDndHtml5Backend2=_interopRequireDefault(_reactDndHtml5Backend);var _Workspace=require('../components/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);var _WorkspaceActions=require('../actions/WorkspaceActions');var workspaceActions=_interopRequireWildcard(_WorkspaceActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var editorTarget={drop:function drop(props,monitor,component){var moveCanvas=props.moveCanvas;var sidebarOpen=props.sidebarOpen;var item=monitor.getItem();var delta=monitor.getDifferenceFromInitialOffset();var left=Math.round(item.left+delta.x)-(sidebarOpen?256:0);var top=Math.round(item.top+delta.y);moveCanvas(Object.assign({},item,{left:left,top:top}));}};function collect(connect){return {connectDropTarget:connect.dropTarget()};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(workspaceActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)((0,_reactDnd.DropTarget)(_ItemTypes2.default.CANVAS,editorTarget,collect)(_Workspace2.default)));module.exports=exports['default'];'use strict';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactRedux=require('react-redux');var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _routes=require('./routes');var _routes2=_interopRequireDefault(_routes);var _configureStore=require('./store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);var _getMuiTheme=require('material-ui/styles/getMuiTheme');var _getMuiTheme2=_interopRequireDefault(_getMuiTheme);var _MuiThemeProvider=require('material-ui/styles/MuiThemeProvider');var _MuiThemeProvider2=_interopRequireDefault(_MuiThemeProvider);var _reactTapEventPlugin=require('react-tap-event-plugin');var _reactTapEventPlugin2=_interopRequireDefault(_reactTapEventPlugin);require('./app.global.css');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var store=(0,_configureStore2.default)();var history=(0,_reactRouterRedux.syncHistoryWithStore)(_reactRouter.hashHistory,store);(0,_reactTapEventPlugin2.default)();(0,_reactDom.render)(_react2.default.createElement(_MuiThemeProvider2.default,{muiTheme:(0,_getMuiTheme2.default)()},_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_reactRouter.Router,{history:history,routes:_routes2.default}))),document.getElementById('root'));'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=counter;var _counter=require('../actions/counter');function counter(){var state=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var action=arguments[1];switch(action.type){case _counter.INCREMENT_COUNTER:return state+1;case _counter.DECREMENT_COUNTER:return state-1;default:return state;}}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRouterRedux=require('react-router-redux');var _Canvas=require('../components/Canvas');var _WorkspaceActions=require('../actions/WorkspaceActions');var _counter=require('./counter');var _counter2=_interopRequireDefault(_counter);var _renderer=require('./renderer');var _renderer2=_interopRequireDefault(_renderer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function workspaceReducer(){var state=arguments.length<=0||arguments[0]===undefined?[Object.assign({},_Canvas.canvasProps,{selected:true})]:arguments[0];var action=arguments[1];state=(0,_renderer2.default)(state,action);var status=void 0;if(action.type===_WorkspaceActions.COMPRESS_IMAGE||action.type===_WorkspaceActions.SAVE_IMAGE){return state.map(function(canvas){if(canvas.id===action.payload.id){return action.payload;}return canvas;});}return state;}var rootReducer=(0,_redux.combineReducers)({ //counter,
canvases:workspaceReducer,routing:_reactRouterRedux.routerReducer});exports.default=rootReducer;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=renderer;var _WorkspaceActions=require('../actions/WorkspaceActions');var _CanvasActions=require('../actions/CanvasActions');var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function canvasRenderer(state,action){if(!state.id||action.payload.id!==state.id){return state;}if(action.type===_CanvasActions.INIT_CONTEXT&&!state.context){return action.payload;}if(action.type===_CanvasActions.APPLY_OPTION){return action.payload;}if(action.type===_CanvasActions.APPLY_FILTER){return Object.assign({},action.payload,{status:'rendering'});}if(action.type===_CanvasActions.RENDER_LAYER){return Object.assign({},state,action.payload,{status:'ready'});}if(action.type===_CanvasActions.RENDER_LAYERS){return Object.assign({},state,action.payload,{status:'ready'});}return state;}function renderer(state,action){state=state.map(function(canvas){return canvasRenderer(canvas,action);});if(action.type===_WorkspaceActions.ADD_CANVAS){return [].concat(_toConsumableArray(state.map(function(canvas){return Object.assign({},canvas,{selected:false});})),[Object.assign({},action.payload,{selected:true})]);}if(action.type===_WorkspaceActions.REMOVE_CANVAS){return state.filter(function(canvas){return canvas!==action.payload;});}if(action.type===_WorkspaceActions.MOVE_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,action.payload);}return canvas;});}if(action.type===_WorkspaceActions.SELECT_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,{selected:true});}return Object.assign({},canvas,{selected:false});});}return state;}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactRouter=require('react-router');var _App=require('./containers/App');var _App2=_interopRequireDefault(_App);var _Editor=require('./containers/Editor');var _Editor2=_interopRequireDefault(_Editor);var _CounterPage=require('./containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=_react2.default.createElement(_reactRouter.Route,{path:'/',component:_App2.default},_react2.default.createElement(_reactRouter.IndexRoute,{component:_Editor2.default}),'/* ',_react2.default.createElement(_reactRouter.Route,{path:'/counter',component:_CounterPage2.default}),' */');module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxDevtools=require('redux-devtools');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reduxLogger=require('redux-logger');var _reduxLogger2=_interopRequireDefault(_reduxLogger);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);var _DevTools=require('../containers/DevTools');var _DevTools2=_interopRequireDefault(_DevTools);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var logger=(0,_reduxLogger2.default)({level:'info',collapsed:true});var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.compose)((0,_redux.applyMiddleware)(_reduxThunk2.default,router,logger),_DevTools2.default.instrument(),(0,_reduxDevtools.persistState)(window.location.href.match(/[?&]debug_session=([^&]+)\b/)));function configureStore(initialState){var store=(0,_redux.createStore)(_reducers2.default,initialState,enhancer);if(module.hot){module.hot.accept('../reducers',function(){return store.replaceReducer(require('../reducers'));} // eslint-disable-line global-require
);}return store;}module.exports=exports['default'];'use strict';if(process.env.NODE_ENV==='production'){module.exports=require('./configureStore.production'); // eslint-disable-line global-require
}else {module.exports=require('./configureStore.development'); // eslint-disable-line global-require
}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.applyMiddleware)(_reduxThunk2.default,router);function configureStore(initialState){return (0,_redux.createStore)(_reducers2.default,initialState,enhancer);}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.createVertexShader=createVertexShader;exports.createFragmentShader=createFragmentShader;exports.initContext=initContext;exports.renderLayer=renderLayer;exports.getPixels=getPixels;exports.getPixel=getPixel;exports.cleanUp=cleanUp;exports.runLengthEncode=runLengthEncode;exports.huffmanEncode=huffmanEncode;exports.lzwEncode=lzwEncode;exports.exportCanvasAsImage=exportCanvasAsImage;var _imageSpatial=require('../shaders/image-spatial.vert');var _imageSpatial2=_interopRequireDefault(_imageSpatial);var _imageRaster=require('../shaders/image-raster.frag');var _imageRaster2=_interopRequireDefault(_imageRaster);var _stream=require('stream');var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);var _HuffmanTree=require('./HuffmanTree');var _HuffmanTree2=_interopRequireDefault(_HuffmanTree);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function isError(gl,shader){if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){var info=gl.getShaderInfoLog(shader);gl.deleteShader(shader);console.error("Could not compile vertex shader. \n\n"+info);return true;}return false;}function createVertexShader(gl,program){var shader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(shader,_imageSpatial2.default);gl.compileShader(shader);if(isError(gl,shader)){return null;}return shader;}function createFragmentShader(gl,program){var shader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(shader,_imageRaster2.default);gl.compileShader(shader);if(isError(gl,shader)){return;}return shader;}function initContext(canvas,gl){var context={gl:gl}; //create and init shaders
var program=gl.createProgram();var vertexShader=createVertexShader(gl,program);var fragmentShader=createFragmentShader(gl,program);if(!vertexShader||!fragmentShader){gl.deleteProgram(program);return;}gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){var info=gl.getProgramInfoLog(program);console.error("Error in program linking:"+info);cleanUp(context);return;}gl.useProgram(program); //create texture coordinate buffer
var vertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0]),gl.STATIC_DRAW); //specify the location of the texture coordinate data
var texCoordInLocation=gl.getAttribLocation(program,"a_texCoord");gl.enableVertexAttribArray(texCoordInLocation);gl.vertexAttribPointer(texCoordInLocation,2,gl.FLOAT,false,0,0); // set the resolution
var resolutionLocation=gl.getUniformLocation(program,"u_resolution");gl.uniform2f(resolutionLocation,canvas.width,canvas.height);return Object.assign({},context,{program:program,vertexShader:vertexShader,fragmentShader:fragmentShader});}function isPowerOfTwo(x){return (x&x-1)==0;}function nextHighestPowerOfTwo(x){--x;for(var i=1;i<32;i<<=1){x=x|x>>i;}return x+1;}function renderLayer(context,layer,layerIndex){if(layerIndex>31){console.error("Only up to 32 layers per Canvas is supported");return;}var gl=context.gl; // apply filters
var filters=_lodash2.default.values(layer.filters).sort(function(a,b){return a.index-b.index;});filters.forEach(function(options){if(!options.disabled){layer=options.filter(layer,context,options);}});var register=gl['TEXTURE'+layerIndex];var program=context.program;var width=isPowerOfTwo(layer.width)?layer.width:nextHighestPowerOfTwo(layer.width);var height=isPowerOfTwo(layer.height)?layer.height:nextHighestPowerOfTwo(layer.height);var texture=gl.createTexture();var pixels=new Uint8Array(3*width*height);var offset=width-layer.width;var index=0;var rowIndex=0; //map pixels for grayscale
layer.pixels.forEach(function(pixel){var remaining=layer.width-index;if(remaining%layer.width===0){rowIndex=index/layer.width;}pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;}); //create pixel data buffer
var textureBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,textureBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,width,0.0,0.0,height,0.0,height,width,0.0,width,height]),gl.STATIC_DRAW); //specify the location of the pixel position data
var positionLocation=gl.getAttribLocation(program,"a_position");gl.enableVertexAttribArray(positionLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,0,0); //config texture
gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,width,height,0,gl.RGB,gl.UNSIGNED_BYTE,pixels); //render
gl.clearColor(0.0,0.0,0.0,1.0);gl.clear(gl.COLOR_BUFFER_BIT);gl.activeTexture(register);gl.drawArrays(gl.TRIANGLES,0,6); // cleanup
gl.deleteBuffer(textureBuffer);gl.deleteTexture(texture);}function getPixels(canvas){var gl=canvas.context.gl;var pixels=new Uint8Array(4*canvas.width*canvas.height);gl.readPixels(0,0,canvas.width,canvas.height,gl.RGBA,gl.UNSIGNED_BYTE,pixels);var last=pixels.length/4-1;var rawPixels=[];var index=last;var offset=0;for(var i=0;i<pixels.length;i+=4){var pixel=Math.round((pixels[i]+pixels[i+1]+pixels[i+2])/3);if((index+1)%canvas.width===0){offset=index;}rawPixels[offset+(offset-index--)]=pixel;}return rawPixels;}function getPixel(canvas,x,y){var gl=canvas.context.gl;var pixel=new Uint8Array(4);gl.readPixels(x,canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel);return pixel[0];}function cleanUp(context){if(!context){return;}var gl=context.gl;gl.deleteProgram(context.program);gl.deleteShader(context.vertexShader);gl.deleteShader(context.fragmentShader);}function runLengthEncode(stream,pixels,width,height,mode){var magicNumber='E2';var count=1;var prev=void 0;if(mode===1){magicNumber='E1';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel,index){if(prev===pixel){count++;}else if(prev!==undefined&&prev!==pixel){if(mode===1){ // ASCII
stream.write(prev+' '+count+(index===pixels.length-1?'\n':' '));}else { // BIN
var pixelBuffer=new Buffer.allocUnsafe(1);var countBuffer=new Buffer(4);pixelBuffer.writeUInt8(prev);countBuffer.writeUInt32BE(count);stream.write(pixelBuffer);stream.write(countBuffer);}count=1;}prev=pixel;});}function huffmanEncode(stream,pixels,width,height,mode){var histogram={};pixels.forEach(function(pixel){if(histogram[pixel]){histogram[pixel]++;}else {histogram[pixel]=1;}});var tree=new _HuffmanTree2.default(histogram,',',pixels.length);var codeBook={};tree.leaves.forEach(function(node){if(node===tree.root){return;}var token=node.token;codeBook[token]=node.bit;while(node.parent!==tree.root){node=node.parent;codeBook[token]=node.bit+codeBook[token];}});var encoded='';pixels.forEach(function(pixel,index){encoded+=codeBook[pixel.toString()];});var chunks=encoded.match(/.{1,8}/g);var magicNumber='E4';if(mode===1){magicNumber='E3';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');Object.keys(codeBook).forEach(function(key){var buffer=new Buffer(2);buffer.writeUInt8(parseInt(key));buffer.writeUInt8(parseInt(codeBook[key],2),1);stream.write(buffer);});stream.write('\n');chunks.forEach(function(chunk,index){var byte=parseInt(chunk,2);if(mode===1){ // ASCII
stream.write(byte+' ');}else { // BIN
var buffer=new Buffer(1);buffer.writeUInt8(byte);stream.write(buffer);}});}function lzwEncode(stream,pixels,width,height,mode){var max=Math.pow(2,16);var writeBytes=function writeBytes(bytes){if(mode===1){ // ASCII
stream.write(bytes+' ');}else { // BIN
var buffer=new Buffer(2);buffer.writeUInt16BE(bytes);stream.write(buffer);}};var output=void 0;var index=255;var prev='';var dictionary={};var magicNumber='E6';if(mode===1){magicNumber='E5';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel){var key=prev+' '+pixel;if(dictionary[key]){prev=key;}else {output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);if(index+1>255){dictionary[key]=++index;}prev=pixel;}});output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);}function exportCanvasAsImage(canvas,destination){var stream=_fs2.default.createWriteStream(destination);var pixels=getPixels(canvas);var method=canvas.options.COMPRESSION?canvas.options.COMPRESSION.method:0;var mode=canvas.options.COMPRESSION?canvas.options.COMPRESSION.mode:0;if(method===1){ // Run length encoding
runLengthEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===2){ // huffman
huffmanEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===3){ // differential PCM
}else if(method===4){ // LZW
lzwEncode(stream,pixels,canvas.width,canvas.height,mode);}else {stream.write('P5\n'+canvas.width+' '+canvas.height+'\n255\n');pixels.forEach(function(pixel,index){var buffer=new Buffer.allocUnsafe(1);buffer.writeUInt8(pixel);stream.write(buffer);});}stream.end();}'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var HuffmanTree=function HuffmanTree(histogram,seperator,total){_classCallCheck(this,HuffmanTree);seperator=seperator||'';var nodes=Object.keys(histogram).map(function(key){return {token:key.toString(),probability:histogram[key]/total,parent:null};});nodes.sort(function(current,next){return current.probability-next.probability;});this.leaves=[].concat(_toConsumableArray(nodes));while(nodes.length){var current=nodes.shift();var next=nodes.shift();if(next){var parent={token:current.token+seperator+next.token,probability:current.probability+next.probability,left:current,right:next};current.parent=parent;current.bit='0';next.parent=parent;next.bit='1';nodes.push(parent);if(parent.probability<nodes[nodes.length-1].probability){nodes.sort(function(current,next){return current.probability-next.probability;});}}else {this.root=current;}}};exports.default=HuffmanTree;module.exports=exports['default'];"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runLengthDecode=runLengthDecode;function runLengthDecode(data){var pixels=[];var prev=void 0;data.forEach(function(value,index){if(index%2===1){var count=value;for(var i=0;i<count;i++){pixels.push(prev);}}prev=value;});return pixels;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lineReader=require('line-reader');var _lineReader2=_interopRequireDefault(_lineReader);var _PBMFileReader=require('./PBMFileReader');var _PBMFileReader2=_interopRequireDefault(_PBMFileReader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var PBM_COMPRESSED_FORMATS={ //"E1" : "PGM_ASCII_RLE_COMPRESSED",
"E2":"PGM_BIN_RLE_COMPRESSED", //"E3" : "PGM_ASCII_HME_COMPRESSED",
"E4":"PGM_BIN_HME_COMPRESSED", //"E5" : "PGM_ASCII_LZW_COMPRESSED",
"E6":"PGM_BIN_LZW_COMPRESSED"};var PBM_IMAGE_FORMATS=Object.assign({},{ //"P1" : "PBM_ASCII",
"P2":"PGM_ASCII", //"P3" : "PPM_ASCII",
//"P4" : "PBM_BIN",
"P5":"PGM_BIN"}, //"P6" : "PPM_BIN",
PBM_COMPRESSED_FORMATS);var PBMAsciiReader=function(){function PBMAsciiReader(filepath,onLine,onClose){var _this=this;_classCallCheck(this,PBMAsciiReader);var index=0;_lineReader2.default.eachLine(filepath,function(line,last){if(onLine){onLine(line,index++,last);}if(last||_this.error){onClose(_this.error);return false;}});}_createClass(PBMAsciiReader,[{key:'close',value:function close(error){this.error=error;}}]);return PBMAsciiReader;}();var ImageFile=function(){function ImageFile(filepath){_classCallCheck(this,ImageFile);this.filepath=filepath;this.length=0;this.pixels=[];}_createClass(ImageFile,[{key:'on',value:function on(event,callback){this[event]=callback;}},{key:'load',value:function load(){var _this2=this;var onLoad=this['load-data']||function(){};var onError=this['load-error']||function(error){};var onComplete=this['load-complete']||function(){};var complete=function complete(){var length=_this2.pixels.length*8;if(_this2.length!==length){_this2.compressionRatio=Math.ceil(length/_this2.length);}onComplete();console.log('Loaded image: '+_this2.filepath+' '+_this2.width+' '+_this2.height+' '+_this2.colorBits);};var getImagePixels=function getImagePixels(pixels){_this2.length+=pixels.length;pixels.forEach(function(pixel){_this2.pixels.push(pixel);});return pixels;};var fd=_fs2.default.openSync(this.filepath,'r');if(!fd){onError('Unable to open file');return;}var header=new Buffer(2);_fs2.default.readSync(fd,header,0,2,0);this.format=PBM_IMAGE_FORMATS[header.toString()];if(!this.format){_fs2.default.close(fd,function(){return onError('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));});}else {if(this.format.indexOf('_ASCII')!==-1){(function(){_fs2.default.close(fd);var reader=new PBMAsciiReader(_this2.filepath,function(line,index){if(index===0)return;if(!line.startsWith('#')){if(!_this2.width&&!_this2.height){var resolution=line.split(/\s+/);_this2.width=parseInt(resolution[0]);_this2.height=parseInt(resolution[1]);}else if(!_this2.colorBits){_this2.colorBits=parseInt(line);}else if(_this2['load-init']){_this2['load-init']();delete _this2['load-init'];onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else if(onLoad){onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else {reader.close('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));}}},function(err){if(err){onError(err);}else {complete();}});})();}else if(this.format.indexOf('_BIN')!==-1){var _reader=new _PBMFileReader2.default(fd,this.format);Object.assign(this,_reader.getInfo());this['load-init']();this.length=_reader.readPixels(function(pixels){return onLoad(getImagePixels(pixels));},64);_fs2.default.close(fd,complete);}else {fd.close(fd,function(){return onError('Unexpected error');});}}}}]);return ImageFile;}();exports.default=ImageFile;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _typeof=typeof Symbol==="function"&&_typeof3(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof3(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof3(obj);};var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _imageUtils=require('./image-utils');var imageUtils=_interopRequireWildcard(_imageUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function defaultReducer(pixels){return pixels;}function readBytes(fd,position){var length=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var buffer=new Buffer(length);var size=_fs2.default.readSync(fd,buffer,0,length,position);if(length!==size){buffer=Buffer.from(buffer,0,size);}return buffer;}function getUTF8String(fd,offset,term){var content='';var buffer=new Buffer(1);if(offset){readBytes(fd,offset);}var _loop=function _loop(){buffer=readBytes(fd);var val=buffer.toString();if(!term){return {v:val};}else if(Array.isArray(term)&&term.find(function(term){return val===term;})){return {v:content};}else if(val===term){return {v:content};}else {content+=val;}};while(buffer.length){var _ret=_loop();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}}function readPGMBinary(fd,collector,position,term){collector=collector||function(){};var buffer=readBytes(fd,position);var length=0;while(buffer.length){length+=8;collector(buffer);buffer=readBytes(fd);if(term&&term==buffer.toString()){break;}}return length;}function readPGMCompressedRLE(fd,collector,position){collector=collector||function(){};var pixelBuffer=readBytes(fd,position);var length=0;while(pixelBuffer.length){length+=8;collector(pixelBuffer);var countBuffer=new Buffer(4);for(var i=0;i<4;i++){ // read 4 bytes or a 32 bit unsigned integer
countBuffer[i]=readBytes(fd)[0];}length+=32;collector(countBuffer);pixelBuffer=readBytes(fd);}return length;}function readPGMCompressedHME(fd,collector,position){var index=0;var codeBook={};var value=void 0;var length=0;readPGMBinary(fd,function(buffer){if(index++%2===0){value=buffer.readUInt8(0);}else {codeBook[buffer.readUInt8(0).toString(2)]=value;}length+=8;},position,'\n');var encoded='';readPGMBinary(fd,function(buffer){var binary=buffer.readUInt8(0).toString(2);encoded+="00000000".substring(0,8-binary.length)+binary;length+=8;});value=null;var code='';for(var i=0;i<encoded.length;i++){code+=encoded.charAt(i);value=codeBook[code];if(value!==null){collector(value);code='';value=null;}}return length;}function readPGMCompressedLZW(fd,collector,position){collector=collector||function(){};var buffer=readBytes(fd,position,2);var prev=void 0;var index=255;var dictionary={};var length=0;while(buffer.length){length+=16;var bytes=buffer.readUInt16BE(0);var pixels=dictionary[bytes]?dictionary[bytes].split(' '):[bytes];pixels.forEach(function(pixel){collector(parseInt(pixel));});if(prev!==undefined){dictionary[++index]=prev+' '+pixels[0];}prev=pixels.join(' ');buffer=readBytes(fd,2);}return length;}var PBMFileReader=function(){function PBMFileReader(fd,format){_classCallCheck(this,PBMFileReader);this.fd=fd;this.format=format;}_createClass(PBMFileReader,[{key:'getInfo',value:function getInfo(){var width=void 0,height=void 0,colorBits=void 0;var str=getUTF8String(this.fd,2,[' ','\n']);while(str&&(!width||!height||!colorBits)){if(str.indexOf('#')===0){str=getUTF8String(this.fd,null,'\n');}else if(!width){width=parseInt(str);str=getUTF8String(this.fd,null,[' ','\n']);}else if(!height){height=parseInt(str);str=getUTF8String(this.fd,null,'\n');}else if(!colorBits){colorBits=parseInt(str);if(!colorBits){str=getUTF8String(this.fd,null,'\n');}}}return {width:width,height:height,colorBits:colorBits};}},{key:'readPixels',value:function readPixels(onRead,batchSize){var processor=defaultReducer;var pixels=[];var length=0;var collector=function collector(data){if(data!==undefined){if(Number.isInteger(data)){pixels.push(data);}else if(data.length===4){pixels.push(data.readUInt32BE(0));}else {pixels.push(data.readUInt8(0));}if(pixels.length===batchSize){onRead(processor(pixels));pixels=[];}}};if(this.format.indexOf('PGM_BIN_RLE')===0){processor=imageUtils.runLengthDecode;length=readPGMCompressedRLE(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_HME')===0){length=readPGMCompressedHME(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_LZW')===0){length=readPGMCompressedLZW(this.fd,collector);}else if(this.format.indexOf('PGM_BIN')===0){length=readPGMBinary(this.fd,collector);}if(pixels.length){onRead(processor(pixels));}return length;}}]);return PBMFileReader;}();exports.default=PBMFileReader;module.exports=exports['default'];'use strict';var _typeof2=typeof Symbol==="function"&&_typeof3(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof3(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof3(obj);};Object.defineProperty(exports,"__esModule",{value:true});exports.RENDER_LAYERS=exports.RENDER_LAYER=exports.APPLY_OPTION=exports.APPLY_FILTER=exports.INIT_CONTEXT=undefined;exports.initContext=initContext;exports.applyFilter=applyFilter;exports.applyOption=applyOption;exports.renderLayer=renderLayer;exports.renderLayers=renderLayers;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}var INIT_CONTEXT=exports.INIT_CONTEXT='INIT_CANVAS';var APPLY_FILTER=exports.APPLY_FILTER='APPLY_FILTER';var APPLY_OPTION=exports.APPLY_OPTION='APPLY_OPTION';var RENDER_LAYER=exports.RENDER_LAYER='RENDER_LAYER';var RENDER_LAYERS=exports.RENDER_LAYERS='RENDER_LAYERS';function initContext(canvas,gl){return function(dispatch){return dispatch({type:INIT_CONTEXT,payload:Object.assign({},canvas,{context:canvasUtils.initContext(canvas,gl)})});};}function applyFilter(canvas,layer,filter){return function(dispatch){var chain=function chain(canvas,dispatch){};var layers=canvas.layers.map(function(_layer,index){if(layer===_layer){_layer=Object.assign({},layer,{filters:Object.assign({},layer.filters,_defineProperty({},filter.type,filter))});chain=function chain(canvas,dispatch){renderLayer(canvas,_layer,index)(dispatch);};}return _layer;});canvas=Object.assign({},canvas,{layers:layers});dispatch({type:APPLY_FILTER,payload:canvas});chain(canvas,dispatch);};}function applyOption(canvas,option){return function(dispatch){dispatch({type:APPLY_OPTION,payload:Object.assign({},canvas,{options:Object.assign({},canvas.options,_defineProperty({},option.type,option))})});};}function renderLayer(canvas,layer,index){return function(dispatch){canvasUtils.renderLayer(canvas.context,layer,index);dispatch({type:RENDER_LAYER,payload:canvas});};}function renderLayers(canvas){return function(dispatch){canvas.layers.forEach(function(layer,index){canvasUtils.renderLayer(canvas.context,layer,index);});dispatch({type:RENDER_LAYERS,payload:canvas});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.increment=increment;exports.decrement=decrement;exports.incrementIfOdd=incrementIfOdd;exports.incrementAsync=incrementAsync;var INCREMENT_COUNTER=exports.INCREMENT_COUNTER='INCREMENT_COUNTER';var DECREMENT_COUNTER=exports.DECREMENT_COUNTER='DECREMENT_COUNTER';function increment(){return {type:INCREMENT_COUNTER};}function decrement(){return {type:DECREMENT_COUNTER};}function incrementIfOdd(){return function(dispatch,getState){var _getState=getState();var counter=_getState.counter;if(counter%2===0){return;}dispatch(increment());};}function incrementAsync(){var delay=arguments.length<=0||arguments[0]===undefined?1000:arguments[0];return function(dispatch){setTimeout(function(){dispatch(increment());},delay);};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_IMAGE=exports.COMPRESS_IMAGE=exports.SELECT_CANVAS=exports.MOVE_CANVAS=exports.REMOVE_CANVAS=exports.ADD_CANVAS=undefined;exports.addCanvas=addCanvas;exports.removeCanvas=removeCanvas;exports.moveCanvas=moveCanvas;exports.selectCanvas=selectCanvas;exports.saveImage=saveImage;var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var ADD_CANVAS=exports.ADD_CANVAS='ADD_CANVAS';var REMOVE_CANVAS=exports.REMOVE_CANVAS='REMOVE_CANVAS';var MOVE_CANVAS=exports.MOVE_CANVAS='MOVE_CANVAS';var SELECT_CANVAS=exports.SELECT_CANVAS='SELECT_CANVAS';var COMPRESS_IMAGE=exports.COMPRESS_IMAGE='COMPRESS_IMAGE';var SAVE_IMAGE=exports.SAVE_IMAGE='SAVE_IMAGE';function addCanvas(canvas){return function(dispatch){return dispatch({type:ADD_CANVAS,payload:canvas});};}function removeCanvas(canvas){return function(dispatch){return dispatch({type:REMOVE_CANVAS,payload:canvas});};}function moveCanvas(canvas){return function(dispatch){return dispatch({type:MOVE_CANVAS,payload:canvas});};}function selectCanvas(canvas){return function(dispatch){return dispatch({type:SELECT_CANVAS,payload:canvas});};}function saveImage(canvas,destination){return function(dispatch){dispatch({type:COMPRESS_IMAGE,payload:Object.assign({},canvas,{status:'compressing'})});canvasUtils.exportCanvasAsImage(canvas,destination);dispatch({type:SAVE_IMAGE,payload:Object.assign({},canvas,{status:'ready'})});};}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.canvasProps=undefined;var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactDom=require('react-dom');var _Canvas=require('./Canvas.css');var _Canvas2=_interopRequireDefault(_Canvas);var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _electron=require('electron');var _Card=require('material-ui/Card');var _CircularProgress=require('material-ui/CircularProgress');var _CircularProgress2=_interopRequireDefault(_CircularProgress);var _Paper=require('material-ui/Paper');var _Paper2=_interopRequireDefault(_Paper);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Canvas:{displayName:'Canvas'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Canvas.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Canvas.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles=Object.assign({},_Canvas2.default,{progress:{margin:'-15px 0 0 -15px'}});var Canvas=_wrapComponent('Canvas')(function(_Component){_inherits(Canvas,_Component);function Canvas(props,content){_classCallCheck(this,Canvas);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Canvas).call(this,props,content));_this.onLoadData=_this.onLoadData.bind(_this);_this.onLoadComplete=_this.onLoadComplete.bind(_this);_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);return _this;}_createClass(Canvas,[{key:'componentDidMount',value:function componentDidMount(){var _props=this.props;var initContext=_props.initContext;var canvas=_props.canvas;var gl=this.refs.canvas.getContext('webgl',{preserveDrawingBuffer:true});initContext(canvas,gl);_electron.ipcRenderer.on('load-data',this.onLoadData);_electron.ipcRenderer.on('load-complete',this.onLoadComplete);}},{key:'componentWillUnmount',value:function componentWillUnmount(){var canvas=this.props.canvas;canvasUtils.cleanUp(canvas.context);_electron.ipcRenderer.removeListener('load-data',this.onLoadData);_electron.ipcRenderer.removeListener('load-complete',this.onLoadComplete);}},{key:'onLoadData',value:function onLoadData(event,data){var canvas=this.props.canvas;if(canvas.id!==data.id){return;}var layer=canvas.layers.find(function(layer){return layer.filepath===data.filepath;});for(var i=0;i<data.pixels.length;i++){layer.pixels.push(data.pixels[i]);}}},{key:'onLoadComplete',value:function onLoadComplete(event,data){var renderLayers=this.props.renderLayers;var canvas=this.props.canvas;if(canvas.id!==data.id){return;}if(data.compressionRatio){var layers=canvas.layers.map(function(layer){if(layer.filepath===data.filepath){return Object.assign({},layer,{compressionRatio:data.compressionRatio});}return layer;});canvas=Object.assign({},canvas,{layers:layers});}renderLayers(canvas);}},{key:'onCanvasSelect',value:function onCanvasSelect(event){var _props2=this.props;var canvas=_props2.canvas;var onSelect=_props2.onSelect;if(!canvas.layers.length){return;}if(!canvas.selected){onSelect(canvas);return;}var rect=this.refs.canvas.getBoundingClientRect();var xPosition=event.clientX-rect.left;var yPosition=event.clientY-rect.top;_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_POS',{xPosition:xPosition,yPosition:yPosition});_pubsubJs2.default.publish('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR',{targetColor:canvasUtils.getPixel(canvas,xPosition,yPosition)});}},{key:'render',value:function render(){var _props3=this.props;var canvas=_props3.canvas;var connectDragPreview=_props3.connectDragPreview;var connectDragSource=_props3.connectDragSource;var isDragging=_props3.isDragging;return connectDragPreview(_react3.default.createElement('div',{className:styles.canvasContainer,selected:canvas.selected,style:{left:canvas.left,top:canvas.top,width:canvas.width,height:canvas.height+50,opacity:isDragging?0:1,zIndex:canvas.selected?1000:1}},_react3.default.createElement(_Paper2.default,{zDepth:2},_react3.default.createElement(_Card.Card,null,_react3.default.createElement(_Card.CardHeader,{title:canvas.title,avatar:canvas.status==='ready'?null:_react3.default.createElement(_CircularProgress2.default,{style:styles.progress,size:0.5}),style:{cursor:"move",maxHeight:'50px'},ref:function ref(cardHeader){return connectDragSource((0,_reactDom.findDOMNode)(cardHeader));},titleStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),_react3.default.createElement(_Card.CardMedia,null,_react3.default.createElement('canvas',{id:'canvas',className:styles.canvas,onClick:this.onCanvasSelect,width:canvas.width,height:canvas.height,ref:'canvas'}))))));}}]);return Canvas;}(_react2.Component));exports.default=Canvas;var canvasProps=exports.canvasProps={top:10,left:10,width:640,height:320,title:"<No Content>",layers:[],status:'ready'};Canvas.defaultProps=canvasProps;'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;var _reactRouter=require('react-router');var _Counter=require('./Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Counter:{displayName:'Counter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Counter.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Counter.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Counter=_wrapComponent('Counter')((_temp=_class=function(_Component){_inherits(Counter,_Component);function Counter(){_classCallCheck(this,Counter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Counter).apply(this,arguments));}_createClass(Counter,[{key:'render',value:function render(){var _props=this.props;var increment=_props.increment;var incrementIfOdd=_props.incrementIfOdd;var incrementAsync=_props.incrementAsync;var decrement=_props.decrement;var counter=_props.counter;return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Counter2.default.backButton},_react3.default.createElement(_reactRouter.Link,{to:'/'},_react3.default.createElement('i',{className:'fa fa-arrow-left fa-3x'}))),_react3.default.createElement('div',{className:'counter '+_Counter2.default.counter},counter),_react3.default.createElement('div',{className:_Counter2.default.btnGroup},_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:increment},_react3.default.createElement('i',{className:'fa fa-plus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:decrement},_react3.default.createElement('i',{className:'fa fa-minus'})),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:incrementIfOdd},'odd'),_react3.default.createElement('button',{className:_Counter2.default.btn,onClick:function onClick(){return incrementAsync();}},'async')));}}]);return Counter;}(_react2.Component),_class.propTypes={increment:_react2.PropTypes.func.isRequired,incrementIfOdd:_react2.PropTypes.func.isRequired,incrementAsync:_react2.PropTypes.func.isRequired,decrement:_react2.PropTypes.func.isRequired,counter:_react2.PropTypes.number.isRequired},_temp));exports.default=Counter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Sidebar=require('../components/Sidebar');var _Sidebar2=_interopRequireDefault(_Sidebar);var _Workspace=require('../containers/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Editor:{displayName:'Editor'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Editor.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Editor.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Editor=_wrapComponent('Editor')(function(_Component){_inherits(Editor,_Component);function Editor(){_classCallCheck(this,Editor);return _possibleConstructorReturn(this,Object.getPrototypeOf(Editor).apply(this,arguments));}_createClass(Editor,[{key:'render',value:function render(){var canvases=this.props.canvases;var canvas=canvases.find(function(canvas){return canvas.selected;});var sidebarOpen=canvas!==undefined;return _react3.default.createElement('div',null,_react3.default.createElement(_Sidebar2.default,{canvas:canvas,open:sidebarOpen}),_react3.default.createElement(_Workspace2.default,{sidebarOpen:sidebarOpen}));}}]);return Editor;}(_react2.Component));exports.default=Editor;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _toggle=require('material-ui/toggle');var _toggle2=_interopRequireDefault(_toggle);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var BitPlanes=function(_Filter){_inherits(BitPlanes,_Filter);function BitPlanes(props,content){_classCallCheck(this,BitPlanes);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BitPlanes).call(this,props,content));var planes={};for(var i=1;i<=8;i++){planes[i]=true;}_this.defaultState={type:'BIT_PLANES',disabled:true,filter:Filters.bitPlanes,planes:planes};_this.state=Object.assign({},_this.defaultState);_this.onToggleChange=_this.onToggleChange.bind(_this);return _this;}_createClass(BitPlanes,[{key:'onToggleChange',value:function onToggleChange(event){var target=event.target.id.split('_')[1];var bit=Object.keys(this.state.planes).find(function(bit){return bit==target;});var planes=this.state.planes;if(bit){planes=Object.assign({},this.state.planes,_defineProperty({},bit,!this.state.planes[bit]));}var options={planes:planes};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var _this2=this;var controls=Object.keys(this.state.planes).map(function(bit){return _react2.default.createElement(_List.ListItem,{key:"plane_"+bit,primaryText:"Plane "+bit,rightToggle:_react2.default.createElement(_toggle2.default,{id:"plane_"+bit,toggled:_this2.state.planes[bit],onToggle:_this2.onToggleChange,disabled:_this2.state.disabled})});});return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Bit Plane Slicing'});}}]);return BitPlanes;}(_Filter3.default);exports.default=BitPlanes;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var BoundaryFill=function(_ColorFill){_inherits(BoundaryFill,_ColorFill);function BoundaryFill(props,content){_classCallCheck(this,BoundaryFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BoundaryFill).call(this,props,content));_this.defaultState={type:'BOUNDARY_FILL',filter:Filters.boundaryFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(BoundaryFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Boundary Fill'});}}]);return BoundaryFill;}(_ColorFill3.default);exports.default=BoundaryFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _pubsubJs=require('pubsub-js');var _pubsubJs2=_interopRequireDefault(_pubsubJs);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else {obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ColorFill=function(_Filter){_inherits(ColorFill,_Filter);function ColorFill(props,content){_classCallCheck(this,ColorFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ColorFill).call(this,props,content));_this.onXpositionChange=_this.onXpositionChange.bind(_this);_this.onYpositionChange=_this.onYpositionChange.bind(_this);_this.onTargetColorChange=_this.onTargetColorChange.bind(_this);_this.onColorSelect=_this.onColorSelect.bind(_this);_this.onColorRecieve=_this.onColorRecieve.bind(_this);_this.onPixelSelect=_this.onPixelSelect.bind(_this);_this.onPixelRecieve=_this.onPixelRecieve.bind(_this);return _this;}_createClass(ColorFill,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){_get(Object.getPrototypeOf(ColorFill.prototype),'componentWillReceiveProps',this).call(this,nextProps);this.removeListeners(nextProps.layer.filters[this.defaultState.type]);}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState){if(!prevState.disabled&&this.state.disabled){this.removeListeners();}}},{key:'componentWillUnmount',value:function componentWillUnmount(){this.removeListeners();}},{key:'onXpositionChange',value:function onXpositionChange(event,xPosition){var layer=this.props.layer;var options={xPosition:xPosition};xPosition=parseInt(xPosition);if(xPosition<0){xPosition=0;}else if(xPosition>=layer.width){xPosition=layer.width-1;}if(Number.isInteger(xPosition)){options=Object.assign({},this.state,{xPosition:xPosition});this.applyFilter(options);}this.setState(options);}},{key:'onYpositionChange',value:function onYpositionChange(event,yPosition){var layer=this.props.layer;var options={yPosition:yPosition};yPosition=parseInt(yPosition);if(yPosition<0){yPosition=0;}else if(yPosition>=layer.height){yPosition=layer.height-1;}if(Number.isInteger(yPosition)){options=Object.assign({},this.state,{yPosition:yPosition});this.applyFilter(options);}this.setState(options);}},{key:'onTargetColorChange',value:function onTargetColorChange(event,targetColor){var layer=this.props.layer;var options={targetColor:targetColor};targetColor=parseInt(targetColor);if(targetColor<0){targetColor=0;options={targetColor:targetColor};}else if(targetColor>=layer.colorBits){targetColor=layer.colorBits;options={targetColor:targetColor};}if(Number.isInteger(targetColor)){options=Object.assign({},this.state,{targetColor:targetColor});this.applyFilter(options);}this.setState(options);}},{key:'onColorSelect',value:function onColorSelect(){var canvas=this.props.canvas;if(this.state.listeners.colorPick){this.removeListener('colorPick');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_COLOR','colorPick',this.onColorRecieve);}}},{key:'onColorRecieve',value:function onColorRecieve(topic,options){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var targetColor={targetColor:options.targetColor};options=Object.assign({},this.state,targetColor);this.setState(targetColor);this.applyFilter(options);}},{key:'onPixelSelect',value:function onPixelSelect(){var canvas=this.props.canvas;if(this.state.listeners.pixelPos){this.removeListener('pixelPos');}else {this.addListener('CANVAS_'+canvas.id+'_EVENT.SELECT_POS','pixelPos',this.onPixelRecieve);}}},{key:'onPixelRecieve',value:function onPixelRecieve(topic,position){this.applyFilter(Object.assign({},this.state,position));}},{key:'addListener',value:function addListener(topic,listener,callback){var _this2=this;callback=callback||function(){};var token=_pubsubJs2.default.subscribe(topic,function(topic,content){_this2.removeListener(listener);callback(topic,content);});var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,token))};this.setState(options);}},{key:'removeListener',value:function removeListener(listener){if(!this.state.listeners[listener]){return;}_pubsubJs2.default.unsubscribe(this.state.listeners[listener]);var options={listeners:Object.assign({},this.state.listeners,_defineProperty({},listener,null))};this.setState(options);}},{key:'removeListeners',value:function removeListeners(listeners){var _this3=this;var options={listeners:Object.assign({},this.state.listeners)};var change=false;Object.keys(this.state.listeners).forEach(function(listener){if(!listeners||!listeners[listener]){_pubsubJs2.default.unsubscribe(_this3.state.listeners[listener]);options.listeners[listener]=null;change=true;}});if(change){this.setState(options);}}}]);return ColorFill;}(_Filter3.default);exports.default=ColorFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var DistanceFill=function(_ColorFill){_inherits(DistanceFill,_ColorFill);function DistanceFill(props,content){_classCallCheck(this,DistanceFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(DistanceFill).call(this,props,content));_this.defaultState={type:'DISTANCE_FILL',filter:Filters.distanceFill,disabled:true,xPosition:'',yPosition:'',targetColor:0,scaleFactor:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onScaleFactorChange=_this.onScaleFactorChange.bind(_this);return _this;}_createClass(DistanceFill,[{key:'onScaleFactorChange',value:function onScaleFactorChange(event,scaleFactor){var options={scaleFactor:scaleFactor};scaleFactor=parseInt(scaleFactor);if(scaleFactor<0){scaleFactor=1;options={scaleFactor:scaleFactor};}if(Number.isInteger(scaleFactor)){this.applyFilter(Object.assign({},this.state,{scaleFactor:scaleFactor}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Initial Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'scale',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.scaleFactor,onChange:this.onScaleFactorChange,floatingLabelText:'Scale Factor',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Distance Fill'});}}]);return DistanceFill;}(_ColorFill3.default);exports.default=DistanceFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Erosion=function(_ColorFill){_inherits(Erosion,_ColorFill);function Erosion(props,content){_classCallCheck(this,Erosion);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Erosion).call(this,props,content));_this.defaultState={type:'EROSION',disabled:true,filter:Filters.erosion,xPosition:'',yPosition:'',targetColor:0,iterations:1,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onIterationsChange=_this.onIterationsChange.bind(_this);return _this;}_createClass(Erosion,[{key:'onIterationsChange',value:function onIterationsChange(event,iterations){var layer=this.props.layer;var options={iterations:iterations};iterations=parseInt(iterations);if(iterations<0){iterations=0;options={iterations:iterations};}if(Number.isInteger(iterations)){this.applyFilter(Object.assign({},this.state,{iterations:iterations}));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'iterations',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.iterations,onChange:this.onIterationsChange,floatingLabelText:'Iterations',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Boundary Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{id:'colorize',onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Erosion'});}}]);return Erosion;}(_ColorFill3.default);exports.default=Erosion;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Filter=function(_Component){_inherits(Filter,_Component);function Filter(props,content){_classCallCheck(this,Filter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Filter).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyFilter=_lodash2.default.debounce(_this.applyFilter,500);return _this;}_createClass(Filter,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.layer.filters[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var layer=_props.layer;var applyFilter=_props.applyFilter;applyFilter(canvas,layer,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyFilter',value:function applyFilter(options){var _props2=this.props;var canvas=_props2.canvas;var layer=_props2.layer;var applyFilter=_props2.applyFilter;var index=_props2.index;options=Object.assign({},options,{index:index});applyFilter(canvas,layer,options);}}]);return Filter;}(_react.Component);exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _SpatialResolution=require('./SpatialResolution');var _SpatialResolution2=_interopRequireDefault(_SpatialResolution);var _GrayLevel=require('./GrayLevel');var _GrayLevel2=_interopRequireDefault(_GrayLevel);var _GrayScale=require('./GrayScale');var _GrayScale2=_interopRequireDefault(_GrayScale);var _Histogram=require('./Histogram');var _Histogram2=_interopRequireDefault(_Histogram);var _NoiseReduce=require('./NoiseReduce');var _NoiseReduce2=_interopRequireDefault(_NoiseReduce);var _Sharpen=require('./Sharpen');var _Sharpen2=_interopRequireDefault(_Sharpen);var _BitPlanes=require('./BitPlanes');var _BitPlanes2=_interopRequireDefault(_BitPlanes);var _FloodFill=require('./FloodFill');var _FloodFill2=_interopRequireDefault(_FloodFill);var _BoundaryFill=require('./BoundaryFill');var _BoundaryFill2=_interopRequireDefault(_BoundaryFill);var _Erosion=require('./Erosion');var _Erosion2=_interopRequireDefault(_Erosion);var _DistanceFill=require('./DistanceFill');var _DistanceFill2=_interopRequireDefault(_DistanceFill);var _Skeletonization=require('./Skeletonization');var _Skeletonization2=_interopRequireDefault(_Skeletonization);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Filter:{displayName:'Filter'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/filters/Filters.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Filter=_wrapComponent('Filter')(function(_Component){_inherits(Filter,_Component);function Filter(){_classCallCheck(this,Filter);return _possibleConstructorReturn(this,Object.getPrototypeOf(Filter).apply(this,arguments));}_createClass(Filter,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyFilter=_props.applyFilter;var layer=canvas.layers[0];var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Filters'),_react3.default.createElement(_SpatialResolution2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayScale2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_GrayLevel2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Histogram2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_NoiseReduce2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Sharpen2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BitPlanes2.default,{index:index++,canvas:canvas,canvases:canvases,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Fills'),_react3.default.createElement(_FloodFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_BoundaryFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Erosion2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_DistanceFill2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Morphs'),_react3.default.createElement(_Skeletonization2.default,{index:index++,canvas:canvas,layer:layer,applyFilter:applyFilter}));}}]);return Filter;}(_react2.Component));exports.default=Filter;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var FloodFill=function(_ColorFill){_inherits(FloodFill,_ColorFill);function FloodFill(props,content){_classCallCheck(this,FloodFill);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(FloodFill).call(this,props,content));_this.defaultState={type:'FLOOD_FILL',filter:Filters.floodfill,disabled:true,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);return _this;}_createClass(FloodFill,[{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Target Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Pixel Seed',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Flood Fill'});}}]);return FloodFill;}(_ColorFill3.default);exports.default=FloodFill;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165}};var GrayLevel=function(_Filter){_inherits(GrayLevel,_Filter);function GrayLevel(props,content){_classCallCheck(this,GrayLevel);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayLevel).call(this,props,content));_this.defaultState={type:'GRAY_LEVEL',disabled:true,level:8,filter:Filters.grayLevel};_this.state=Object.assign({},_this.defaultState);_this.onLevelChange=_this.onLevelChange.bind(_this);return _this;}_createClass(GrayLevel,[{key:'onLevelChange',value:function onLevelChange(event,level){var options={level:level};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:this.state.level+'-bit',disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onLevelChange,min:1,step:1,max:8,value:this.state.level,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Level'});}}]);return GrayLevel;}(_Filter3.default);exports.default=GrayLevel;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var GrayScale=function(_Filter){_inherits(GrayScale,_Filter);function GrayScale(props,content){_classCallCheck(this,GrayScale);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(GrayScale).call(this,props,content));_this.defaultState={type:'GRAY_SCALE',disabled:true,filter:Filters.grayScale,transformMethod:1,constant:1.5,gamma:1};_this.state=Object.assign({},_this.defaultState);_this.onTransformMethodChange=_this.onTransformMethodChange.bind(_this);_this.onConstantChange=_this.onConstantChange.bind(_this);_this.onGammaChange=_this.onGammaChange.bind(_this);return _this;}_createClass(GrayScale,[{key:'onTransformMethodChange',value:function onTransformMethodChange(event,index,value){var options={transformMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onConstantChange',value:function onConstantChange(event,value){var options={constant:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onGammaChange',value:function onGammaChange(event,value){var options={gamma:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.transformMethod,onChange:this.onTransformMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Log'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Power'}))}),_react2.default.createElement(_List.ListItem,{key:'constantField',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.constant,onChange:this.onConstantChange,floatingLabelText:'Constant "c"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'gammaField',style:this.state.transformMethod!==2?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.gamma,onChange:this.onGammaChange,floatingLabelText:'Gamma "γ"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Gray Scale'});}}]);return GrayScale;}(_Filter3.default);exports.default=GrayScale;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Histogram=function(_MaskFilter){_inherits(Histogram,_MaskFilter);function Histogram(props,content){_classCallCheck(this,Histogram);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Histogram).call(this,props,content));_this.defaultState={type:'HISTOGRAM',disabled:true,filter:Filters.histogram,global:true,dimension:5,canvasId:null};_this.state=Object.assign({},_this.defaultState);_this.onLocalityChange=_this.onLocalityChange.bind(_this);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMatchingChange=_this.onMatchingChange.bind(_this);return _this;}_createClass(Histogram,[{key:'onLocalityChange',value:function onLocalityChange(event,index,global){var options={global:global};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMatchingChange',value:function onMatchingChange(event,index,canvasId){var canvases=this.props.canvases;var options={canvasId:canvasId};this.applyFilter(Object.assign({},this.state,Object.assign({},options,{match:canvases.find(function(canvas){return canvas.id===canvasId;})})));this.setState(options);}},{key:'onDimensionChange',value:function onDimensionChange(event,dimension){var layer=this.props.layer;var global=false;if(dimension>=layer.colorBits){global=true;dimension=this.state.dimension;}var options={dimension:dimension,global:global};_get(Object.getPrototypeOf(Histogram.prototype),'onDimensionChange',this).call(this,event,options);}},{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var canvasMenuItems=[];canvases.forEach(function(_canvas){if(canvas.id!==_canvas.id){canvasMenuItems=[].concat(_toConsumableArray(canvasMenuItems),[_react2.default.createElement(_MenuItem2.default,{key:_canvas.id,value:_canvas.id,primaryText:_canvas.title})]);}});var controls=[_react2.default.createElement(_List.ListItem,{key:'equalization',disabled:true,secondaryText:'Equalization',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.global,onChange:this.onLocalityChange},_react2.default.createElement(_MenuItem2.default,{value:true,primaryText:'Global'}),_react2.default.createElement(_MenuItem2.default,{value:false,primaryText:'Local'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',style:this.state.global?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'matching',disabled:true,style:this.state.global?null:{display:'none'},secondaryText:'Matching',primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.canvasId,onChange:this.onMatchingChange},_react2.default.createElement(_MenuItem2.default,{value:null,primaryText:'None'}),canvasMenuItems)})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Histogram'});}}]);return Histogram;}(_MaskFilter3.default);exports.default=Histogram;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.spatialResolution=spatialResolution;exports.grayLevel=grayLevel;exports.grayScale=grayScale;exports.histogram=histogram;exports.noiseReduce=noiseReduce;exports.sharpen=sharpen;exports.bitPlanes=bitPlanes;exports.floodfill=floodfill;exports.boundaryFill=boundaryFill;exports.erosion=erosion;exports.distanceFill=distanceFill;exports.skeletonization=skeletonization;var _canvasUtils=require('../../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function subsample(layer,ratio){var width=layer.width*ratio>>0;var height=layer.height*ratio>>0;var averagePixelCountW=layer.width/width>>0;var averagePixelCountH=layer.height/height>>0;var totalAveragePixels=averagePixelCountW*averagePixelCountH;var pixels=[];var colOffset=0;for(var nextRow=0;nextRow<layer.width;nextRow+=averagePixelCountW){colOffset=nextRow*layer.width;for(var nextCol=colOffset;nextCol<colOffset+layer.width;nextCol+=averagePixelCountW){var sum=0;var subIndex=0;for(var nextSubCol=nextCol;nextSubCol<nextCol+averagePixelCountH;nextSubCol++){for(var i=nextSubCol;i<nextSubCol+averagePixelCountW;i++){sum+=layer.pixels[i];if(subIndex+1===totalAveragePixels){pixels.push(Math.round(sum/totalAveragePixels));}subIndex++;}}}}return Object.assign({},layer,{width:width,height:height,pixels:pixels});}function getNeighborColors(layer,index,total,dimension,callback){var half=(dimension-1)/2;var pixels=[];var rowIndex=index/layer.width>>0;callback=callback||function(pixel){};for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;var pixel=layer.pixels[x];if(row===rowTarget&&0<=x&&x<total&&x!=index){pixels.push(pixel);}callback(pixel);}}return pixels;}function getNeighborPixels(layer,index,total,dimension){var half=(dimension-1)/2;var pixelsMap=[];var rowIndex=index/layer.width>>0;for(var y=-half;y<=half;y++){var rowOffset=y*layer.width;var leftOffset=rowOffset+index-half;var rowTarget=y+rowIndex;for(var x=leftOffset;x<leftOffset+dimension;x++){var row=x/layer.width>>0;if(row===rowTarget&&0<=x&&x<total&&x!=index){pixelsMap.push({pixel:x,color:layer.pixels[x]});}}}return pixelsMap;}function getNeighborhoodColors(layer,index,total,dimension){var neighborhood=[];getNeighborColors(layer,index,layer.pixels.length,3,function(pixel){neighborhood.push(pixel);});return neighborhood;}function padRows(pixels,rows,cols){for(var i=0;i<rows;i++){for(var j=0;j<cols;j++){pixels.push(0);}}}function padData(layer,maskDimension){if(maskDimension<3){return layer.pixels;}var pixels=[];var paddedRows=(maskDimension-1)/2;var paddedCols=(maskDimension-1)/2;var width=layer.width+maskDimension-1;var height=layer.height+maskDimension-1;pixels=[];padRows(pixels,paddedRows,width);for(var y=0;y<layer.height;y++){padRows(pixels,1,paddedCols);var colOffset=y*layer.width;for(var x=colOffset;x<colOffset+layer.width;x++){pixels.push(layer.pixels[x]);}padRows(pixels,1,paddedCols);}padRows(pixels,paddedRows,width);return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function blur(pixel,neighbors,maskDimension){var weight=1/(maskDimension*maskDimension);return neighbors.reduce(function(prev,value){return prev+weight*value;},weight*pixel)>>0;}function min(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[0];}function median(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[(sorted.length-1)/2];}function max(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();return sorted[sorted.length-1];}function midpoint(pixel,neighbors,maskDimension){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var midpoint=(sorted[0]+sorted[sorted.length-1])/2;return midpoint>>0;}function arithmeticMean(pixel,neighbors,maskDimension){var total=neighbors.reduce(function(prev,value){return prev+value;},pixel);return total/(neighbors.length+1)>>0;}function geometricMean(pixel,neighbors,maskDimension){var product=neighbors.reduce(function(prev,value){return prev*value;},pixel);return Math.pow(product,1/(maskDimension*maskDimension))>>0;}function harmonicMean(pixel,neighbors,maskDimension){var mean=maskDimension*maskDimension/neighbors.reduce(function(prev,value){return prev+1/value;},1/pixel);return mean>>0;}function contraharmonicMean(pixel,neighbors,maskDimension,order){var orderOffset=order+1;var numerator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,orderOffset);},Math.pow(pixel,orderOffset));var denominator=neighbors.reduce(function(prev,value){return prev+Math.pow(value,order);},Math.pow(pixel,order));var mean=numerator/denominator;return mean>>0;}function alphaTrimmedMean(pixel,neighbors,maskDimension,constantD){var sorted=[pixel].concat(_toConsumableArray(neighbors)).sort();var A=Math.floor(constantD/2);var total=sorted.slice(A,sorted.length-A).reduce(function(prev,value){return prev+value;});return total/(maskDimension*maskDimension-2*A)>>0;}function laplace(pixel,neighbors,maskDimension){var midBit=maskDimension*maskDimension-1;var filtered=neighbors.reduce(function(prev,value){return prev-value;},midBit*pixel);filtered=pixel+filtered-Math.min(0,filtered);filtered=255*filtered/Math.max(255,filtered);return filtered>>0;}function highboost(pixel,neighbors,maskDimension,maskFactor){var mask=Math.max(0,pixel-blur(pixel,neighbors,maskDimension));return Math.min(pixel+maskFactor*mask,255);}function getHistogram(pixels,colorBits,total,target){var frequency={};pixels.forEach(function(pixel){frequency[pixel]=(frequency[pixel]||0)+1;});var prev=0;var histogram={};for(var pixel in frequency){prev+=frequency[pixel]/total*colorBits;histogram[pixel]=Math.round(prev);if(pixel==target)return histogram;}return histogram;}function getHistogramValue(layer,index,total,subtotal,dimension){var target=layer.pixels[index];var pixels=getNeighborColors(layer,index,total,dimension);pixels.push(layer.pixels[index]);var histogram=getHistogram(pixels,layer.colorBits,subtotal,target);return histogram[target];}function replication(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){pixels[x]=layer.pixels[pixelOffset+(colIndex++*options.ratio>>0)];}step+=options.ratio;}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bilinear(layer,options){var width=layer.width/options.ratio;var height=layer.height/options.ratio;var scaleFactor=1/options.ratio>>0;var pixels=[];var step=0;for(var y=0;y<height;y++){var xOffset=y*width;var rowIndex=step>>0;var pixelOffset=rowIndex*layer.width;var colIndex=0;for(var x=xOffset;x<xOffset+width;x++){if(colIndex%scaleFactor===0){pixels[x]=layer.pixels[pixelOffset+(colIndex*options.ratio>>0)];}else {pixels[x]=null;}colIndex++;}step+=options.ratio;}layer=Object.assign({},layer,{pixels:pixels,width:width,height:height});for(var i=0;i<pixels.length;i++){if(pixels[i]==null){(function(){var neighbors=getNeighborColors(layer,i,pixels.length,3);var sum=0;var count=0;neighbors.forEach(function(pixel){if(pixel!=null){count++;sum+=pixel;}});pixels[i]=sum/count;})();}}return layer;}function spatialResolution(layer,context,options){layer=subsample(layer,options.ratio);if(options.zoomMethod===1){layer=replication(layer,options);}else if(options.zoomMethod===2){layer=bilinear(layer,options);}return layer;}function grayLevel(layer,context,options){var colorsBits=Math.pow(2,options.level)-1;var ratio=Math.round(255/colorsBits);var pixels=layer.pixels.map(function(pixel){return Math.round(pixel/layer.colorBits*colorsBits)*ratio;});return Object.assign({},layer,{pixels:pixels});}function grayScale(layer,context,options){var pixels=layer.pixels;var c=options.constant;var gamma=options.gamma;if(options.transformMethod===1){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.log(1+r);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}else if(options.transformMethod===2){pixels=pixels.map(function(pixel){var r=pixel/layer.colorBits;var s=c*Math.pow(r,gamma);return Math.min(layer.colorBits,Math.round(layer.colorBits*s));});}return Object.assign({},layer,{pixels:pixels});}function histogram(layer,context,options){var MN=layer.width*layer.height;var pixels=void 0;if(!options.global){(function(){var mn=options.dimension*options.dimension;pixels=layer.pixels.map(function(pixel,index){return getHistogramValue(layer,index,MN,mn,options.dimension);});})();}else {var pixel;(function(){var map=getHistogram(layer.pixels,layer.colorBits,MN);if(options.match){var canvas=options.match;MN=canvas.width*canvas.height;var targetPixels=canvasUtils.getPixels(canvas);var targetMap=getHistogram(targetPixels,256,MN);var targetValues=_lodash2.default.values(targetMap);var matchingMap={};for(pixel in map){var value=map[pixel];var beforePixel=void 0,afterPixel=void 0,targetPixel=void 0;for(targetPixel in targetMap){var targetValue=targetMap[targetPixel];if(targetValue<value){beforePixel=targetPixel;}if(targetValue==value){break;}if(targetValue>value){targetPixel=null;break;}}if(!targetPixel){if(!afterPixel||value-targetMap[beforePixel]<targetMap[afterPixel]-value){targetPixel=beforePixel;}else {targetPixel=afterPixel;}}matchingMap[pixel]=targetPixel;}map=matchingMap;}pixels=layer.pixels.map(function(pixel){return map[pixel];});})();}return Object.assign({},layer,{pixels:pixels});}function noiseReduce(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=blur(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=min(layer.pixels[x],neighbors,options.dimension);}else if(options.method==3){pixel=median(layer.pixels[x],neighbors,options.dimension);}else if(options.method==4){pixel=max(layer.pixels[x],neighbors,options.dimension);}else if(options.method==5){pixel=midpoint(layer.pixels[x],neighbors,options.dimension);}else if(options.method==6){pixel=arithmeticMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==7){pixel=geometricMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==8){pixel=harmonicMean(layer.pixels[x],neighbors,options.dimension);}else if(options.method==9){pixel=contraharmonicMean(layer.pixels[x],neighbors,options.dimension,options.order);}else if(options.method=10){pixel=alphaTrimmedMean(layer.pixels[x],neighbors,options.dimension,options.constantD);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function sharpen(layer,context,options){var width=layer.width;var height=layer.height;var pixels=[];var offset=(options.dimension-1)/2;layer=padData(layer,options.dimension);for(var y=offset;y<offset+height;y++){var colOffset=offset+y*layer.width;for(var x=colOffset;x<colOffset+width;x++){var pixel=void 0;var neighbors=getNeighborColors(layer,x,layer.pixels.length,options.dimension);if(options.method==1){pixel=laplace(layer.pixels[x],neighbors,options.dimension);}else if(options.method==2){pixel=highboost(layer.pixels[x],neighbors,options.dimension,options.maskFactor);}else {pixel=layer.pixels[index];}pixels.push(pixel);}}return Object.assign({},layer,{pixels:pixels,width:width,height:height});}function bitPlanes(layer,context,options){var disabledBits=Object.keys(options.planes).filter(function(bit){return !options.planes[bit];});var binaryReducer=disabledBits.map(function(bit){return {value:bit,binary:(Math.pow(2,bit-1)>>>0).toString(2)};});var pixels=layer.pixels.map(function(pixel){var binary=(pixel>>>0).toString(2);var result=binaryReducer.reduce(function(prev,bit){return prev-(prev.toString().charAt(8-bit.value)==1?bit.binary:'0');},binary);return parseInt(result,2);});return Object.assign({},layer,{pixels:pixels});}function floodfill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var pixels=[].concat(_toConsumableArray(layer.pixels));var initialColor=pixels[pixel];var queue=[pixel];var visited={};layer=Object.assign({},layer,{pixels:pixels});pixels[pixel]=options.targetColor;while(queue.length){var head=queue[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}visited[queue.shift()]=true;}return layer;}function isBoundaryPixel(layer,element,total,initialColor){if(element.color===initialColor){var neighbors=getNeighborColors(layer,element.pixel,total,3);if(neighbors.find(function(neighbor){return neighbor!==initialColor;})!==undefined){return true;}}return false;}function boundaryFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){pixels[neighbor.pixel]=options.targetColor;}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return Object.assign({},layer,{pixels:pixels});}function getBoundaryPixels(layer,options){var queue=[];if(options.xPosition===''||options.yPosition===''){return queue;}var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];var aux=[initialPixel];var visited={};while(aux.length){var head=aux[0];if(!visited[head]){var neighbors=getNeighborPixels(layer,head,layer.pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]){if(isBoundaryPixel(layer,neighbor,layer.pixels.length,initialColor)){queue.push(neighbor.pixel);}else {aux.push(neighbor.pixel);}}});}visited[aux.shift()]=true;}return queue;}function erosion(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var iterations=options.iterations;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(iterations){queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}});}pixels[head]=options.targetColor;queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}iterations--;}return layer;}function distanceFill(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}var queue=getBoundaryPixels(layer,options);var visited={};var distance=options.targetColor;var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});queue.forEach(function(pixel){pixels[pixel]=distance;});while(queue.length){distance=Math.min(layer.colorBits,distance+options.scaleFactor);queue.push(null);var head=queue[0];while(head!==null){if(!visited[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(!visited[neighbor.pixel]&&neighbor.color===initialColor){pixels[neighbor.pixel]=distance;queue.push(neighbor.pixel);}});}queue.shift();if(head){visited[head]=true;}head=queue[0];}queue.shift();if(head){visited[head]=true;}}return layer;} /*
* p9 (0) p2 (1) p3 (2)
* p8 (3) p1 (4) p4 (5)
* p7 (6) p6 (7) p5 (8)
*/function getTransitionCount(neighborhood,initialColor){var count=0; // p2 -> p3
if(neighborhood[1]!==initialColor&&neighborhood[2]===initialColor){count++;} // p3 -> p4
if(neighborhood[2]!==initialColor&&neighborhood[5]===initialColor){count++;} // p4 -> p5
if(neighborhood[5]!==initialColor&&neighborhood[8]===initialColor){count++;} // p5 -> p6
if(neighborhood[8]!==initialColor&&neighborhood[7]===initialColor){count++;} // p6 -> p7
if(neighborhood[7]!==initialColor&&neighborhood[6]===initialColor){count++;} // p7 -> p8
if(neighborhood[6]!==initialColor&&neighborhood[3]===initialColor){count++;} // p8 -> p9
if(neighborhood[3]!==initialColor&&neighborhood[0]===initialColor){count++;} // p9 -> p2
if(neighborhood[0]!==initialColor&&neighborhood[1]===initialColor){count++;}return count;}function zhangSuen(layer,options){var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel]; // for binary images this is usually black
var pixels=[].concat(_toConsumableArray(layer.pixels));var changed=void 0;layer=Object.assign({},layer,{pixels:pixels});var _loop=function _loop(){changed=false;var updated=[];pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P4 or P6 or (P2 and P8)
&&(neighborhood[5]===options.targetColor||neighborhood[7]===options.targetColor||neighborhood[1]===options.targetColor&&neighborhood[3]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});pixels.forEach(function(pixel,index){if(pixel===initialColor){ /*
        * p9 (0) p2 (1) p3 (2)
        * p8 (3) p1 (4) p4 (5)
        * p7 (6) p6 (7) p5 (8)
        */var neighborhood=getNeighborhoodColors(layer,index,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1 //at least one white
// P2 or P8 or (P4 and P6)
&&(neighborhood[1]===options.targetColor||neighborhood[3]===options.targetColor||neighborhood[5]===options.targetColor&&neighborhood[7]===options.targetColor)){updated.push(index);changed=true;}}});updated.forEach(function(pixel){pixels[pixel]=options.targetColor;});};do {_loop();}while(changed);return layer;}function zhangSuenBFS(layer,options){var queue=getBoundaryPixels(layer,options);var discarded={};var pixels=[].concat(_toConsumableArray(layer.pixels));var initialPixel=options.xPosition+options.yPosition*layer.width; //TODO canvas width
var initialColor=layer.pixels[initialPixel];layer=Object.assign({},layer,{pixels:pixels});while(queue.length){queue.push(null);var head=queue[0];while(head!==null){if(!discarded[head]){var neighbors=getNeighborPixels(layer,head,pixels.length,3);neighbors.forEach(function(neighbor){if(neighbor.color===initialColor){ // for each foreground neighbor of head
var neighborhood=getNeighborhoodColors(layer,neighbor.pixel,pixels.length,3);var nonInitialColors=neighborhood.reduce(function(prev,neighbor){return neighbor===initialColor?prev:++prev;},0);if(2<=nonInitialColors&&nonInitialColors<=6&&getTransitionCount(neighborhood,initialColor)===1){ // can be removed
pixels[neighbor.pixel]=options.targetColor;queue.push(neighbor.pixel);}else {pixels[neighbor.pixel]=initialColor;discarded[neighbor.pixel]=true;}}});}queue.shift();head=queue[0];}queue.shift();}return layer;}function skeletonization(layer,context,options){if(options.xPosition===''||options.yPosition===''){return layer;}if(options.method===1){return zhangSuen(layer,options);}else if(options.method===2){return zhangSuenBFS(layer,options);}return layer;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof2(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof2(obj);};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MaskFilter=function(_Filter){_inherits(MaskFilter,_Filter);function MaskFilter(props,contents){_classCallCheck(this,MaskFilter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(MaskFilter).call(this,props,contents));_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.applyDimensionChange=_lodash2.default.debounce(_this.applyDimensionChange,500);return _this;}_createClass(MaskFilter,[{key:'onDimensionChange',value:function onDimensionChange(event,options){var dimension=(typeof options==='undefined'?'undefined':_typeof(options))==='object'?options.dimension:options;options=Object.assign({},options,{dimension:dimension});this.applyDimensionChange(dimension,options);this.setState(options);}},{key:'applyDimensionChange',value:function applyDimensionChange(dimension,options){dimension=parseInt(dimension);if(dimension<3){dimension=3;}else if(dimension%2===0){dimension=dimension+1;}if(dimension&&Number.isInteger(dimension)){options=Object.assign({},options,{dimension:dimension});this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}}]);return MaskFilter;}(_Filter3.default);exports.default=MaskFilter;;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else {return get(parent,property,receiver);}}else if("value" in desc){return desc.value;}else {var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var NoiseReduce=function(_MaskFilter){_inherits(NoiseReduce,_MaskFilter);function NoiseReduce(props,content){_classCallCheck(this,NoiseReduce);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(NoiseReduce).call(this,props,content));_this.defaultState={type:'NOISE_REDUCE',disabled:true,filter:Filters.noiseReduce,method:1,dimension:3,order:1,constantD:1};_this.state=Object.assign({},_this.defaultState);_this.onDimensionChange=_this.onDimensionChange.bind(_this);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onOrderChange=_this.onOrderChange.bind(_this);_this.onConstantDChange=_this.onConstantDChange.bind(_this);return _this;}_createClass(NoiseReduce,[{key:'onDimensionChange',value:function onDimensionChange(event,dimension){if(dimension&&dimension>-1){var constantD=this.clampConstantD(this.state.constantD,dimension);this.applyConstantDChange(constantD,this.state);}_get(Object.getPrototypeOf(NoiseReduce.prototype),'onDimensionChange',this).call(this,event,dimension);}},{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onOrderChange',value:function onOrderChange(event,order){var options={order:order};order=parseFloat(order);if(order&&!Number.isNaN(order)){this.applyFilter(Object.assign({},this.state,{order:order}));}this.setState(options);}},{key:'onConstantDChange',value:function onConstantDChange(event,constantD){var options={constantD:constantD};this.applyConstantDChange(constantD,options);this.setState(options);}},{key:'applyConstantDChange',value:function applyConstantDChange(constantD,options){constantD=parseInt(constantD);constantD=this.clampConstantD(constantD,this.state.dimension);if(order&&Number.isInteger(constantD)){options={constantD:constantD};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}}},{key:'clampConstantD',value:function clampConstantD(constantD,dimension){if(constantD<0){constantD=0;}else if(constantD>dimension*dimension-1){constantD=dimension*dimension-1;}return constantD;}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Blur'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Min'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Median'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'Max'}),_react2.default.createElement(_MenuItem2.default,{value:5,primaryText:'Midpoint'}),_react2.default.createElement(_MenuItem2.default,{value:6,primaryText:'Arithmetic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:7,primaryText:'Geometric Mean'}),_react2.default.createElement(_MenuItem2.default,{value:8,primaryText:'Harmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:9,primaryText:'Contraharmonic Mean'}),_react2.default.createElement(_MenuItem2.default,{value:10,primaryText:'Alpha-trimmed Mean'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'mask_size',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'order',type:'number',disabled:true,style:this.state.method===9?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'order',style:styles.input,value:this.state.order,onChange:this.onOrderChange,floatingLabelText:'Order "Q"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'constantD',type:'number',disabled:true,style:this.state.method===10?null:{display:'none'},primaryText:_react2.default.createElement(_TextField2.default,{id:'constant_d',style:styles.input,value:this.state.constantD,onChange:this.onConstantDChange,floatingLabelText:'Alpha "a"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Noise Reduce'});}}]);return NoiseReduce;}(_MaskFilter3.default);exports.default=NoiseReduce;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _MaskFilter2=require('./MaskFilter');var _MaskFilter3=_interopRequireDefault(_MaskFilter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170}};var Sharpen=function(_MaskFilter){_inherits(Sharpen,_MaskFilter);function Sharpen(props,content){_classCallCheck(this,Sharpen);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Sharpen).call(this,props,content));_this.defaultState={type:'SHARPEN',disabled:true,filter:Filters.sharpen,method:1,dimension:3,maskFactor:8};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onMaskFactorChange=_this.onMaskFactorChange.bind(_this);return _this;}_createClass(Sharpen,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onMaskFactorChange',value:function onMaskFactorChange(event,maskFactor){var options={maskFactor:maskFactor};maskFactor=parseInt(maskFactor);if(maskFactor<1){maskFactor=1;options={maskFactor:maskFactor};}if(maskFactor&&Number.isInteger(maskFactor)){this.applyFilter(Object.assign({},this.state,options));}this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Laplacian'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Highboost'}))}),_react2.default.createElement(_List.ListItem,{key:'maskSize',type:'number',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'constant',style:styles.input,value:this.state.dimension,onChange:this.onDimensionChange,floatingLabelText:'Symmetric "N x N"',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'maskFactor',type:'number',style:this.state.method===1?{display:'none'}:null,disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{id:'factor',style:styles.input,value:this.state.maskFactor,onChange:this.onMaskFactorChange,floatingLabelText:'Mask Factor "A"',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Sharpen'});}}]);return Sharpen;}(_MaskFilter3.default);exports.default=Sharpen;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _IconButton=require('material-ui/IconButton');var _IconButton2=_interopRequireDefault(_IconButton);var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);var _colorize=require('material-ui/svg-icons/image/colorize');var _colorize2=_interopRequireDefault(_colorize);var _colors=require('material-ui/styles/colors');var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _ColorFill2=require('./ColorFill');var _ColorFill3=_interopRequireDefault(_ColorFill2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'},input:{marginTop:-20,width:170},inputButton:{top:'initial',zIndex:1}};var Skeletonization=function(_ColorFill){_inherits(Skeletonization,_ColorFill);function Skeletonization(props,content){_classCallCheck(this,Skeletonization);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Skeletonization).call(this,props,content));_this.defaultState={type:'SKELETONIZATION',disabled:true,method:1,filter:Filters.skeletonization,xPosition:'',yPosition:'',targetColor:0,listeners:{colorPick:null,pixelPos:null}};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);return _this;}_createClass(Skeletonization,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Zhang-Suen'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Zhang-Suen (BFS)'}))}),_react2.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.targetColor,onChange:this.onTargetColorChange,floatingLabelText:'Background Color',disabled:this.state.disabled}),rightIconButton:_react2.default.createElement(_IconButton2.default,{style:styles.inputButton,onClick:this.onColorSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.colorPick?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'label',disabled:true,primaryText:'Foreground Pixel',rightIconButton:_react2.default.createElement(_IconButton2.default,{onClick:this.onPixelSelect,disabled:this.state.disabled},_react2.default.createElement(_colorize2.default,{color:this.state.listeners.pixelPos?_colors.cyanA700:undefined,hoverColor:_colors.cyanA700}))}),_react2.default.createElement(_List.ListItem,{key:'seed',style:this.state.method===1?{display:'none'}:undefined,disabled:true,primaryText:'Is Seed',leftCheckbox:_react2.default.createElement(_Checkbox2.default,{disabled:true,checked:true})}),_react2.default.createElement(_List.ListItem,{key:'xPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.xPosition,onChange:this.onXpositionChange,floatingLabelText:'X Position',disabled:this.state.disabled})}),_react2.default.createElement(_List.ListItem,{key:'yPosition',disabled:true,primaryText:_react2.default.createElement(_TextField2.default,{style:styles.input,value:this.state.yPosition,onChange:this.onYpositionChange,floatingLabelText:'Y Position',disabled:this.state.disabled})})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Skeletonization'});}}]);return Skeletonization;}(_ColorFill3.default);exports.default=Skeletonization;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _Slider=require('material-ui/Slider');var _Slider2=_interopRequireDefault(_Slider);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Filter2=require('./Filter');var _Filter3=_interopRequireDefault(_Filter2);var _=require('./');var Filters=_interopRequireWildcard(_);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={slider:{overflow:'visible',marginTop:-20,width:165},select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var SpatialResolution=function(_Filter){_inherits(SpatialResolution,_Filter);function SpatialResolution(props,content){_classCallCheck(this,SpatialResolution);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SpatialResolution).call(this,props,content));_this.defaultState={type:'SPATIAL_RESOLTUION',ratio:1,zoomMethod:1,disabled:true,filter:Filters.spatialResolution};_this.state=Object.assign({},_this.defaultState);_this.onRatioChange=_this.onRatioChange.bind(_this);_this.onZoomMethodChange=_this.onZoomMethodChange.bind(_this);return _this;}_createClass(SpatialResolution,[{key:'onRatioChange',value:function onRatioChange(event,value){var options={ratio:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'onZoomMethodChange',value:function onZoomMethodChange(event,index,value){var options={zoomMethod:value};this.applyFilter(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var layer=this.props.layer;var resolution='('+Math.floor(layer.width*this.state.ratio)+' X '+Math.floor(layer.height*this.state.ratio)+') ratio = '+this.state.ratio;var controls=[_react2.default.createElement(_List.ListItem,{key:'select',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.zoomMethod,onChange:this.onZoomMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Nearest Neighbor'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Bilinear Interpolation'}))}),_react2.default.createElement(_List.ListItem,{key:'slider',primaryText:resolution,disabled:true,style:this.state.disabled?{color:'rgba(0, 0, 0, 0.298039)'}:null,secondaryText:_react2.default.createElement('div',{style:styles.slider},_react2.default.createElement(_Slider2.default,{onChange:this.onRatioChange,min:0.50,step:0.50,value:this.state.ratio,disabled:this.state.disabled}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Spatial Resolution'});}}]);return SpatialResolution;}(_Filter3.default);exports.default=SpatialResolution;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _reactRouter=require('react-router');var _Home=require('./Home.css');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Home:{displayName:'Home'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Home.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Home.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Home=_wrapComponent('Home')(function(_Component){_inherits(Home,_Component);function Home(){_classCallCheck(this,Home);return _possibleConstructorReturn(this,Object.getPrototypeOf(Home).apply(this,arguments));}_createClass(Home,[{key:'render',value:function render(){return _react3.default.createElement('div',null,_react3.default.createElement('div',{className:_Home2.default.container},_react3.default.createElement('h2',null,'Home'),_react3.default.createElement(_reactRouter.Link,{to:'/counter'},'to Counter')));}}]);return Home;}(_react2.Component));exports.default=Home;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _List=require('material-ui/List');var _MenuItem=require('material-ui/MenuItem');var _MenuItem2=_interopRequireDefault(_MenuItem);var _SelectField=require('material-ui/SelectField');var _SelectField2=_interopRequireDefault(_SelectField);var _SidebarGroup=require('../SidebarGroup');var _SidebarGroup2=_interopRequireDefault(_SidebarGroup);var _Option2=require('./Option');var _Option3=_interopRequireDefault(_Option2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles={select:{marginTop:-20,marginLeft:2,width:170,overflow:'hidden',whiteSpace:'nowrap',textOverflow:'ellipsis'}};var Compression=function(_Option){_inherits(Compression,_Option);function Compression(props,content){_classCallCheck(this,Compression);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Compression).call(this,props,content));_this.defaultState={type:'COMPRESSION',disabled:true,method:1,mode:2};_this.state=Object.assign({},_this.defaultState);_this.onMethodChange=_this.onMethodChange.bind(_this);_this.onModeChange=_this.onModeChange.bind(_this);return _this;}_createClass(Compression,[{key:'onMethodChange',value:function onMethodChange(event,index,method){var options={method:method};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'onModeChange',value:function onModeChange(event,index,mode){var options={mode:mode};this.applyOption(Object.assign({},this.state,options));this.setState(options);}},{key:'render',value:function render(){var controls=[_react2.default.createElement(_List.ListItem,{key:'method',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.method,onChange:this.onMethodChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'Run Length Encoding'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Huffman Tree'}),_react2.default.createElement(_MenuItem2.default,{value:3,primaryText:'Differential PCM'}),_react2.default.createElement(_MenuItem2.default,{value:4,primaryText:'LZW'}))}),_react2.default.createElement(_List.ListItem,{key:'mode',disabled:true,primaryText:_react2.default.createElement(_SelectField2.default,{style:styles.select,disabled:this.state.disabled,value:this.state.mode,onChange:this.onModeChange},_react2.default.createElement(_MenuItem2.default,{value:1,primaryText:'ASCII'}),_react2.default.createElement(_MenuItem2.default,{value:2,primaryText:'Binary'}))})];return _react2.default.createElement(_SidebarGroup2.default,{checkbox:true,checked:!this.state.disabled,onChecked:this.onEnableToggle,controls:controls,title:'Compression'});}}]);return Compression;}(_Option3.default);exports.default=Compression;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Option=function(_Component){_inherits(Option,_Component);function Option(props,content){_classCallCheck(this,Option);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Option).call(this,props,content));_this.onEnableToggle=_this.onEnableToggle.bind(_this);_this.applyOption=_lodash2.default.debounce(_this.applyOption,500);return _this;}_createClass(Option,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState(Object.assign({},this.defaultState,nextProps.canvas.options[this.defaultState.type]));}},{key:'onEnableToggle',value:function onEnableToggle(event,enabled){var _props=this.props;var canvas=_props.canvas;var applyOption=_props.applyOption;applyOption(canvas,Object.assign({},this.state,{disabled:!enabled}));}},{key:'applyOption',value:function applyOption(option){var _props2=this.props;var canvas=_props2.canvas;var applyOption=_props2.applyOption;var index=_props2.index;option=Object.assign({},option,{index:index});applyOption(canvas,option);}}]);return Option;}(_react.Component);exports.default=Option;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Compression=require('./Compression');var _Compression2=_interopRequireDefault(_Compression);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Options:{displayName:'Options'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/options/Options.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/options/Options.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Options=_wrapComponent('Options')(function(_Component){_inherits(Options,_Component);function Options(){_classCallCheck(this,Options);return _possibleConstructorReturn(this,Object.getPrototypeOf(Options).apply(this,arguments));}_createClass(Options,[{key:'render',value:function render(){var _props=this.props;var canvases=_props.canvases;var canvas=_props.canvas;var applyOption=_props.applyOption;var index=0;return _react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Options'),_react3.default.createElement(_Compression2.default,{index:index++,canvas:canvas,applyOption:applyOption}));}}]);return Options;}(_react2.Component));exports.default=Options;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Drawer=require('material-ui/Drawer');var _Drawer2=_interopRequireDefault(_Drawer);var _List=require('material-ui/List');var _TextField=require('material-ui/TextField');var _TextField2=_interopRequireDefault(_TextField);var _Subheader=require('material-ui/Subheader');var _Subheader2=_interopRequireDefault(_Subheader);var _Divider=require('material-ui/Divider');var _Divider2=_interopRequireDefault(_Divider);var _Options=require('../containers/Options');var _Options2=_interopRequireDefault(_Options);var _Filters=require('../containers/Filters');var _Filters2=_interopRequireDefault(_Filters);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Sidebar:{displayName:'Sidebar'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Sidebar.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Sidebar.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var styles={input:{marginTop:-35,width:220}};var Sidebar=_wrapComponent('Sidebar')(function(_Component){_inherits(Sidebar,_Component);function Sidebar(){_classCallCheck(this,Sidebar);return _possibleConstructorReturn(this,Object.getPrototypeOf(Sidebar).apply(this,arguments));}_createClass(Sidebar,[{key:'render',value:function render(){var _props=this.props;var open=_props.open;var canvas=_props.canvas;var applyFilter=_props.applyFilter;if(!canvas){return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'No Selected Canvas')));}return _react3.default.createElement(_Drawer2.default,{open:open,zDepth:2},_react3.default.createElement(_List.List,null,_react3.default.createElement(_Subheader2.default,null,'Canvas'),_react3.default.createElement(_List.ListItem,{key:'color',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:"Canvas "+canvas.id,floatingLabelText:'Name',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'width',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.width,floatingLabelText:'Width',disabled:true})}),_react3.default.createElement(_List.ListItem,{key:'height',disabled:true,primaryText:_react3.default.createElement(_TextField2.default,{style:styles.input,value:canvas.height,floatingLabelText:'Height',disabled:true})}),_react3.default.createElement(_Divider2.default,null),_react3.default.createElement(_Subheader2.default,null,'Layers'),canvas.layers.length?canvas.layers.map(function(layer,index){return _react3.default.createElement(_List.List,{key:"layer_"+index},_react3.default.createElement(_List.ListItem,{primaryText:"Layer "+index,secondaryText:_react3.default.createElement('p',{style:{wordWrap:"break-word"}},layer.filepath),secondaryTextLines:2,disabled:true}),layer.compressionRatio?_react3.default.createElement(_List.ListItem,{primaryText:'Compression Ratio',disabled:true,secondaryText:layer.compressionRatio+':1'}):null);}):_react3.default.createElement(_List.ListItem,{primaryText:'Empty',disabled:true})),_react3.default.createElement(_Divider2.default,null),canvas.layers.length?_react3.default.createElement(_Options2.default,{canvas:canvas}):null,canvas.layers.length?_react3.default.createElement(_Divider2.default,null):null,canvas.layers.length?_react3.default.createElement(_Filters2.default,{canvas:canvas}):null);}}]);return Sidebar;}(_react2.Component));exports.default=Sidebar;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _List=require('material-ui/List');var _Checkbox=require('material-ui/Checkbox');var _Checkbox2=_interopRequireDefault(_Checkbox);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={SidebarGroup:{displayName:'SidebarGroup'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/SidebarGroup.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var SidebarGroup=_wrapComponent('SidebarGroup')(function(_Component){_inherits(SidebarGroup,_Component);function SidebarGroup(props,content){_classCallCheck(this,SidebarGroup);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SidebarGroup).call(this,props,content));_this.state={checked:false};_this.onChecked=_this.onChecked.bind(_this);return _this;}_createClass(SidebarGroup,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){this.setState({checked:nextProps.checked});}},{key:'onChecked',value:function onChecked(event){var onChecked=this.props.onChecked;this.setState({checked:!this.state.checked});onChecked(event,!this.state.checked);event.stopPropagation();}},{key:'render',value:function render(){var _props=this.props;var title=_props.title;var controls=_props.controls;var checkbox=_props.checkbox;return _react3.default.createElement(_List.ListItem,{primaryText:title,nestedItems:controls,leftCheckbox:checkbox?_react3.default.createElement(_Checkbox2.default,{checked:this.state.checked,onClick:this.onChecked}):null});}}]);return SidebarGroup;}(_react2.Component));exports.default=SidebarGroup;SidebarGroup.defaultProps={onChecked:function onChecked(){}};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Canvas=require('../containers/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _Canvas3=require('../components/Canvas');var _electron=require('electron');var _Workspace=require('./Workspace.css');var _Workspace2=_interopRequireDefault(_Workspace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={Workspace:{displayName:'Workspace'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/components/Workspace.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/components/Workspace.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var Workspace=_wrapComponent('Workspace')(function(_Component){_inherits(Workspace,_Component);function Workspace(props,content){_classCallCheck(this,Workspace);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Workspace).call(this,props,content));_this.onCanvasSelect=_this.onCanvasSelect.bind(_this);_this.loadImage=_this.loadImage.bind(_this);_this.saveImage=_this.saveImage.bind(_this);return _this;}_createClass(Workspace,[{key:'componentDidMount',value:function componentDidMount(){_electron.ipcRenderer.on('load-image',this.loadImage);_electron.ipcRenderer.on('save-image',this.saveImage);}},{key:'componentWillUnmount',value:function componentWillUnmount(){_electron.ipcRenderer.removeAllListeners('load-image');_electron.ipcRenderer.removeAllListeners('save-image');}},{key:'onCanvasSelect',value:function onCanvasSelect(canvas){var selectCanvas=this.props.selectCanvas;selectCanvas(canvas);}},{key:'loadImage',value:function loadImage(event,canvas){var _props=this.props;var canvases=_props.canvases;var addCanvas=_props.addCanvas;var removeCanvas=_props.removeCanvas;if(!canvases[0].id){removeCanvas(canvases[0]);}var width=canvas.imageFile.width;var height=canvas.imageFile.height;var paths=canvas.imageFile.filepath.split('\\');addCanvas(Object.assign({},_Canvas3.canvasProps,{id:canvas.id,title:paths[paths.length-1],width:width,height:height,layers:[Object.assign({},canvas.imageFile,{filters:{}})],options:{},status:'rendering'}));}},{key:'saveImage',value:function saveImage(event,destination){var _props2=this.props;var canvases=_props2.canvases;var saveImage=_props2.saveImage;var canvas=canvases.find(function(canvas){return canvas.selected;});if(canvas.layers.length){saveImage(canvas,destination);}}},{key:'render',value:function render(){var _this2=this;var _props3=this.props;var canvases=_props3.canvases;var sidebarOpen=_props3.sidebarOpen;var connectDropTarget=_props3.connectDropTarget;return connectDropTarget(_react3.default.createElement('div',{className:_Workspace2.default.workspace,style:{width:'calc(100% - '+(sidebarOpen?256:0)+'px)',marginLeft:(sidebarOpen?256:0)+'px'}},canvases.map(function(canvas,index){return _react3.default.createElement(_Canvas2.default,{key:index,canvas:canvas,onSelect:_this2.onCanvasSelect});})));}}]);return Workspace;}(_react2.Component));exports.default=Workspace;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={App:{displayName:'App'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/App.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/App.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var App=_wrapComponent('App')((_temp=_class=function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,Object.getPrototypeOf(App).apply(this,arguments));}_createClass(App,[{key:'render',value:function render(){return _react3.default.createElement('div',null,this.props.children,function(){if(process.env.NODE_ENV!=='production'){var DevTools=require('./DevTools'); // eslint-disable-line global-require
return _react3.default.createElement(DevTools,null);}}());}}]);return App;}(_react2.Component),_class.propTypes={children:_react2.PropTypes.element.isRequired},_temp));exports.default=App;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _Canvas=require('../components/Canvas');var _Canvas2=_interopRequireDefault(_Canvas);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var canvasSource={beginDrag:function beginDrag(props,monitor,component){var canvas=props.canvas;var rect=component.refs.canvas.getBoundingClientRect();return Object.assign({},canvas,{left:rect.left,top:rect.top-50});}};function collect(connect,monitor){return {connectDragSource:connect.dragSource(),connectDragPreview:connect.dragPreview(),isDragging:monitor.isDragging()};}function mapStateToProps(state){return {};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragSource)(_ItemTypes2.default.CANVAS,canvasSource,collect)(_Canvas2.default));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Counter=require('../components/Counter');var _Counter2=_interopRequireDefault(_Counter);var _counter=require('../actions/counter');var CounterActions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {counter:state.counter};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(CounterActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Counter2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reduxDevtools=require('redux-devtools');var _reduxDevtoolsLogMonitor=require('redux-devtools-log-monitor');var _reduxDevtoolsLogMonitor2=_interopRequireDefault(_reduxDevtoolsLogMonitor);var _reduxDevtoolsDockMonitor=require('redux-devtools-dock-monitor');var _reduxDevtoolsDockMonitor2=_interopRequireDefault(_reduxDevtoolsDockMonitor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_reduxDevtools.createDevTools)(_react2.default.createElement(_reduxDevtoolsDockMonitor2.default,{toggleVisibilityKey:'ctrl-h',changePositionKey:'ctrl-q'},_react2.default.createElement(_reduxDevtoolsLogMonitor2.default,null)));module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Editor=require('../components/Editor');var _Editor2=_interopRequireDefault(_Editor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_Editor2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Filters=require('../components/filters/Filters');var _Filters2=_interopRequireDefault(_Filters);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Filters2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _index=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\redbox-react\\lib\\index.js');var _index2=_interopRequireDefault(_index);var _index3=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-catch-errors\\lib\\index.js');var _index4=_interopRequireDefault(_index3);var _react2=require('react');var _react3=_interopRequireDefault(_react2);var _index5=require('c:\\workspace\\imagery\\node_modules\\babel-preset-react-hmre\\node_modules\\react-transform-hmr\\lib\\index.js');var _index6=_interopRequireDefault(_index5);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _Home=require('../components/Home');var _Home2=_interopRequireDefault(_Home);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof2(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof2(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _components={HomePage:{displayName:'HomePage'}};var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2=(0,_index6.default)({filename:'app/containers/HomePage.js',components:_components,locals:[module],imports:[_react3.default]});var _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2=(0,_index4.default)({filename:'app/containers/HomePage.js',components:_components,locals:[],imports:[_react3.default,_index2.default]});function _wrapComponent(id){return function(Component){return _cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformHmrLibIndexJs2(_cWorkspaceImageryNode_modulesBabelPresetReactHmreNode_modulesReactTransformCatchErrorsLibIndexJs2(Component,id),id);};}var HomePage=_wrapComponent('HomePage')(function(_Component){_inherits(HomePage,_Component);function HomePage(){_classCallCheck(this,HomePage);return _possibleConstructorReturn(this,Object.getPrototypeOf(HomePage).apply(this,arguments));}_createClass(HomePage,[{key:'render',value:function render(){return _react3.default.createElement(_Home2.default,null);}}]);return HomePage;}(_react2.Component));exports.default=HomePage;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default={CANVAS:'canvas'};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _Options=require('../components/options/Options');var _Options2=_interopRequireDefault(_Options);var _CanvasActions=require('../actions/CanvasActions');var canvasActions=_interopRequireWildcard(_CanvasActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(canvasActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_Options2.default);module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRedux=require('react-redux');var _reactDnd=require('react-dnd');var _reactDndHtml5Backend=require('react-dnd-html5-backend');var _reactDndHtml5Backend2=_interopRequireDefault(_reactDndHtml5Backend);var _Workspace=require('../components/Workspace');var _Workspace2=_interopRequireDefault(_Workspace);var _ItemTypes=require('./ItemTypes');var _ItemTypes2=_interopRequireDefault(_ItemTypes);var _WorkspaceActions=require('../actions/WorkspaceActions');var workspaceActions=_interopRequireWildcard(_WorkspaceActions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var editorTarget={drop:function drop(props,monitor,component){var moveCanvas=props.moveCanvas;var sidebarOpen=props.sidebarOpen;var item=monitor.getItem();var delta=monitor.getDifferenceFromInitialOffset();var left=Math.round(item.left+delta.x)-(sidebarOpen?256:0);var top=Math.round(item.top+delta.y);moveCanvas(Object.assign({},item,{left:left,top:top}));}};function collect(connect){return {connectDropTarget:connect.dropTarget()};}function mapStateToProps(state){return {canvases:state.canvases};}function mapDispatchToProps(dispatch){return (0,_redux.bindActionCreators)(workspaceActions,dispatch);}exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)((0,_reactDnd.DropTarget)(_ItemTypes2.default.CANVAS,editorTarget,collect)(_Workspace2.default)));module.exports=exports['default'];'use strict';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactRedux=require('react-redux');var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _routes=require('./routes');var _routes2=_interopRequireDefault(_routes);var _configureStore=require('./store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);var _getMuiTheme=require('material-ui/styles/getMuiTheme');var _getMuiTheme2=_interopRequireDefault(_getMuiTheme);var _MuiThemeProvider=require('material-ui/styles/MuiThemeProvider');var _MuiThemeProvider2=_interopRequireDefault(_MuiThemeProvider);var _reactTapEventPlugin=require('react-tap-event-plugin');var _reactTapEventPlugin2=_interopRequireDefault(_reactTapEventPlugin);require('./app.global.css');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var store=(0,_configureStore2.default)();var history=(0,_reactRouterRedux.syncHistoryWithStore)(_reactRouter.hashHistory,store);(0,_reactTapEventPlugin2.default)();(0,_reactDom.render)(_react2.default.createElement(_MuiThemeProvider2.default,{muiTheme:(0,_getMuiTheme2.default)()},_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_reactRouter.Router,{history:history,routes:_routes2.default}))),document.getElementById('root'));'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=counter;var _counter=require('../actions/counter');function counter(){var state=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var action=arguments[1];switch(action.type){case _counter.INCREMENT_COUNTER:return state+1;case _counter.DECREMENT_COUNTER:return state-1;default:return state;}}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _redux=require('redux');var _reactRouterRedux=require('react-router-redux');var _Canvas=require('../components/Canvas');var _WorkspaceActions=require('../actions/WorkspaceActions');var _counter=require('./counter');var _counter2=_interopRequireDefault(_counter);var _renderer=require('./renderer');var _renderer2=_interopRequireDefault(_renderer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function workspaceReducer(){var state=arguments.length<=0||arguments[0]===undefined?[Object.assign({},_Canvas.canvasProps,{selected:true})]:arguments[0];var action=arguments[1];state=(0,_renderer2.default)(state,action);var status=void 0;if(action.type===_WorkspaceActions.COMPRESS_IMAGE||action.type===_WorkspaceActions.SAVE_IMAGE){return state.map(function(canvas){if(canvas.id===action.payload.id){return action.payload;}return canvas;});}return state;}var rootReducer=(0,_redux.combineReducers)({ //counter,
canvases:workspaceReducer,routing:_reactRouterRedux.routerReducer});exports.default=rootReducer;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=renderer;var _WorkspaceActions=require('../actions/WorkspaceActions');var _CanvasActions=require('../actions/CanvasActions');var _canvasUtils=require('../utils/canvas-utils');var canvasUtils=_interopRequireWildcard(_canvasUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function canvasRenderer(state,action){if(!state.id||action.payload.id!==state.id){return state;}if(action.type===_CanvasActions.INIT_CONTEXT&&!state.context){return action.payload;}if(action.type===_CanvasActions.APPLY_OPTION){return action.payload;}if(action.type===_CanvasActions.APPLY_FILTER){return Object.assign({},action.payload,{status:'rendering'});}if(action.type===_CanvasActions.RENDER_LAYER){return Object.assign({},state,action.payload,{status:'ready'});}if(action.type===_CanvasActions.RENDER_LAYERS){return Object.assign({},state,action.payload,{status:'ready'});}return state;}function renderer(state,action){state=state.map(function(canvas){return canvasRenderer(canvas,action);});if(action.type===_WorkspaceActions.ADD_CANVAS){return [].concat(_toConsumableArray(state.map(function(canvas){return Object.assign({},canvas,{selected:false});})),[Object.assign({},action.payload,{selected:true})]);}if(action.type===_WorkspaceActions.REMOVE_CANVAS){return state.filter(function(canvas){return canvas!==action.payload;});}if(action.type===_WorkspaceActions.MOVE_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,action.payload);}return canvas;});}if(action.type===_WorkspaceActions.SELECT_CANVAS){return state.map(function(canvas){if(action.payload.id===canvas.id){return Object.assign({},canvas,{selected:true});}return Object.assign({},canvas,{selected:false});});}return state;}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactRouter=require('react-router');var _App=require('./containers/App');var _App2=_interopRequireDefault(_App);var _Editor=require('./containers/Editor');var _Editor2=_interopRequireDefault(_Editor);var _CounterPage=require('./containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=_react2.default.createElement(_reactRouter.Route,{path:'/',component:_App2.default},_react2.default.createElement(_reactRouter.IndexRoute,{component:_Editor2.default}),'/* ',_react2.default.createElement(_reactRouter.Route,{path:'/counter',component:_CounterPage2.default}),' */');module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxDevtools=require('redux-devtools');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reduxLogger=require('redux-logger');var _reduxLogger2=_interopRequireDefault(_reduxLogger);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);var _DevTools=require('../containers/DevTools');var _DevTools2=_interopRequireDefault(_DevTools);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var logger=(0,_reduxLogger2.default)({level:'info',collapsed:true});var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.compose)((0,_redux.applyMiddleware)(_reduxThunk2.default,router,logger),_DevTools2.default.instrument(),(0,_reduxDevtools.persistState)(window.location.href.match(/[?&]debug_session=([^&]+)\b/)));function configureStore(initialState){var store=(0,_redux.createStore)(_reducers2.default,initialState,enhancer);if(module.hot){module.hot.accept('../reducers',function(){return store.replaceReducer(require('../reducers'));} // eslint-disable-line global-require
);}return store;}module.exports=exports['default'];'use strict';if(process.env.NODE_ENV==='production'){module.exports=require('./configureStore.production'); // eslint-disable-line global-require
}else {module.exports=require('./configureStore.development'); // eslint-disable-line global-require
}'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=require('redux');var _reduxThunk=require('redux-thunk');var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _reactRouter=require('react-router');var _reactRouterRedux=require('react-router-redux');var _reducers=require('../reducers');var _reducers2=_interopRequireDefault(_reducers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var router=(0,_reactRouterRedux.routerMiddleware)(_reactRouter.hashHistory);var enhancer=(0,_redux.applyMiddleware)(_reduxThunk2.default,router);function configureStore(initialState){return (0,_redux.createStore)(_reducers2.default,initialState,enhancer);}module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.createVertexShader=createVertexShader;exports.createFragmentShader=createFragmentShader;exports.initContext=initContext;exports.renderLayer=renderLayer;exports.getPixels=getPixels;exports.getPixel=getPixel;exports.cleanUp=cleanUp;exports.runLengthEncode=runLengthEncode;exports.huffmanEncode=huffmanEncode;exports.lzwEncode=lzwEncode;exports.exportCanvasAsImage=exportCanvasAsImage;var _imageSpatial=require('../shaders/image-spatial.vert');var _imageSpatial2=_interopRequireDefault(_imageSpatial);var _imageRaster=require('../shaders/image-raster.frag');var _imageRaster2=_interopRequireDefault(_imageRaster);var _stream=require('stream');var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);var _HuffmanTree=require('./HuffmanTree');var _HuffmanTree2=_interopRequireDefault(_HuffmanTree);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function isError(gl,shader){if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){var info=gl.getShaderInfoLog(shader);gl.deleteShader(shader);console.error("Could not compile vertex shader. \n\n"+info);return true;}return false;}function createVertexShader(gl,program){var shader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(shader,_imageSpatial2.default);gl.compileShader(shader);if(isError(gl,shader)){return null;}return shader;}function createFragmentShader(gl,program){var shader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(shader,_imageRaster2.default);gl.compileShader(shader);if(isError(gl,shader)){return;}return shader;}function initContext(canvas,gl){var context={gl:gl}; //create and init shaders
var program=gl.createProgram();var vertexShader=createVertexShader(gl,program);var fragmentShader=createFragmentShader(gl,program);if(!vertexShader||!fragmentShader){gl.deleteProgram(program);return;}gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){var info=gl.getProgramInfoLog(program);console.error("Error in program linking:"+info);cleanUp(context);return;}gl.useProgram(program); //create texture coordinate buffer
var vertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0]),gl.STATIC_DRAW); //specify the location of the texture coordinate data
var texCoordInLocation=gl.getAttribLocation(program,"a_texCoord");gl.enableVertexAttribArray(texCoordInLocation);gl.vertexAttribPointer(texCoordInLocation,2,gl.FLOAT,false,0,0); // set the resolution
var resolutionLocation=gl.getUniformLocation(program,"u_resolution");gl.uniform2f(resolutionLocation,canvas.width,canvas.height);return Object.assign({},context,{program:program,vertexShader:vertexShader,fragmentShader:fragmentShader});}function isPowerOfTwo(x){return (x&x-1)==0;}function nextHighestPowerOfTwo(x){--x;for(var i=1;i<32;i<<=1){x=x|x>>i;}return x+1;}function renderLayer(context,layer,layerIndex){if(layerIndex>31){console.error("Only up to 32 layers per Canvas is supported");return;}var gl=context.gl; // apply filters
var filters=_lodash2.default.values(layer.filters).sort(function(a,b){return a.index-b.index;});filters.forEach(function(options){if(!options.disabled){layer=options.filter(layer,context,options);}});var register=gl['TEXTURE'+layerIndex];var program=context.program;var width=isPowerOfTwo(layer.width)?layer.width:nextHighestPowerOfTwo(layer.width);var height=isPowerOfTwo(layer.height)?layer.height:nextHighestPowerOfTwo(layer.height);var texture=gl.createTexture();var pixels=new Uint8Array(3*width*height);var offset=width-layer.width;var index=0;var rowIndex=0; //map pixels for grayscale
layer.pixels.forEach(function(pixel){var remaining=layer.width-index;if(remaining%layer.width===0){rowIndex=index/layer.width;}pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;pixels[index+++rowIndex*offset]=pixel;}); //create pixel data buffer
var textureBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,textureBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,width,0.0,0.0,height,0.0,height,width,0.0,width,height]),gl.STATIC_DRAW); //specify the location of the pixel position data
var positionLocation=gl.getAttribLocation(program,"a_position");gl.enableVertexAttribArray(positionLocation);gl.vertexAttribPointer(positionLocation,2,gl.FLOAT,false,0,0); //config texture
gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,width,height,0,gl.RGB,gl.UNSIGNED_BYTE,pixels); //render
gl.clearColor(0.0,0.0,0.0,1.0);gl.clear(gl.COLOR_BUFFER_BIT);gl.activeTexture(register);gl.drawArrays(gl.TRIANGLES,0,6); // cleanup
gl.deleteBuffer(textureBuffer);gl.deleteTexture(texture);}function getPixels(canvas){var gl=canvas.context.gl;var pixels=new Uint8Array(4*canvas.width*canvas.height);gl.readPixels(0,0,canvas.width,canvas.height,gl.RGBA,gl.UNSIGNED_BYTE,pixels);var last=pixels.length/4-1;var rawPixels=[];var index=last;var offset=0;for(var i=0;i<pixels.length;i+=4){var pixel=Math.round((pixels[i]+pixels[i+1]+pixels[i+2])/3);if((index+1)%canvas.width===0){offset=index;}rawPixels[offset+(offset-index--)]=pixel;}return rawPixels;}function getPixel(canvas,x,y){var gl=canvas.context.gl;var pixel=new Uint8Array(4);gl.readPixels(x,canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel);return pixel[0];}function cleanUp(context){if(!context){return;}var gl=context.gl;gl.deleteProgram(context.program);gl.deleteShader(context.vertexShader);gl.deleteShader(context.fragmentShader);}function runLengthEncode(stream,pixels,width,height,mode){var magicNumber='E2';var count=1;var prev=void 0;if(mode===1){magicNumber='E1';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel,index){if(prev===pixel){count++;}else if(prev!==undefined&&prev!==pixel){if(mode===1){ // ASCII
stream.write(prev+' '+count+(index===pixels.length-1?'\n':' '));}else { // BIN
var pixelBuffer=new Buffer.allocUnsafe(1);var countBuffer=new Buffer(4);pixelBuffer.writeUInt8(prev);countBuffer.writeUInt32BE(count);stream.write(pixelBuffer);stream.write(countBuffer);}count=1;}prev=pixel;});}function huffmanEncode(stream,pixels,width,height,mode){var histogram={};pixels.forEach(function(pixel){if(histogram[pixel]){histogram[pixel]++;}else {histogram[pixel]=1;}});var tree=new _HuffmanTree2.default(histogram,',',pixels.length);var codeBook={};tree.leaves.forEach(function(node){if(node===tree.root){return;}var token=node.token;codeBook[token]=node.bit;while(node.parent!==tree.root){node=node.parent;codeBook[token]=node.bit+codeBook[token];}});var encoded='';pixels.forEach(function(pixel,index){encoded+=codeBook[pixel.toString()];});var chunks=encoded.match(/.{1,8}/g);var magicNumber='E4';if(mode===1){magicNumber='E3';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');Object.keys(codeBook).forEach(function(key){var buffer=new Buffer(2);buffer.writeUInt8(parseInt(key));buffer.writeUInt8(parseInt(codeBook[key],2),1);stream.write(buffer);});stream.write('\n');chunks.forEach(function(chunk,index){var byte=parseInt(chunk,2);if(mode===1){ // ASCII
stream.write(byte+' ');}else { // BIN
var buffer=new Buffer(1);buffer.writeUInt8(byte);stream.write(buffer);}});}function lzwEncode(stream,pixels,width,height,mode){var max=Math.pow(2,16);var writeBytes=function writeBytes(bytes){if(mode===1){ // ASCII
stream.write(bytes+' ');}else { // BIN
var buffer=new Buffer(2);buffer.writeUInt16BE(bytes);stream.write(buffer);}};var output=void 0;var index=255;var prev='';var dictionary={};var magicNumber='E6';if(mode===1){magicNumber='E5';}stream.write(magicNumber+'\n'+width+' '+height+'\n255\n');pixels.forEach(function(pixel){var key=prev+' '+pixel;if(dictionary[key]){prev=key;}else {output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);if(index+1>255){dictionary[key]=++index;}prev=pixel;}});output=dictionary[prev]?dictionary[prev]:parseInt(prev);writeBytes(output);}function exportCanvasAsImage(canvas,destination){var stream=_fs2.default.createWriteStream(destination);var pixels=getPixels(canvas);var method=canvas.options.COMPRESSION?canvas.options.COMPRESSION.method:0;var mode=canvas.options.COMPRESSION?canvas.options.COMPRESSION.mode:0;if(method===1){ // Run length encoding
runLengthEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===2){ // huffman
huffmanEncode(stream,pixels,canvas.width,canvas.height,mode);}else if(method===3){ // differential PCM
}else if(method===4){ // LZW
lzwEncode(stream,pixels,canvas.width,canvas.height,mode);}else {stream.write('P5\n'+canvas.width+' '+canvas.height+'\n255\n');pixels.forEach(function(pixel,index){var buffer=new Buffer.allocUnsafe(1);buffer.writeUInt8(pixel);stream.write(buffer);});}stream.end();}'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var HuffmanTree=function HuffmanTree(histogram,seperator,total){_classCallCheck(this,HuffmanTree);seperator=seperator||'';var nodes=Object.keys(histogram).map(function(key){return {token:key.toString(),probability:histogram[key]/total,parent:null};});nodes.sort(function(current,next){return current.probability-next.probability;});this.leaves=[].concat(_toConsumableArray(nodes));while(nodes.length){var current=nodes.shift();var next=nodes.shift();if(next){var parent={token:current.token+seperator+next.token,probability:current.probability+next.probability,left:current,right:next};current.parent=parent;current.bit='0';next.parent=parent;next.bit='1';nodes.push(parent);if(parent.probability<nodes[nodes.length-1].probability){nodes.sort(function(current,next){return current.probability-next.probability;});}}else {this.root=current;}}};exports.default=HuffmanTree;module.exports=exports['default'];"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runLengthDecode=runLengthDecode;function runLengthDecode(data){var pixels=[];var prev=void 0;data.forEach(function(value,index){if(index%2===1){var count=value;for(var i=0;i<count;i++){pixels.push(prev);}}prev=value;});return pixels;}'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _lineReader=require('line-reader');var _lineReader2=_interopRequireDefault(_lineReader);var _PBMFileReader=require('./PBMFileReader');var _PBMFileReader2=_interopRequireDefault(_PBMFileReader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var PBM_COMPRESSED_FORMATS={ //"E1" : "PGM_ASCII_RLE_COMPRESSED",
"E2":"PGM_BIN_RLE_COMPRESSED", //"E3" : "PGM_ASCII_HME_COMPRESSED",
"E4":"PGM_BIN_HME_COMPRESSED", //"E5" : "PGM_ASCII_LZW_COMPRESSED",
"E6":"PGM_BIN_LZW_COMPRESSED"};var PBM_IMAGE_FORMATS=Object.assign({},{ //"P1" : "PBM_ASCII",
"P2":"PGM_ASCII", //"P3" : "PPM_ASCII",
//"P4" : "PBM_BIN",
"P5":"PGM_BIN"}, //"P6" : "PPM_BIN",
PBM_COMPRESSED_FORMATS);var PBMAsciiReader=function(){function PBMAsciiReader(filepath,onLine,onClose){var _this=this;_classCallCheck(this,PBMAsciiReader);var index=0;_lineReader2.default.eachLine(filepath,function(line,last){if(onLine){onLine(line,index++,last);}if(last||_this.error){onClose(_this.error);return false;}});}_createClass(PBMAsciiReader,[{key:'close',value:function close(error){this.error=error;}}]);return PBMAsciiReader;}();var ImageFile=function(){function ImageFile(filepath){_classCallCheck(this,ImageFile);this.filepath=filepath;this.length=0;this.pixels=[];}_createClass(ImageFile,[{key:'on',value:function on(event,callback){this[event]=callback;}},{key:'load',value:function load(){var _this2=this;var onLoad=this['load-data']||function(){};var onError=this['load-error']||function(error){};var onComplete=this['load-complete']||function(){};var complete=function complete(){var length=_this2.pixels.length*8;if(_this2.length!==length){_this2.compressionRatio=Math.ceil(length/_this2.length);}onComplete();console.log('Loaded image: '+_this2.filepath+' '+_this2.width+' '+_this2.height+' '+_this2.colorBits);};var getImagePixels=function getImagePixels(pixels){_this2.length+=pixels.length;pixels.forEach(function(pixel){_this2.pixels.push(pixel);});return pixels;};var fd=_fs2.default.openSync(this.filepath,'r');if(!fd){onError('Unable to open file');return;}var header=new Buffer(2);_fs2.default.readSync(fd,header,0,2,0);this.format=PBM_IMAGE_FORMATS[header.toString()];if(!this.format){_fs2.default.close(fd,function(){return onError('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));});}else {if(this.format.indexOf('_ASCII')!==-1){(function(){_fs2.default.close(fd);var reader=new PBMAsciiReader(_this2.filepath,function(line,index){if(index===0)return;if(!line.startsWith('#')){if(!_this2.width&&!_this2.height){var resolution=line.split(/\s+/);_this2.width=parseInt(resolution[0]);_this2.height=parseInt(resolution[1]);}else if(!_this2.colorBits){_this2.colorBits=parseInt(line);}else if(_this2['load-init']){_this2['load-init']();delete _this2['load-init'];onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else if(onLoad){onLoad(getImagePixels(line.split(/\s+/).map(function(value){return parseInt(value);})));}else {reader.close('File is not a supported image format. Supported image formats:\n'+JSON.stringify(IMAGE_FORMATS,null,2));}}},function(err){if(err){onError(err);}else {complete();}});})();}else if(this.format.indexOf('_BIN')!==-1){var _reader=new _PBMFileReader2.default(fd,this.format);Object.assign(this,_reader.getInfo());this['load-init']();this.length=_reader.readPixels(function(pixels){return onLoad(getImagePixels(pixels));},64);_fs2.default.close(fd,complete);}else {fd.close(fd,function(){return onError('Unexpected error');});}}}}]);return ImageFile;}();exports.default=ImageFile;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==='undefined'?'undefined':_typeof2(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj==='undefined'?'undefined':_typeof2(obj);};var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _imageUtils=require('./image-utils');var imageUtils=_interopRequireWildcard(_imageUtils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function defaultReducer(pixels){return pixels;}function readBytes(fd,position){var length=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var buffer=new Buffer(length);var size=_fs2.default.readSync(fd,buffer,0,length,position); // if (length !== size) {
//   buffer = Buffer.from(buffer, 0, size);
// }
return buffer;}function getUTF8String(fd,offset,term){var content='';var buffer=new Buffer(1);if(offset){readBytes(fd,offset);}var _loop=function _loop(){buffer=readBytes(fd);var val=buffer.toString();if(!term){return {v:val};}else if(Array.isArray(term)&&term.find(function(term){return val===term;})){return {v:content};}else if(val===term){return {v:content};}else {content+=val;}};while(buffer.length){var _ret=_loop();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}}function readPGMBinary(fd,collector,position,term){collector=collector||function(){};var buffer=readBytes(fd,position);var length=0;while(buffer.length){length+=8;collector(buffer);buffer=readBytes(fd);if(term&&term==buffer.toString()){break;}}return length;}function readPGMCompressedRLE(fd,collector,position){collector=collector||function(){};var pixelBuffer=readBytes(fd,position);var length=0;while(pixelBuffer.length){length+=8;collector(pixelBuffer);var countBuffer=new Buffer(4);for(var i=0;i<4;i++){ // read 4 bytes or a 32 bit unsigned integer
countBuffer[i]=readBytes(fd)[0];}length+=32;collector(countBuffer);pixelBuffer=readBytes(fd);}return length;}function readPGMCompressedHME(fd,collector,position){var index=0;var codeBook={};var value=void 0;var length=0;readPGMBinary(fd,function(buffer){if(index++%2===0){value=buffer.readUInt8(0);}else {codeBook[buffer.readUInt8(0).toString(2)]=value;}length+=8;},position,'\n');var encoded='';readPGMBinary(fd,function(buffer){var binary=buffer.readUInt8(0).toString(2);encoded+="00000000".substring(0,8-binary.length)+binary;length+=8;});value=null;var code='';for(var i=0;i<encoded.length;i++){code+=encoded.charAt(i);value=codeBook[code];if(value!==null){collector(value);code='';value=null;}}return length;}function readPGMCompressedLZW(fd,collector,position){collector=collector||function(){};var buffer=readBytes(fd,position,2);var prev=void 0;var index=255;var dictionary={};var length=0;while(buffer.length){length+=16;var bytes=buffer.readUInt16BE(0);var pixels=dictionary[bytes]?dictionary[bytes].split(' '):[bytes];pixels.forEach(function(pixel){collector(parseInt(pixel));});if(prev!==undefined){dictionary[++index]=prev+' '+pixels[0];}prev=pixels.join(' ');buffer=readBytes(fd,2);}return length;}var PBMFileReader=function(){function PBMFileReader(fd,format){_classCallCheck(this,PBMFileReader);this.fd=fd;this.format=format;}_createClass(PBMFileReader,[{key:'getInfo',value:function getInfo(){var width=void 0,height=void 0,colorBits=void 0;var str=getUTF8String(this.fd,2,[' ','\n']);while(str&&(!width||!height||!colorBits)){if(str.indexOf('#')===0){str=getUTF8String(this.fd,null,'\n');}else if(!width){width=parseInt(str);str=getUTF8String(this.fd,null,[' ','\n']);}else if(!height){height=parseInt(str);str=getUTF8String(this.fd,null,'\n');}else if(!colorBits){colorBits=parseInt(str);if(!colorBits){str=getUTF8String(this.fd,null,'\n');}}}return {width:width,height:height,colorBits:colorBits};}},{key:'readPixels',value:function readPixels(onRead,batchSize){var processor=defaultReducer;var pixels=[];var length=0;var collector=function collector(data){if(data!==undefined){if(Number.isInteger(data)){pixels.push(data);}else if(data.length===4){pixels.push(data.readUInt32BE(0));}else {pixels.push(data.readUInt8(0));}if(pixels.length===batchSize){onRead(processor(pixels));pixels=[];}}};if(this.format.indexOf('PGM_BIN_RLE')===0){processor=imageUtils.runLengthDecode;length=readPGMCompressedRLE(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_HME')===0){length=readPGMCompressedHME(this.fd,collector);}else if(this.format.indexOf('PGM_BIN_LZW')===0){length=readPGMCompressedLZW(this.fd,collector);}else if(this.format.indexOf('PGM_BIN')===0){length=readPGMBinary(this.fd,collector);}if(pixels.length){onRead(processor(pixels));}return length;}}]);return PBMFileReader;}();exports.default=PBMFileReader;module.exports=exports['default'];'use strict';var _electron=require('electron');var _ImageFile=require('./app/utils/ImageFile');var _ImageFile2=_interopRequireDefault(_ImageFile);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var menu=void 0;var commands=void 0;var template=void 0;var mainWindow=null;var canvasId=0;if(process.env.NODE_ENV==='development'){require('electron-debug')(); // eslint-disable-line global-require
}_electron.app.on('window-all-closed',function(){if(process.platform!=='darwin')_electron.app.quit();});function createMenuTemplate(commands){var fileMenus=[{label:'&File',submenu:[{label:'&Open',accelerator:commands.open,click:function click(){var filepaths=_electron.dialog.showOpenDialog({properties:['openFile']});if(filepaths){(function(){var id=++canvasId;var filepath=filepaths[0];var imageFile=new _ImageFile2.default(filepath);imageFile.on('load-init',function(){return mainWindow.webContents.send('load-image',{id:id,imageFile:imageFile});});imageFile.on('load-data',function(pixels){return mainWindow.webContents.send('load-data',{id:id,filepath:filepath,pixels:pixels});});imageFile.on('load-complete',function(){return mainWindow.webContents.send('load-complete',{id:id,filepath:filepath,compressionRatio:imageFile.compressionRatio});});imageFile.on('load-error',function(message){return _electron.dialog.showMessageBox({type:'error',title:'Failed to load image',buttons:['Close'],message:message});});imageFile.load();})();}else {console.error('Failed to load image!');}}},{label:'&Save As',accelerator:commands.save,click:function click(){var filepath=_electron.dialog.showSaveDialog({});if(filepath){mainWindow.webContents.send('save-image',filepath);}}}]}];if(process.platform!=='darwin'){fileMenus[0].submenu.push({label:'&Close',accelerator:'Ctrl+W',click:function click(){mainWindow.close();}});}return [].concat(fileMenus,[{label:'&View',submenu:process.env.NODE_ENV==='development'?[{label:'&Reload',accelerator:commands.reload,click:function click(){mainWindow.webContents.reload();}},{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}},{label:'Toggle &Developer Tools',accelerator:commands.devTools,click:function click(){mainWindow.toggleDevTools();}}]:[{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}}]},{label:'Help',role:'help',submenu:[{label:'Learn More',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery');}},{label:'Documentation',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/blob/master/README.md');}},{label:'Search Issues',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/issues');}}]}]);}_electron.app.on('ready',function(){mainWindow=new _electron.BrowserWindow({show:false,width:1024,height:728});mainWindow.loadURL('file://'+__dirname+'/app/app.html');mainWindow.webContents.on('did-finish-load',function(){mainWindow.show();mainWindow.focus();});mainWindow.on('closed',function(){mainWindow=null;});if(process.env.NODE_ENV==='development'){mainWindow.openDevTools();}if(process.platform==='darwin'){commands={open:'Command+O',save:'Command+Shift+S',hide:'Command+H',quit:'Command+Q',reload:'Command+R',fullscreen:'Ctrl+Command+F',devTools:'Alt+Command+I'};template=createMenuTemplate(commands);template=[{label:'Imagery',submenu:[{label:'About Imagery',selector:'orderFrontStandardAboutPanel:'},{type:'separator'},{label:'Services',submenu:[]},{type:'separator'},{label:'Hide Imagery',accelerator:commands.hide,selector:'hide:'},{label:'Hide Others',accelerator:'Command+Shift+H',selector:'hideOtherApplications:'},{label:'Show All',selector:'unhideAllApplications:'},{type:'separator'},{label:'Quit',accelerator:commands.quit,click:function click(){_electron.app.quit();}}]}].concat(_toConsumableArray(template));menu=_electron.Menu.buildFromTemplate(template);_electron.Menu.setApplicationMenu(menu);}else {commands={open:'Ctrl+O',save:'Ctrl+Shift+S',reload:'Ctrl+R',fullscreen:'F11',devTools:'Alt+Ctrl+I'};template=createMenuTemplate(commands);menu=_electron.Menu.buildFromTemplate(template);mainWindow.setMenu(menu);}}); /* eslint strict: 0, no-shadow: 0, no-unused-vars: 0, no-console: 0 */'use strict';require('babel-polyfill');var os=require('os');var webpack=require('webpack');var electronCfg=require('./webpack.config.electron.js');var cfg=require('./webpack.config.production.js');var packager=require('electron-packager');var del=require('del');var exec=require('child_process').exec;var argv=require('minimist')(process.argv.slice(2));var pkg=require('./package.json');var deps=Object.keys(pkg.dependencies);var devDeps=Object.keys(pkg.devDependencies);var appName=argv.name||argv.n||pkg.productName;var shouldUseAsar=argv.asar||argv.a||false;var shouldBuildAll=argv.all||false;var DEFAULT_OPTS={dir:'./',name:appName,asar:shouldUseAsar,ignore:['^/test($|/)','^/tools($|/)','^/release($|/)','^/main.development.js'].concat(devDeps.map(function(name){return '/node_modules/'+name+'($|/)';})).concat(deps.filter(function(name){return !electronCfg.externals.includes(name);}).map(function(name){return '/node_modules/'+name+'($|/)';}))};var icon=argv.icon||argv.i||'app/app';if(icon){DEFAULT_OPTS.icon=icon;}var version=argv.version||argv.v;if(version){DEFAULT_OPTS.version=version;startPack();}else { // use the same version as the currently-installed electron-prebuilt
exec('npm list electron-prebuilt --dev',function(err,stdout){if(err){DEFAULT_OPTS.version='1.2.0';}else {DEFAULT_OPTS.version=stdout.split('electron-prebuilt@')[1].replace(/\s/g,'');}startPack();});}function build(cfg){return new Promise(function(resolve,reject){webpack(cfg,function(err,stats){if(err)return reject(err);resolve(stats);});});}function startPack(){console.log('start pack...');build(electronCfg).then(function(){return build(cfg);}).then(function(){return del('release');}).then(function(paths){if(shouldBuildAll){(function(){ // build for all platforms
var archs=['ia32','x64'];var platforms=['linux','win32','darwin'];platforms.forEach(function(plat){archs.forEach(function(arch){pack(plat,arch,log(plat,arch));});});})();}else { // build for current platform only
pack(os.platform(),os.arch(),log(os.platform(),os.arch()));}}).catch(function(err){console.error(err);});}function pack(plat,arch,cb){ // there is no darwin ia32 electron
if(plat==='darwin'&&arch==='ia32')return;var iconObj={icon:DEFAULT_OPTS.icon+function(){var extension='.png';if(plat==='darwin'){extension='.icns';}else if(plat==='win32'){extension='.ico';}return extension;}()};var opts=Object.assign({},DEFAULT_OPTS,iconObj,{platform:plat,arch:arch,prune:true,'app-version':pkg.version||DEFAULT_OPTS.version,out:'release/'+plat+'-'+arch});packager(opts,cb);}function log(plat,arch){return function(err,filepath){if(err)return console.error(err);console.log(plat+'-'+arch+' finished!');};}'use strict';var _express=require('express');var _express2=_interopRequireDefault(_express);var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackDevMiddleware=require('webpack-dev-middleware');var _webpackDevMiddleware2=_interopRequireDefault(_webpackDevMiddleware);var _webpackHotMiddleware=require('webpack-hot-middleware');var _webpackHotMiddleware2=_interopRequireDefault(_webpackHotMiddleware);var _webpackConfig=require('./webpack.config.development');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var app=(0,_express2.default)(); /* eslint no-console: 0 */var compiler=(0,_webpack2.default)(_webpackConfig2.default);var PORT=3000;var wdm=(0,_webpackDevMiddleware2.default)(compiler,{publicPath:_webpackConfig2.default.output.publicPath,stats:{colors:true}});app.use(wdm);app.use((0,_webpackHotMiddleware2.default)(compiler));var server=app.listen(PORT,'localhost',function(err){if(err){console.error(err);return;}console.log('Listening at http://localhost:'+PORT);});process.on('SIGTERM',function(){console.log('Stopping dev server');wdm.close();server.close(function(){process.exit(0);});});'use strict';var _chai=require('chai');var _sinon=require('sinon');var _counter=require('../../app/actions/counter');var actions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}describe('actions',function(){it('increment should create increment action',function(){(0,_chai.expect)(actions.increment()).to.deep.equal({type:actions.INCREMENT_COUNTER});});it('decrement should create decrement action',function(){(0,_chai.expect)(actions.decrement()).to.deep.equal({type:actions.DECREMENT_COUNTER});});it('incrementIfOdd should create increment action',function(){var fn=actions.incrementIfOdd();(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:1};};fn(dispatch,getState);(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;});it('incrementIfOdd shouldnt create increment action if counter is even',function(){var fn=actions.incrementIfOdd();var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:2};};fn(dispatch,getState);(0,_chai.expect)(dispatch.called).to.be.false;}); // There's no nice way to test this at the moment...
it('incrementAsync',function(done){var fn=actions.incrementAsync(1);(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();fn(dispatch);setTimeout(function(){(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;done();},5);});}); /* eslint no-unused-expressions: 0 */'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint no-unused-expressions: 0 */var _chai=require('chai');var _sinon=require('sinon');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _Counter=require('../../app/components/Counter');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(){var actions={increment:(0,_sinon.spy)(),incrementIfOdd:(0,_sinon.spy)(),incrementAsync:(0,_sinon.spy)(),decrement:(0,_sinon.spy)()};var component=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_Counter2.default,_extends({counter:1},actions)));return {component:component,actions:actions,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(component,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(component,'counter')};}describe('Counter component',function(){it('should display count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('first button should call increment',function(){var _setup2=setup();var buttons=_setup2.buttons;var actions=_setup2.actions;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(actions.increment.called).to.be.true;});it('second button should call decrement',function(){var _setup3=setup();var buttons=_setup3.buttons;var actions=_setup3.actions;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(actions.decrement.called).to.be.true;});it('third button should call incrementIfOdd',function(){var _setup4=setup();var buttons=_setup4.buttons;var actions=_setup4.actions;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(actions.incrementIfOdd.called).to.be.true;});it('fourth button should call incrementAsync',function(){var _setup5=setup();var buttons=_setup5.buttons;var actions=_setup5.actions;_reactAddonsTestUtils.Simulate.click(buttons[3]);(0,_chai.expect)(actions.incrementAsync.called).to.be.true;});});'use strict';var _chai=require('chai');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _reactRedux=require('react-redux');var _CounterPage=require('../../app/containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);var _configureStore=require('../../app/store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(initialState){var store=(0,_configureStore2.default)(initialState);var app=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_CounterPage2.default,null)));return {app:app,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(app,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(app,'counter')};}describe('containers',function(){describe('App',function(){it('should display initial count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should display updated count after increment button click',function(){var _setup2=setup();var buttons=_setup2.buttons;var p=_setup2.p;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('should display updated count after descrement button click',function(){var _setup3=setup();var buttons=_setup3.buttons;var p=_setup3.p;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(p.textContent).to.match(/^-1$/);});it('shouldnt change if even and if odd button clicked',function(){var _setup4=setup();var buttons=_setup4.buttons;var p=_setup4.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should change if odd and if odd button clicked',function(){var _setup5=setup({counter:1});var buttons=_setup5.buttons;var p=_setup5.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^2$/);});});});'use strict';var _path=require('path');var _path2=_interopRequireDefault(_path);var _chromedriver=require('chromedriver');var _chromedriver2=_interopRequireDefault(_chromedriver);var _seleniumWebdriver=require('selenium-webdriver');var _seleniumWebdriver2=_interopRequireDefault(_seleniumWebdriver);var _chai=require('chai');var _electronPrebuilt=require('electron-prebuilt');var _electronPrebuilt2=_interopRequireDefault(_electronPrebuilt);var _Home=require('../app/components/Home.css');var _Home2=_interopRequireDefault(_Home);var _Counter=require('../app/components/Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else {return Promise.resolve(value).then(function(value){return step("next",value);},function(err){return step("throw",err);});}}return step("next");});};}_chromedriver2.default.start(); // on port 9515
process.on('exit',_chromedriver2.default.stop);var delay=function delay(time){return new Promise(function(resolve){return setTimeout(resolve,time);});};describe('main window',function spec(){var _this=this;this.timeout(5000);before(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delay(1000);case 2: // wait chromedriver start time
_this.driver=new _seleniumWebdriver2.default.Builder().usingServer('http://localhost:9515').withCapabilities({chromeOptions:{binary:_electronPrebuilt2.default,args:['app='+_path2.default.resolve()]}}).forBrowser('electron').build();case 3:case 'end':return _context.stop();}}},_callee,_this);})));after(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.driver.quit();case 2:case 'end':return _context2.stop();}}},_callee2,_this);})));var findCounter=function findCounter(){return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Counter2.default.counter));};var findButtons=function findButtons(){return _this.driver.findElements(_seleniumWebdriver2.default.By.className(_Counter2.default.btn));};it('should open window',_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var title;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.driver.getTitle();case 2:title=_context3.sent;(0,_chai.expect)(title).to.equal('Hello Electron React!');case 4:case 'end':return _context3.stop();}}},_callee3,_this);})));it('should to Counter with click "to Counter" link',_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var link,counter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Home2.default.container+' > a'));case 2:link=_context4.sent;link.click();_context4.next=6;return findCounter();case 6:counter=_context4.sent;_context4.next=9;return counter.getText();case 9:_context4.t0=_context4.sent;(0,_chai.expect)(_context4.t0).to.equal('0');case 11:case 'end':return _context4.stop();}}},_callee4,_this);})));it('should display updated count after increment button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var buttons,counter;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return findButtons();case 2:buttons=_context5.sent;buttons[0].click();_context5.next=6;return findCounter();case 6:counter=_context5.sent;_context5.next=9;return counter.getText();case 9:_context5.t0=_context5.sent;(0,_chai.expect)(_context5.t0).to.equal('1');case 11:case 'end':return _context5.stop();}}},_callee5,_this);})));it('should display updated count after descrement button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var buttons,counter;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return findButtons();case 2:buttons=_context6.sent;_context6.next=5;return findCounter();case 5:counter=_context6.sent;buttons[1].click(); // -
_context6.next=9;return counter.getText();case 9:_context6.t0=_context6.sent;(0,_chai.expect)(_context6.t0).to.equal('0');case 11:case 'end':return _context6.stop();}}},_callee6,_this);})));it('shouldnt change if even and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var buttons,counter;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return findButtons();case 2:buttons=_context7.sent;_context7.next=5;return findCounter();case 5:counter=_context7.sent;buttons[2].click(); // odd
_context7.next=9;return counter.getText();case 9:_context7.t0=_context7.sent;(0,_chai.expect)(_context7.t0).to.equal('0');case 11:case 'end':return _context7.stop();}}},_callee7,_this);})));it('should change if odd and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var buttons,counter;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return findButtons();case 2:buttons=_context8.sent;_context8.next=5;return findCounter();case 5:counter=_context8.sent;buttons[0].click(); // +
buttons[2].click(); // odd
_context8.next=10;return counter.getText();case 10:_context8.t0=_context8.sent;(0,_chai.expect)(_context8.t0).to.equal('2');case 12:case 'end':return _context8.stop();}}},_callee8,_this);})));it('should change if async button clicked and a second later',_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var buttons,counter;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return findButtons();case 2:buttons=_context9.sent;_context9.next=5;return findCounter();case 5:counter=_context9.sent;buttons[3].click(); // async
_context9.next=9;return counter.getText();case 9:_context9.t0=_context9.sent;(0,_chai.expect)(_context9.t0).to.equal('2');_context9.next=13;return _this.driver.wait(function(){return counter.getText().then(function(text){return text==='3';});},1000,'count not as expected');case 13:case 'end':return _context9.stop();}}},_callee9,_this);})));it('should back to home if back button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var link;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Counter2.default.backButton+' > a'));case 2:link=_context10.sent;link.click();_context10.next=6;return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Home2.default.container));case 6:case 'end':return _context10.stop();}}},_callee10,_this);})));});'use strict';var _chai=require('chai');describe('description',function(){it('description',function(){(0,_chai.expect)(1+2).to.equal(3);});}); /* eslint func-names: 0 */'use strict';var _chai=require('chai');var _counter=require('../../app/reducers/counter');var _counter2=_interopRequireDefault(_counter);var _counter3=require('../../app/actions/counter');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}describe('reducers',function(){describe('counter',function(){it('should handle initial state',function(){(0,_chai.expect)((0,_counter2.default)(undefined,{})).to.equal(0);});it('should handle INCREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.INCREMENT_COUNTER})).to.equal(2);});it('should handle DECREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.DECREMENT_COUNTER})).to.equal(0);});it('should handle unknown action type',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:'unknown'})).to.equal(1);});});});'use strict';require('babel-polyfill');var _jsdom=require('jsdom');global.document=(0,_jsdom.jsdom)('<!doctype html><html><body></body></html>');global.window=document.defaultView;global.navigator=global.window.navigator;window.localStorage=window.sessionStorage={getItem:function getItem(key){return this[key];},setItem:function setItem(key,value){this[key]=value;},removeItem:function removeItem(key){this[key]=undefined;}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _path=require('path');var _path2=_interopRequireDefault(_path);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default={module:{loaders:[{test:/\.jsx?$/,loaders:['babel-loader'],exclude:/node_modules/},{test:/\.json$/,loader:'json-loader'}]},output:{path:_path2.default.join(__dirname,'dist'),filename:'bundle.js',libraryTarget:'commonjs2'},resolve:{extensions:['','.js','.jsx'],packageMains:['webpack','browser','web','browserify',['jam','main'],'main']},plugins:[],externals:[ // put your node 3rd party libraries which can't be built with webpack here
// (mysql, mongodb, and so on..)
]};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint max-len: 0 */var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{debug:true,devtool:'cheap-module-eval-source-map',entry:['webpack-hot-middleware/client?path=http://localhost:3000/__webpack_hmr','./app/index'],output:_extends({},_webpackConfig2.default.output,{publicPath:'http://localhost:3000/dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loaders:['style-loader','css-loader?sourceMap']},{test:/^((?!\.global).)*\.css$/,loaders:['style-loader','css-loader?modules&sourceMap&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]']}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.HotModuleReplacementPlugin(),new _webpack2.default.NoErrorsPlugin(),new _webpack2.default.DefinePlugin({__DEV__:true,'process.env':{NODE_ENV:JSON.stringify('development')}})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}exports.default=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./main.development',output:_extends({},_webpackConfig2.default.output,{path:__dirname,filename:'./main.js'}),plugins:[new _webpack2.default.optimize.UglifyJsPlugin({compressor:{warnings:false}}),new _webpack2.default.BannerPlugin('require("source-map-support").install();',{raw:true,entryOnly:false}),new _webpack2.default.DefinePlugin({'process.env':{NODE_ENV:JSON.stringify('production')}})],target:'electron-main',node:{__dirname:false,__filename:false},externals:[].concat(_toConsumableArray(_webpackConfig2.default.externals),['font-awesome','source-map-support'])});module.exports=exports['default'];'use strict'; // for babel-plugin-webpack-loaders
require('babel-register');var devConfigs=require('./webpack.config.development');module.exports={output:{libraryTarget:'commonjs2'},module:{loaders:devConfigs.module.loaders.slice(1) // remove babel-loader
}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _extractTextWebpackPlugin=require('extract-text-webpack-plugin');var _extractTextWebpackPlugin2=_interopRequireDefault(_extractTextWebpackPlugin);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./app/index',output:_extends({},_webpackConfig2.default.output,{publicPath:'../dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader')},{test:/^((?!\.global).)*\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]')}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.optimize.OccurenceOrderPlugin(),new _webpack2.default.DefinePlugin({__DEV__:false,'process.env':{NODE_ENV:JSON.stringify('production')}}),new _webpack2.default.optimize.UglifyJsPlugin({compressor:{screw_ie8:true,warnings:false}}),new _extractTextWebpackPlugin2.default('style.css',{allChunks:true})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default']; //# sourceMappingURL=main.development.debug.js.map
'use strict';var _electron=require('electron');var _ImageFile=require('./app/utils/ImageFile');var _ImageFile2=_interopRequireDefault(_ImageFile);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var menu=void 0;var commands=void 0;var template=void 0;var mainWindow=null;var canvasId=0;if(process.env.NODE_ENV==='development'){require('electron-debug')(); // eslint-disable-line global-require
}_electron.app.on('window-all-closed',function(){if(process.platform!=='darwin')_electron.app.quit();});function createMenuTemplate(commands){var fileMenus=[{label:'&File',submenu:[{label:'&Open',accelerator:commands.open,click:function click(){var filepaths=_electron.dialog.showOpenDialog({properties:['openFile']});if(filepaths){(function(){var id=++canvasId;var filepath=filepaths[0];var imageFile=new _ImageFile2.default(filepath);imageFile.on('load-init',function(){return mainWindow.webContents.send('load-image',{id:id,imageFile:imageFile});});imageFile.on('load-data',function(pixels){return mainWindow.webContents.send('load-data',{id:id,filepath:filepath,pixels:pixels});});imageFile.on('load-complete',function(){return mainWindow.webContents.send('load-complete',{id:id,filepath:filepath,compressionRatio:imageFile.compressionRatio});});imageFile.on('load-error',function(message){return _electron.dialog.showMessageBox({type:'error',title:'Failed to load image',buttons:['Close'],message:message});});imageFile.load();})();}else {console.error('Failed to load image!');}}},{label:'&Save As',accelerator:commands.save,click:function click(){var filepath=_electron.dialog.showSaveDialog({});if(filepath){mainWindow.webContents.send('save-image',filepath);}}}]}];if(process.platform!=='darwin'){fileMenus[0].submenu.push({label:'&Close',accelerator:'Ctrl+W',click:function click(){mainWindow.close();}});}return [].concat(fileMenus,[{label:'&View',submenu:process.env.NODE_ENV==='development'?[{label:'&Reload',accelerator:commands.reload,click:function click(){mainWindow.webContents.reload();}},{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}},{label:'Toggle &Developer Tools',accelerator:commands.devTools,click:function click(){mainWindow.toggleDevTools();}}]:[{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}}]},{label:'Help',role:'help',submenu:[{label:'Learn More',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery');}},{label:'Documentation',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/blob/master/README.md');}},{label:'Search Issues',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/issues');}}]}]);}_electron.app.on('ready',function(){mainWindow=new _electron.BrowserWindow({show:false,width:1024,height:728});mainWindow.loadURL('file://'+__dirname+'/app/app.html');mainWindow.webContents.on('did-finish-load',function(){mainWindow.show();mainWindow.focus();});mainWindow.on('closed',function(){mainWindow=null;});if(process.env.NODE_ENV==='development'){mainWindow.openDevTools();}if(process.platform==='darwin'){commands={open:'Command+O',save:'Command+Shift+S',hide:'Command+H',quit:'Command+Q',reload:'Command+R',fullscreen:'Ctrl+Command+F',devTools:'Alt+Command+I'};template=createMenuTemplate(commands);template=[{label:'Imagery',submenu:[{label:'About Imagery',selector:'orderFrontStandardAboutPanel:'},{type:'separator'},{label:'Services',submenu:[]},{type:'separator'},{label:'Hide Imagery',accelerator:commands.hide,selector:'hide:'},{label:'Hide Others',accelerator:'Command+Shift+H',selector:'hideOtherApplications:'},{label:'Show All',selector:'unhideAllApplications:'},{type:'separator'},{label:'Quit',accelerator:commands.quit,click:function click(){_electron.app.quit();}}]}].concat(_toConsumableArray(template));menu=_electron.Menu.buildFromTemplate(template);_electron.Menu.setApplicationMenu(menu);}else {commands={open:'Ctrl+O',save:'Ctrl+Shift+S',reload:'Ctrl+R',fullscreen:'F11',devTools:'Alt+Ctrl+I'};template=createMenuTemplate(commands);menu=_electron.Menu.buildFromTemplate(template);mainWindow.setMenu(menu);}}); /* eslint strict: 0, no-shadow: 0, no-unused-vars: 0, no-console: 0 */'use strict';require('babel-polyfill');var os=require('os');var webpack=require('webpack');var electronCfg=require('./webpack.config.electron.js');var cfg=require('./webpack.config.production.js');var packager=require('electron-packager');var del=require('del');var exec=require('child_process').exec;var argv=require('minimist')(process.argv.slice(2));var pkg=require('./package.json');var deps=Object.keys(pkg.dependencies);var devDeps=Object.keys(pkg.devDependencies);var appName=argv.name||argv.n||pkg.productName;var shouldUseAsar=argv.asar||argv.a||false;var shouldBuildAll=argv.all||false;var DEFAULT_OPTS={dir:'./',name:appName,asar:shouldUseAsar,ignore:['^/test($|/)','^/tools($|/)','^/release($|/)','^/main.development.js'].concat(devDeps.map(function(name){return '/node_modules/'+name+'($|/)';})).concat(deps.filter(function(name){return !electronCfg.externals.includes(name);}).map(function(name){return '/node_modules/'+name+'($|/)';}))};var icon=argv.icon||argv.i||'app/app';if(icon){DEFAULT_OPTS.icon=icon;}var version=argv.version||argv.v;if(version){DEFAULT_OPTS.version=version;startPack();}else { // use the same version as the currently-installed electron-prebuilt
exec('npm list electron-prebuilt --dev',function(err,stdout){if(err){DEFAULT_OPTS.version='1.2.0';}else {DEFAULT_OPTS.version=stdout.split('electron-prebuilt@')[1].replace(/\s/g,'');}startPack();});}function build(cfg){return new Promise(function(resolve,reject){webpack(cfg,function(err,stats){if(err)return reject(err);resolve(stats);});});}function startPack(){console.log('start pack...');build(electronCfg).then(function(){return build(cfg);}).then(function(){return del('release');}).then(function(paths){if(shouldBuildAll){(function(){ // build for all platforms
var archs=['ia32','x64'];var platforms=['linux','win32','darwin'];platforms.forEach(function(plat){archs.forEach(function(arch){pack(plat,arch,log(plat,arch));});});})();}else { // build for current platform only
pack(os.platform(),os.arch(),log(os.platform(),os.arch()));}}).catch(function(err){console.error(err);});}function pack(plat,arch,cb){ // there is no darwin ia32 electron
if(plat==='darwin'&&arch==='ia32')return;var iconObj={icon:DEFAULT_OPTS.icon+function(){var extension='.png';if(plat==='darwin'){extension='.icns';}else if(plat==='win32'){extension='.ico';}return extension;}()};var opts=Object.assign({},DEFAULT_OPTS,iconObj,{platform:plat,arch:arch,prune:true,'app-version':pkg.version||DEFAULT_OPTS.version,out:'release/'+plat+'-'+arch});packager(opts,cb);}function log(plat,arch){return function(err,filepath){if(err)return console.error(err);console.log(plat+'-'+arch+' finished!');};}'use strict';var _express=require('express');var _express2=_interopRequireDefault(_express);var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackDevMiddleware=require('webpack-dev-middleware');var _webpackDevMiddleware2=_interopRequireDefault(_webpackDevMiddleware);var _webpackHotMiddleware=require('webpack-hot-middleware');var _webpackHotMiddleware2=_interopRequireDefault(_webpackHotMiddleware);var _webpackConfig=require('./webpack.config.development');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var app=(0,_express2.default)(); /* eslint no-console: 0 */var compiler=(0,_webpack2.default)(_webpackConfig2.default);var PORT=3000;var wdm=(0,_webpackDevMiddleware2.default)(compiler,{publicPath:_webpackConfig2.default.output.publicPath,stats:{colors:true}});app.use(wdm);app.use((0,_webpackHotMiddleware2.default)(compiler));var server=app.listen(PORT,'localhost',function(err){if(err){console.error(err);return;}console.log('Listening at http://localhost:'+PORT);});process.on('SIGTERM',function(){console.log('Stopping dev server');wdm.close();server.close(function(){process.exit(0);});});'use strict';var _chai=require('chai');var _sinon=require('sinon');var _counter=require('../../app/actions/counter');var actions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}describe('actions',function(){it('increment should create increment action',function(){(0,_chai.expect)(actions.increment()).to.deep.equal({type:actions.INCREMENT_COUNTER});});it('decrement should create decrement action',function(){(0,_chai.expect)(actions.decrement()).to.deep.equal({type:actions.DECREMENT_COUNTER});});it('incrementIfOdd should create increment action',function(){var fn=actions.incrementIfOdd();(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:1};};fn(dispatch,getState);(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;});it('incrementIfOdd shouldnt create increment action if counter is even',function(){var fn=actions.incrementIfOdd();var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:2};};fn(dispatch,getState);(0,_chai.expect)(dispatch.called).to.be.false;}); // There's no nice way to test this at the moment...
it('incrementAsync',function(done){var fn=actions.incrementAsync(1);(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();fn(dispatch);setTimeout(function(){(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;done();},5);});}); /* eslint no-unused-expressions: 0 */'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint no-unused-expressions: 0 */var _chai=require('chai');var _sinon=require('sinon');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _Counter=require('../../app/components/Counter');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(){var actions={increment:(0,_sinon.spy)(),incrementIfOdd:(0,_sinon.spy)(),incrementAsync:(0,_sinon.spy)(),decrement:(0,_sinon.spy)()};var component=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_Counter2.default,_extends({counter:1},actions)));return {component:component,actions:actions,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(component,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(component,'counter')};}describe('Counter component',function(){it('should display count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('first button should call increment',function(){var _setup2=setup();var buttons=_setup2.buttons;var actions=_setup2.actions;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(actions.increment.called).to.be.true;});it('second button should call decrement',function(){var _setup3=setup();var buttons=_setup3.buttons;var actions=_setup3.actions;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(actions.decrement.called).to.be.true;});it('third button should call incrementIfOdd',function(){var _setup4=setup();var buttons=_setup4.buttons;var actions=_setup4.actions;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(actions.incrementIfOdd.called).to.be.true;});it('fourth button should call incrementAsync',function(){var _setup5=setup();var buttons=_setup5.buttons;var actions=_setup5.actions;_reactAddonsTestUtils.Simulate.click(buttons[3]);(0,_chai.expect)(actions.incrementAsync.called).to.be.true;});});'use strict';var _chai=require('chai');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _reactRedux=require('react-redux');var _CounterPage=require('../../app/containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);var _configureStore=require('../../app/store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(initialState){var store=(0,_configureStore2.default)(initialState);var app=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_CounterPage2.default,null)));return {app:app,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(app,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(app,'counter')};}describe('containers',function(){describe('App',function(){it('should display initial count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should display updated count after increment button click',function(){var _setup2=setup();var buttons=_setup2.buttons;var p=_setup2.p;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('should display updated count after descrement button click',function(){var _setup3=setup();var buttons=_setup3.buttons;var p=_setup3.p;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(p.textContent).to.match(/^-1$/);});it('shouldnt change if even and if odd button clicked',function(){var _setup4=setup();var buttons=_setup4.buttons;var p=_setup4.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should change if odd and if odd button clicked',function(){var _setup5=setup({counter:1});var buttons=_setup5.buttons;var p=_setup5.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^2$/);});});});'use strict';var _path=require('path');var _path2=_interopRequireDefault(_path);var _chromedriver=require('chromedriver');var _chromedriver2=_interopRequireDefault(_chromedriver);var _seleniumWebdriver=require('selenium-webdriver');var _seleniumWebdriver2=_interopRequireDefault(_seleniumWebdriver);var _chai=require('chai');var _electronPrebuilt=require('electron-prebuilt');var _electronPrebuilt2=_interopRequireDefault(_electronPrebuilt);var _Home=require('../app/components/Home.css');var _Home2=_interopRequireDefault(_Home);var _Counter=require('../app/components/Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else {return Promise.resolve(value).then(function(value){return step("next",value);},function(err){return step("throw",err);});}}return step("next");});};}_chromedriver2.default.start(); // on port 9515
process.on('exit',_chromedriver2.default.stop);var delay=function delay(time){return new Promise(function(resolve){return setTimeout(resolve,time);});};describe('main window',function spec(){var _this=this;this.timeout(5000);before(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delay(1000);case 2: // wait chromedriver start time
_this.driver=new _seleniumWebdriver2.default.Builder().usingServer('http://localhost:9515').withCapabilities({chromeOptions:{binary:_electronPrebuilt2.default,args:['app='+_path2.default.resolve()]}}).forBrowser('electron').build();case 3:case 'end':return _context.stop();}}},_callee,_this);})));after(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.driver.quit();case 2:case 'end':return _context2.stop();}}},_callee2,_this);})));var findCounter=function findCounter(){return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Counter2.default.counter));};var findButtons=function findButtons(){return _this.driver.findElements(_seleniumWebdriver2.default.By.className(_Counter2.default.btn));};it('should open window',_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var title;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.driver.getTitle();case 2:title=_context3.sent;(0,_chai.expect)(title).to.equal('Hello Electron React!');case 4:case 'end':return _context3.stop();}}},_callee3,_this);})));it('should to Counter with click "to Counter" link',_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var link,counter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Home2.default.container+' > a'));case 2:link=_context4.sent;link.click();_context4.next=6;return findCounter();case 6:counter=_context4.sent;_context4.next=9;return counter.getText();case 9:_context4.t0=_context4.sent;(0,_chai.expect)(_context4.t0).to.equal('0');case 11:case 'end':return _context4.stop();}}},_callee4,_this);})));it('should display updated count after increment button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var buttons,counter;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return findButtons();case 2:buttons=_context5.sent;buttons[0].click();_context5.next=6;return findCounter();case 6:counter=_context5.sent;_context5.next=9;return counter.getText();case 9:_context5.t0=_context5.sent;(0,_chai.expect)(_context5.t0).to.equal('1');case 11:case 'end':return _context5.stop();}}},_callee5,_this);})));it('should display updated count after descrement button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var buttons,counter;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return findButtons();case 2:buttons=_context6.sent;_context6.next=5;return findCounter();case 5:counter=_context6.sent;buttons[1].click(); // -
_context6.next=9;return counter.getText();case 9:_context6.t0=_context6.sent;(0,_chai.expect)(_context6.t0).to.equal('0');case 11:case 'end':return _context6.stop();}}},_callee6,_this);})));it('shouldnt change if even and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var buttons,counter;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return findButtons();case 2:buttons=_context7.sent;_context7.next=5;return findCounter();case 5:counter=_context7.sent;buttons[2].click(); // odd
_context7.next=9;return counter.getText();case 9:_context7.t0=_context7.sent;(0,_chai.expect)(_context7.t0).to.equal('0');case 11:case 'end':return _context7.stop();}}},_callee7,_this);})));it('should change if odd and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var buttons,counter;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return findButtons();case 2:buttons=_context8.sent;_context8.next=5;return findCounter();case 5:counter=_context8.sent;buttons[0].click(); // +
buttons[2].click(); // odd
_context8.next=10;return counter.getText();case 10:_context8.t0=_context8.sent;(0,_chai.expect)(_context8.t0).to.equal('2');case 12:case 'end':return _context8.stop();}}},_callee8,_this);})));it('should change if async button clicked and a second later',_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var buttons,counter;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return findButtons();case 2:buttons=_context9.sent;_context9.next=5;return findCounter();case 5:counter=_context9.sent;buttons[3].click(); // async
_context9.next=9;return counter.getText();case 9:_context9.t0=_context9.sent;(0,_chai.expect)(_context9.t0).to.equal('2');_context9.next=13;return _this.driver.wait(function(){return counter.getText().then(function(text){return text==='3';});},1000,'count not as expected');case 13:case 'end':return _context9.stop();}}},_callee9,_this);})));it('should back to home if back button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var link;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Counter2.default.backButton+' > a'));case 2:link=_context10.sent;link.click();_context10.next=6;return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Home2.default.container));case 6:case 'end':return _context10.stop();}}},_callee10,_this);})));});'use strict';var _chai=require('chai');describe('description',function(){it('description',function(){(0,_chai.expect)(1+2).to.equal(3);});}); /* eslint func-names: 0 */'use strict';var _chai=require('chai');var _counter=require('../../app/reducers/counter');var _counter2=_interopRequireDefault(_counter);var _counter3=require('../../app/actions/counter');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}describe('reducers',function(){describe('counter',function(){it('should handle initial state',function(){(0,_chai.expect)((0,_counter2.default)(undefined,{})).to.equal(0);});it('should handle INCREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.INCREMENT_COUNTER})).to.equal(2);});it('should handle DECREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.DECREMENT_COUNTER})).to.equal(0);});it('should handle unknown action type',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:'unknown'})).to.equal(1);});});});'use strict';require('babel-polyfill');var _jsdom=require('jsdom');global.document=(0,_jsdom.jsdom)('<!doctype html><html><body></body></html>');global.window=document.defaultView;global.navigator=global.window.navigator;window.localStorage=window.sessionStorage={getItem:function getItem(key){return this[key];},setItem:function setItem(key,value){this[key]=value;},removeItem:function removeItem(key){this[key]=undefined;}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _path=require('path');var _path2=_interopRequireDefault(_path);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default={module:{loaders:[{test:/\.jsx?$/,loaders:['babel-loader'],exclude:/node_modules/},{test:/\.json$/,loader:'json-loader'}]},output:{path:_path2.default.join(__dirname,'dist'),filename:'bundle.js',libraryTarget:'commonjs2'},resolve:{extensions:['','.js','.jsx'],packageMains:['webpack','browser','web','browserify',['jam','main'],'main']},plugins:[],externals:[ // put your node 3rd party libraries which can't be built with webpack here
// (mysql, mongodb, and so on..)
]};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint max-len: 0 */var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{debug:true,devtool:'cheap-module-eval-source-map',entry:['webpack-hot-middleware/client?path=http://localhost:3000/__webpack_hmr','./app/index'],output:_extends({},_webpackConfig2.default.output,{publicPath:'http://localhost:3000/dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loaders:['style-loader','css-loader?sourceMap']},{test:/^((?!\.global).)*\.css$/,loaders:['style-loader','css-loader?modules&sourceMap&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]']}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.HotModuleReplacementPlugin(),new _webpack2.default.NoErrorsPlugin(),new _webpack2.default.DefinePlugin({__DEV__:true,'process.env':{NODE_ENV:JSON.stringify('development')}})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}exports.default=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./main.development',output:_extends({},_webpackConfig2.default.output,{path:__dirname,filename:'./main.js'}),plugins:[new _webpack2.default.optimize.UglifyJsPlugin({compressor:{warnings:false}}),new _webpack2.default.BannerPlugin('require("source-map-support").install();',{raw:true,entryOnly:false}),new _webpack2.default.DefinePlugin({'process.env':{NODE_ENV:JSON.stringify('production')}})],target:'electron-main',node:{__dirname:false,__filename:false},externals:[].concat(_toConsumableArray(_webpackConfig2.default.externals),['font-awesome','source-map-support'])});module.exports=exports['default'];'use strict'; // for babel-plugin-webpack-loaders
require('babel-register');var devConfigs=require('./webpack.config.development');module.exports={output:{libraryTarget:'commonjs2'},module:{loaders:devConfigs.module.loaders.slice(1) // remove babel-loader
}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _extractTextWebpackPlugin=require('extract-text-webpack-plugin');var _extractTextWebpackPlugin2=_interopRequireDefault(_extractTextWebpackPlugin);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./app/index',output:_extends({},_webpackConfig2.default.output,{publicPath:'../dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader')},{test:/^((?!\.global).)*\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]')}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.optimize.OccurenceOrderPlugin(),new _webpack2.default.DefinePlugin({__DEV__:false,'process.env':{NODE_ENV:JSON.stringify('production')}}),new _webpack2.default.optimize.UglifyJsPlugin({compressor:{screw_ie8:true,warnings:false}}),new _extractTextWebpackPlugin2.default('style.css',{allChunks:true})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default']; //# sourceMappingURL=main.development.debug.js.map
'use strict';var _electron=require('electron');var _ImageFile=require('./app/utils/ImageFile');var _ImageFile2=_interopRequireDefault(_ImageFile);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var menu=void 0;var commands=void 0;var template=void 0;var mainWindow=null;var canvasId=0;if(process.env.NODE_ENV==='development'){require('electron-debug')(); // eslint-disable-line global-require
}_electron.app.on('window-all-closed',function(){if(process.platform!=='darwin')_electron.app.quit();});function createMenuTemplate(commands){var fileMenus=[{label:'&File',submenu:[{label:'&Open',accelerator:commands.open,click:function click(){var filepaths=_electron.dialog.showOpenDialog({properties:['openFile']});if(filepaths){(function(){var id=++canvasId;var filepath=filepaths[0];var imageFile=new _ImageFile2.default(filepath);imageFile.on('load-init',function(){return mainWindow.webContents.send('load-image',{id:id,imageFile:imageFile});});imageFile.on('load-data',function(pixels){return mainWindow.webContents.send('load-data',{id:id,filepath:filepath,pixels:pixels});});imageFile.on('load-complete',function(){return mainWindow.webContents.send('load-complete',{id:id,filepath:filepath,compressionRatio:imageFile.compressionRatio});});imageFile.on('load-error',function(message){return _electron.dialog.showMessageBox({type:'error',title:'Failed to load image',buttons:['Close'],message:message});});imageFile.load();})();}else {console.error('Failed to load image!');}}},{label:'&Save As',accelerator:commands.save,click:function click(){var filepath=_electron.dialog.showSaveDialog({});if(filepath){mainWindow.webContents.send('save-image',filepath);}}}]}];if(process.platform!=='darwin'){fileMenus[0].submenu.push({label:'&Close',accelerator:'Ctrl+W',click:function click(){mainWindow.close();}});}return [].concat(fileMenus,[{label:'&View',submenu:process.env.NODE_ENV==='development'?[{label:'&Reload',accelerator:commands.reload,click:function click(){mainWindow.webContents.reload();}},{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}},{label:'Toggle &Developer Tools',accelerator:commands.devTools,click:function click(){mainWindow.toggleDevTools();}}]:[{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}}]},{label:'Help',role:'help',submenu:[{label:'Learn More',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery');}},{label:'Documentation',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/blob/master/README.md');}},{label:'Search Issues',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/issues');}}]}]);}_electron.app.on('ready',function(){mainWindow=new _electron.BrowserWindow({show:false,width:1024,height:728});mainWindow.loadURL('file://'+__dirname+'/app/app.html');mainWindow.webContents.on('did-finish-load',function(){mainWindow.show();mainWindow.focus();});mainWindow.on('closed',function(){mainWindow=null;});if(process.env.NODE_ENV==='development'){mainWindow.openDevTools();}if(process.platform==='darwin'){commands={open:'Command+O',save:'Command+Shift+S',hide:'Command+H',quit:'Command+Q',reload:'Command+R',fullscreen:'Ctrl+Command+F',devTools:'Alt+Command+I'};template=createMenuTemplate(commands);template=[{label:'Imagery',submenu:[{label:'About Imagery',selector:'orderFrontStandardAboutPanel:'},{type:'separator'},{label:'Services',submenu:[]},{type:'separator'},{label:'Hide Imagery',accelerator:commands.hide,selector:'hide:'},{label:'Hide Others',accelerator:'Command+Shift+H',selector:'hideOtherApplications:'},{label:'Show All',selector:'unhideAllApplications:'},{type:'separator'},{label:'Quit',accelerator:commands.quit,click:function click(){_electron.app.quit();}}]}].concat(_toConsumableArray(template));menu=_electron.Menu.buildFromTemplate(template);_electron.Menu.setApplicationMenu(menu);}else {commands={open:'Ctrl+O',save:'Ctrl+Shift+S',reload:'Ctrl+R',fullscreen:'F11',devTools:'Alt+Ctrl+I'};template=createMenuTemplate(commands);menu=_electron.Menu.buildFromTemplate(template);mainWindow.setMenu(menu);}}); /* eslint strict: 0, no-shadow: 0, no-unused-vars: 0, no-console: 0 */'use strict';require('babel-polyfill');var os=require('os');var webpack=require('webpack');var electronCfg=require('./webpack.config.electron.js');var cfg=require('./webpack.config.production.js');var packager=require('electron-packager');var del=require('del');var exec=require('child_process').exec;var argv=require('minimist')(process.argv.slice(2));var pkg=require('./package.json');var deps=Object.keys(pkg.dependencies);var devDeps=Object.keys(pkg.devDependencies);var appName=argv.name||argv.n||pkg.productName;var shouldUseAsar=argv.asar||argv.a||false;var shouldBuildAll=argv.all||false;var DEFAULT_OPTS={dir:'./',name:appName,asar:shouldUseAsar,ignore:['^/test($|/)','^/tools($|/)','^/release($|/)','^/main.development.js'].concat(devDeps.map(function(name){return '/node_modules/'+name+'($|/)';})).concat(deps.filter(function(name){return !electronCfg.externals.includes(name);}).map(function(name){return '/node_modules/'+name+'($|/)';}))};var icon=argv.icon||argv.i||'app/app';if(icon){DEFAULT_OPTS.icon=icon;}var version=argv.version||argv.v;if(version){DEFAULT_OPTS.version=version;startPack();}else { // use the same version as the currently-installed electron-prebuilt
exec('npm list electron-prebuilt --dev',function(err,stdout){if(err){DEFAULT_OPTS.version='1.2.0';}else {DEFAULT_OPTS.version=stdout.split('electron-prebuilt@')[1].replace(/\s/g,'');}startPack();});}function build(cfg){return new Promise(function(resolve,reject){webpack(cfg,function(err,stats){if(err)return reject(err);resolve(stats);});});}function startPack(){console.log('start pack...');build(electronCfg).then(function(){return build(cfg);}).then(function(){return del('release');}).then(function(paths){if(shouldBuildAll){(function(){ // build for all platforms
var archs=['ia32','x64'];var platforms=['linux','win32','darwin'];platforms.forEach(function(plat){archs.forEach(function(arch){pack(plat,arch,log(plat,arch));});});})();}else { // build for current platform only
pack(os.platform(),os.arch(),log(os.platform(),os.arch()));}}).catch(function(err){console.error(err);});}function pack(plat,arch,cb){ // there is no darwin ia32 electron
if(plat==='darwin'&&arch==='ia32')return;var iconObj={icon:DEFAULT_OPTS.icon+function(){var extension='.png';if(plat==='darwin'){extension='.icns';}else if(plat==='win32'){extension='.ico';}return extension;}()};var opts=Object.assign({},DEFAULT_OPTS,iconObj,{platform:plat,arch:arch,prune:true,'app-version':pkg.version||DEFAULT_OPTS.version,out:'release/'+plat+'-'+arch});packager(opts,cb);}function log(plat,arch){return function(err,filepath){if(err)return console.error(err);console.log(plat+'-'+arch+' finished!');};}'use strict';var _express=require('express');var _express2=_interopRequireDefault(_express);var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackDevMiddleware=require('webpack-dev-middleware');var _webpackDevMiddleware2=_interopRequireDefault(_webpackDevMiddleware);var _webpackHotMiddleware=require('webpack-hot-middleware');var _webpackHotMiddleware2=_interopRequireDefault(_webpackHotMiddleware);var _webpackConfig=require('./webpack.config.development');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var app=(0,_express2.default)(); /* eslint no-console: 0 */var compiler=(0,_webpack2.default)(_webpackConfig2.default);var PORT=3000;var wdm=(0,_webpackDevMiddleware2.default)(compiler,{publicPath:_webpackConfig2.default.output.publicPath,stats:{colors:true}});app.use(wdm);app.use((0,_webpackHotMiddleware2.default)(compiler));var server=app.listen(PORT,'localhost',function(err){if(err){console.error(err);return;}console.log('Listening at http://localhost:'+PORT);});process.on('SIGTERM',function(){console.log('Stopping dev server');wdm.close();server.close(function(){process.exit(0);});});'use strict';var _chai=require('chai');var _sinon=require('sinon');var _counter=require('../../app/actions/counter');var actions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}describe('actions',function(){it('increment should create increment action',function(){(0,_chai.expect)(actions.increment()).to.deep.equal({type:actions.INCREMENT_COUNTER});});it('decrement should create decrement action',function(){(0,_chai.expect)(actions.decrement()).to.deep.equal({type:actions.DECREMENT_COUNTER});});it('incrementIfOdd should create increment action',function(){var fn=actions.incrementIfOdd();(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:1};};fn(dispatch,getState);(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;});it('incrementIfOdd shouldnt create increment action if counter is even',function(){var fn=actions.incrementIfOdd();var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:2};};fn(dispatch,getState);(0,_chai.expect)(dispatch.called).to.be.false;}); // There's no nice way to test this at the moment...
it('incrementAsync',function(done){var fn=actions.incrementAsync(1);(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();fn(dispatch);setTimeout(function(){(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;done();},5);});}); /* eslint no-unused-expressions: 0 */'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint no-unused-expressions: 0 */var _chai=require('chai');var _sinon=require('sinon');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _Counter=require('../../app/components/Counter');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(){var actions={increment:(0,_sinon.spy)(),incrementIfOdd:(0,_sinon.spy)(),incrementAsync:(0,_sinon.spy)(),decrement:(0,_sinon.spy)()};var component=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_Counter2.default,_extends({counter:1},actions)));return {component:component,actions:actions,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(component,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(component,'counter')};}describe('Counter component',function(){it('should display count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('first button should call increment',function(){var _setup2=setup();var buttons=_setup2.buttons;var actions=_setup2.actions;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(actions.increment.called).to.be.true;});it('second button should call decrement',function(){var _setup3=setup();var buttons=_setup3.buttons;var actions=_setup3.actions;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(actions.decrement.called).to.be.true;});it('third button should call incrementIfOdd',function(){var _setup4=setup();var buttons=_setup4.buttons;var actions=_setup4.actions;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(actions.incrementIfOdd.called).to.be.true;});it('fourth button should call incrementAsync',function(){var _setup5=setup();var buttons=_setup5.buttons;var actions=_setup5.actions;_reactAddonsTestUtils.Simulate.click(buttons[3]);(0,_chai.expect)(actions.incrementAsync.called).to.be.true;});});'use strict';var _chai=require('chai');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _reactRedux=require('react-redux');var _CounterPage=require('../../app/containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);var _configureStore=require('../../app/store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(initialState){var store=(0,_configureStore2.default)(initialState);var app=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_CounterPage2.default,null)));return {app:app,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(app,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(app,'counter')};}describe('containers',function(){describe('App',function(){it('should display initial count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should display updated count after increment button click',function(){var _setup2=setup();var buttons=_setup2.buttons;var p=_setup2.p;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('should display updated count after descrement button click',function(){var _setup3=setup();var buttons=_setup3.buttons;var p=_setup3.p;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(p.textContent).to.match(/^-1$/);});it('shouldnt change if even and if odd button clicked',function(){var _setup4=setup();var buttons=_setup4.buttons;var p=_setup4.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should change if odd and if odd button clicked',function(){var _setup5=setup({counter:1});var buttons=_setup5.buttons;var p=_setup5.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^2$/);});});});'use strict';var _path=require('path');var _path2=_interopRequireDefault(_path);var _chromedriver=require('chromedriver');var _chromedriver2=_interopRequireDefault(_chromedriver);var _seleniumWebdriver=require('selenium-webdriver');var _seleniumWebdriver2=_interopRequireDefault(_seleniumWebdriver);var _chai=require('chai');var _electronPrebuilt=require('electron-prebuilt');var _electronPrebuilt2=_interopRequireDefault(_electronPrebuilt);var _Home=require('../app/components/Home.css');var _Home2=_interopRequireDefault(_Home);var _Counter=require('../app/components/Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else {return Promise.resolve(value).then(function(value){return step("next",value);},function(err){return step("throw",err);});}}return step("next");});};}_chromedriver2.default.start(); // on port 9515
process.on('exit',_chromedriver2.default.stop);var delay=function delay(time){return new Promise(function(resolve){return setTimeout(resolve,time);});};describe('main window',function spec(){var _this=this;this.timeout(5000);before(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delay(1000);case 2: // wait chromedriver start time
_this.driver=new _seleniumWebdriver2.default.Builder().usingServer('http://localhost:9515').withCapabilities({chromeOptions:{binary:_electronPrebuilt2.default,args:['app='+_path2.default.resolve()]}}).forBrowser('electron').build();case 3:case 'end':return _context.stop();}}},_callee,_this);})));after(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.driver.quit();case 2:case 'end':return _context2.stop();}}},_callee2,_this);})));var findCounter=function findCounter(){return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Counter2.default.counter));};var findButtons=function findButtons(){return _this.driver.findElements(_seleniumWebdriver2.default.By.className(_Counter2.default.btn));};it('should open window',_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var title;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.driver.getTitle();case 2:title=_context3.sent;(0,_chai.expect)(title).to.equal('Hello Electron React!');case 4:case 'end':return _context3.stop();}}},_callee3,_this);})));it('should to Counter with click "to Counter" link',_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var link,counter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Home2.default.container+' > a'));case 2:link=_context4.sent;link.click();_context4.next=6;return findCounter();case 6:counter=_context4.sent;_context4.next=9;return counter.getText();case 9:_context4.t0=_context4.sent;(0,_chai.expect)(_context4.t0).to.equal('0');case 11:case 'end':return _context4.stop();}}},_callee4,_this);})));it('should display updated count after increment button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var buttons,counter;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return findButtons();case 2:buttons=_context5.sent;buttons[0].click();_context5.next=6;return findCounter();case 6:counter=_context5.sent;_context5.next=9;return counter.getText();case 9:_context5.t0=_context5.sent;(0,_chai.expect)(_context5.t0).to.equal('1');case 11:case 'end':return _context5.stop();}}},_callee5,_this);})));it('should display updated count after descrement button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var buttons,counter;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return findButtons();case 2:buttons=_context6.sent;_context6.next=5;return findCounter();case 5:counter=_context6.sent;buttons[1].click(); // -
_context6.next=9;return counter.getText();case 9:_context6.t0=_context6.sent;(0,_chai.expect)(_context6.t0).to.equal('0');case 11:case 'end':return _context6.stop();}}},_callee6,_this);})));it('shouldnt change if even and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var buttons,counter;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return findButtons();case 2:buttons=_context7.sent;_context7.next=5;return findCounter();case 5:counter=_context7.sent;buttons[2].click(); // odd
_context7.next=9;return counter.getText();case 9:_context7.t0=_context7.sent;(0,_chai.expect)(_context7.t0).to.equal('0');case 11:case 'end':return _context7.stop();}}},_callee7,_this);})));it('should change if odd and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var buttons,counter;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return findButtons();case 2:buttons=_context8.sent;_context8.next=5;return findCounter();case 5:counter=_context8.sent;buttons[0].click(); // +
buttons[2].click(); // odd
_context8.next=10;return counter.getText();case 10:_context8.t0=_context8.sent;(0,_chai.expect)(_context8.t0).to.equal('2');case 12:case 'end':return _context8.stop();}}},_callee8,_this);})));it('should change if async button clicked and a second later',_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var buttons,counter;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return findButtons();case 2:buttons=_context9.sent;_context9.next=5;return findCounter();case 5:counter=_context9.sent;buttons[3].click(); // async
_context9.next=9;return counter.getText();case 9:_context9.t0=_context9.sent;(0,_chai.expect)(_context9.t0).to.equal('2');_context9.next=13;return _this.driver.wait(function(){return counter.getText().then(function(text){return text==='3';});},1000,'count not as expected');case 13:case 'end':return _context9.stop();}}},_callee9,_this);})));it('should back to home if back button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var link;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Counter2.default.backButton+' > a'));case 2:link=_context10.sent;link.click();_context10.next=6;return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Home2.default.container));case 6:case 'end':return _context10.stop();}}},_callee10,_this);})));});'use strict';var _chai=require('chai');describe('description',function(){it('description',function(){(0,_chai.expect)(1+2).to.equal(3);});}); /* eslint func-names: 0 */'use strict';var _chai=require('chai');var _counter=require('../../app/reducers/counter');var _counter2=_interopRequireDefault(_counter);var _counter3=require('../../app/actions/counter');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}describe('reducers',function(){describe('counter',function(){it('should handle initial state',function(){(0,_chai.expect)((0,_counter2.default)(undefined,{})).to.equal(0);});it('should handle INCREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.INCREMENT_COUNTER})).to.equal(2);});it('should handle DECREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.DECREMENT_COUNTER})).to.equal(0);});it('should handle unknown action type',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:'unknown'})).to.equal(1);});});});'use strict';require('babel-polyfill');var _jsdom=require('jsdom');global.document=(0,_jsdom.jsdom)('<!doctype html><html><body></body></html>');global.window=document.defaultView;global.navigator=global.window.navigator;window.localStorage=window.sessionStorage={getItem:function getItem(key){return this[key];},setItem:function setItem(key,value){this[key]=value;},removeItem:function removeItem(key){this[key]=undefined;}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _path=require('path');var _path2=_interopRequireDefault(_path);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default={module:{loaders:[{test:/\.jsx?$/,loaders:['babel-loader'],exclude:/node_modules/},{test:/\.json$/,loader:'json-loader'}]},output:{path:_path2.default.join(__dirname,'dist'),filename:'bundle.js',libraryTarget:'commonjs2'},resolve:{extensions:['','.js','.jsx'],packageMains:['webpack','browser','web','browserify',['jam','main'],'main']},plugins:[],externals:[ // put your node 3rd party libraries which can't be built with webpack here
// (mysql, mongodb, and so on..)
]};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint max-len: 0 */var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{debug:true,devtool:'cheap-module-eval-source-map',entry:['webpack-hot-middleware/client?path=http://localhost:3000/__webpack_hmr','./app/index'],output:_extends({},_webpackConfig2.default.output,{publicPath:'http://localhost:3000/dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loaders:['style-loader','css-loader?sourceMap']},{test:/^((?!\.global).)*\.css$/,loaders:['style-loader','css-loader?modules&sourceMap&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]']}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.HotModuleReplacementPlugin(),new _webpack2.default.NoErrorsPlugin(),new _webpack2.default.DefinePlugin({__DEV__:true,'process.env':{NODE_ENV:JSON.stringify('development')}})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}exports.default=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./main.development',output:_extends({},_webpackConfig2.default.output,{path:__dirname,filename:'./main.js'}),plugins:[new _webpack2.default.optimize.UglifyJsPlugin({compressor:{warnings:false}}),new _webpack2.default.BannerPlugin('require("source-map-support").install();',{raw:true,entryOnly:false}),new _webpack2.default.DefinePlugin({'process.env':{NODE_ENV:JSON.stringify('production')}})],target:'electron-main',node:{__dirname:false,__filename:false},externals:[].concat(_toConsumableArray(_webpackConfig2.default.externals),['font-awesome','source-map-support'])});module.exports=exports['default'];'use strict'; // for babel-plugin-webpack-loaders
require('babel-register');var devConfigs=require('./webpack.config.development');module.exports={output:{libraryTarget:'commonjs2'},module:{loaders:devConfigs.module.loaders.slice(1) // remove babel-loader
}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _extractTextWebpackPlugin=require('extract-text-webpack-plugin');var _extractTextWebpackPlugin2=_interopRequireDefault(_extractTextWebpackPlugin);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./app/index',output:_extends({},_webpackConfig2.default.output,{publicPath:'../dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader')},{test:/^((?!\.global).)*\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]')}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.optimize.OccurenceOrderPlugin(),new _webpack2.default.DefinePlugin({__DEV__:false,'process.env':{NODE_ENV:JSON.stringify('production')}}),new _webpack2.default.optimize.UglifyJsPlugin({compressor:{screw_ie8:true,warnings:false}}),new _extractTextWebpackPlugin2.default('style.css',{allChunks:true})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default']; //# sourceMappingURL=main.development.debug.js.map
'use strict';var _electron=require('electron');var _ImageFile=require('./app/utils/ImageFile');var _ImageFile2=_interopRequireDefault(_ImageFile);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var menu=void 0;var commands=void 0;var template=void 0;var mainWindow=null;var canvasId=0;if(process.env.NODE_ENV==='development'){require('electron-debug')(); // eslint-disable-line global-require
}_electron.app.on('window-all-closed',function(){if(process.platform!=='darwin')_electron.app.quit();});function createMenuTemplate(commands){var fileMenus=[{label:'&File',submenu:[{label:'&Open',accelerator:commands.open,click:function click(){var filepaths=_electron.dialog.showOpenDialog({properties:['openFile']});if(filepaths){(function(){var id=++canvasId;var filepath=filepaths[0];var imageFile=new _ImageFile2.default(filepath);imageFile.on('load-init',function(){return mainWindow.webContents.send('load-image',{id:id,imageFile:imageFile});});imageFile.on('load-data',function(pixels){return mainWindow.webContents.send('load-data',{id:id,filepath:filepath,pixels:pixels});});imageFile.on('load-complete',function(){return mainWindow.webContents.send('load-complete',{id:id,filepath:filepath,compressionRatio:imageFile.compressionRatio});});imageFile.on('load-error',function(message){return _electron.dialog.showMessageBox({type:'error',title:'Failed to load image',buttons:['Close'],message:message});});imageFile.load();})();}else {console.error('Failed to load image!');}}},{label:'&Save As',accelerator:commands.save,click:function click(){var filepath=_electron.dialog.showSaveDialog({});if(filepath){mainWindow.webContents.send('save-image',filepath);}}}]}];if(process.platform!=='darwin'){fileMenus[0].submenu.push({label:'&Close',accelerator:'Ctrl+W',click:function click(){mainWindow.close();}});}return [].concat(fileMenus,[{label:'&View',submenu:process.env.NODE_ENV==='development'?[{label:'&Reload',accelerator:commands.reload,click:function click(){mainWindow.webContents.reload();}},{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}},{label:'Toggle &Developer Tools',accelerator:commands.devTools,click:function click(){mainWindow.toggleDevTools();}}]:[{label:'Toggle &Full Screen',accelerator:commands.fullscreen,click:function click(){mainWindow.setFullScreen(!mainWindow.isFullScreen());}}]},{label:'Help',role:'help',submenu:[{label:'Learn More',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery');}},{label:'Documentation',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/blob/master/README.md');}},{label:'Search Issues',click:function click(){_electron.shell.openExternal('https://github.com/psychobolt/imagery/issues');}}]}]);}_electron.app.on('ready',function(){mainWindow=new _electron.BrowserWindow({show:false,width:1024,height:728});mainWindow.loadURL('file://'+__dirname+'/app/app.html');mainWindow.webContents.on('did-finish-load',function(){mainWindow.show();mainWindow.focus();});mainWindow.on('closed',function(){mainWindow=null;});if(process.env.NODE_ENV==='development'){mainWindow.openDevTools();}if(process.platform==='darwin'){commands={open:'Command+O',save:'Command+Shift+S',hide:'Command+H',quit:'Command+Q',reload:'Command+R',fullscreen:'Ctrl+Command+F',devTools:'Alt+Command+I'};template=createMenuTemplate(commands);template=[{label:'Imagery',submenu:[{label:'About Imagery',selector:'orderFrontStandardAboutPanel:'},{type:'separator'},{label:'Services',submenu:[]},{type:'separator'},{label:'Hide Imagery',accelerator:commands.hide,selector:'hide:'},{label:'Hide Others',accelerator:'Command+Shift+H',selector:'hideOtherApplications:'},{label:'Show All',selector:'unhideAllApplications:'},{type:'separator'},{label:'Quit',accelerator:commands.quit,click:function click(){_electron.app.quit();}}]}].concat(_toConsumableArray(template));menu=_electron.Menu.buildFromTemplate(template);_electron.Menu.setApplicationMenu(menu);}else {commands={open:'Ctrl+O',save:'Ctrl+Shift+S',reload:'Ctrl+R',fullscreen:'F11',devTools:'Alt+Ctrl+I'};template=createMenuTemplate(commands);menu=_electron.Menu.buildFromTemplate(template);mainWindow.setMenu(menu);}}); /* eslint strict: 0, no-shadow: 0, no-unused-vars: 0, no-console: 0 */'use strict';require('babel-polyfill');var os=require('os');var webpack=require('webpack');var electronCfg=require('./webpack.config.electron.js');var cfg=require('./webpack.config.production.js');var packager=require('electron-packager');var del=require('del');var exec=require('child_process').exec;var argv=require('minimist')(process.argv.slice(2));var pkg=require('./package.json');var deps=Object.keys(pkg.dependencies);var devDeps=Object.keys(pkg.devDependencies);var appName=argv.name||argv.n||pkg.productName;var shouldUseAsar=argv.asar||argv.a||false;var shouldBuildAll=argv.all||false;var DEFAULT_OPTS={dir:'./',name:appName,asar:shouldUseAsar,ignore:['^/test($|/)','^/tools($|/)','^/release($|/)','^/main.development.js'].concat(devDeps.map(function(name){return '/node_modules/'+name+'($|/)';})).concat(deps.filter(function(name){return !electronCfg.externals.includes(name);}).map(function(name){return '/node_modules/'+name+'($|/)';}))};var icon=argv.icon||argv.i||'app/app';if(icon){DEFAULT_OPTS.icon=icon;}var version=argv.version||argv.v;if(version){DEFAULT_OPTS.version=version;startPack();}else { // use the same version as the currently-installed electron-prebuilt
exec('npm list electron-prebuilt --dev',function(err,stdout){if(err){DEFAULT_OPTS.version='1.2.0';}else {DEFAULT_OPTS.version=stdout.split('electron-prebuilt@')[1].replace(/\s/g,'');}startPack();});}function build(cfg){return new Promise(function(resolve,reject){webpack(cfg,function(err,stats){if(err)return reject(err);resolve(stats);});});}function startPack(){console.log('start pack...');build(electronCfg).then(function(){return build(cfg);}).then(function(){return del('release');}).then(function(paths){if(shouldBuildAll){(function(){ // build for all platforms
var archs=['ia32','x64'];var platforms=['linux','win32','darwin'];platforms.forEach(function(plat){archs.forEach(function(arch){pack(plat,arch,log(plat,arch));});});})();}else { // build for current platform only
pack(os.platform(),os.arch(),log(os.platform(),os.arch()));}}).catch(function(err){console.error(err);});}function pack(plat,arch,cb){ // there is no darwin ia32 electron
if(plat==='darwin'&&arch==='ia32')return;var iconObj={icon:DEFAULT_OPTS.icon+function(){var extension='.png';if(plat==='darwin'){extension='.icns';}else if(plat==='win32'){extension='.ico';}return extension;}()};var opts=Object.assign({},DEFAULT_OPTS,iconObj,{platform:plat,arch:arch,prune:true,'app-version':pkg.version||DEFAULT_OPTS.version,out:'release/'+plat+'-'+arch});packager(opts,cb);}function log(plat,arch){return function(err,filepath){if(err)return console.error(err);console.log(plat+'-'+arch+' finished!');};}'use strict';var _express=require('express');var _express2=_interopRequireDefault(_express);var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackDevMiddleware=require('webpack-dev-middleware');var _webpackDevMiddleware2=_interopRequireDefault(_webpackDevMiddleware);var _webpackHotMiddleware=require('webpack-hot-middleware');var _webpackHotMiddleware2=_interopRequireDefault(_webpackHotMiddleware);var _webpackConfig=require('./webpack.config.development');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var app=(0,_express2.default)(); /* eslint no-console: 0 */var compiler=(0,_webpack2.default)(_webpackConfig2.default);var PORT=3000;var wdm=(0,_webpackDevMiddleware2.default)(compiler,{publicPath:_webpackConfig2.default.output.publicPath,stats:{colors:true}});app.use(wdm);app.use((0,_webpackHotMiddleware2.default)(compiler));var server=app.listen(PORT,'localhost',function(err){if(err){console.error(err);return;}console.log('Listening at http://localhost:'+PORT);});process.on('SIGTERM',function(){console.log('Stopping dev server');wdm.close();server.close(function(){process.exit(0);});});'use strict';var _chai=require('chai');var _sinon=require('sinon');var _counter=require('../../app/actions/counter');var actions=_interopRequireWildcard(_counter);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else {var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}describe('actions',function(){it('increment should create increment action',function(){(0,_chai.expect)(actions.increment()).to.deep.equal({type:actions.INCREMENT_COUNTER});});it('decrement should create decrement action',function(){(0,_chai.expect)(actions.decrement()).to.deep.equal({type:actions.DECREMENT_COUNTER});});it('incrementIfOdd should create increment action',function(){var fn=actions.incrementIfOdd();(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:1};};fn(dispatch,getState);(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;});it('incrementIfOdd shouldnt create increment action if counter is even',function(){var fn=actions.incrementIfOdd();var dispatch=(0,_sinon.spy)();var getState=function getState(){return {counter:2};};fn(dispatch,getState);(0,_chai.expect)(dispatch.called).to.be.false;}); // There's no nice way to test this at the moment...
it('incrementAsync',function(done){var fn=actions.incrementAsync(1);(0,_chai.expect)(fn).to.be.a('function');var dispatch=(0,_sinon.spy)();fn(dispatch);setTimeout(function(){(0,_chai.expect)(dispatch.calledWith({type:actions.INCREMENT_COUNTER})).to.be.true;done();},5);});}); /* eslint no-unused-expressions: 0 */'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint no-unused-expressions: 0 */var _chai=require('chai');var _sinon=require('sinon');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _Counter=require('../../app/components/Counter');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(){var actions={increment:(0,_sinon.spy)(),incrementIfOdd:(0,_sinon.spy)(),incrementAsync:(0,_sinon.spy)(),decrement:(0,_sinon.spy)()};var component=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_Counter2.default,_extends({counter:1},actions)));return {component:component,actions:actions,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(component,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(component,'counter')};}describe('Counter component',function(){it('should display count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('first button should call increment',function(){var _setup2=setup();var buttons=_setup2.buttons;var actions=_setup2.actions;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(actions.increment.called).to.be.true;});it('second button should call decrement',function(){var _setup3=setup();var buttons=_setup3.buttons;var actions=_setup3.actions;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(actions.decrement.called).to.be.true;});it('third button should call incrementIfOdd',function(){var _setup4=setup();var buttons=_setup4.buttons;var actions=_setup4.actions;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(actions.incrementIfOdd.called).to.be.true;});it('fourth button should call incrementAsync',function(){var _setup5=setup();var buttons=_setup5.buttons;var actions=_setup5.actions;_reactAddonsTestUtils.Simulate.click(buttons[3]);(0,_chai.expect)(actions.incrementAsync.called).to.be.true;});});'use strict';var _chai=require('chai');var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactAddonsTestUtils=require('react-addons-test-utils');var _reactRedux=require('react-redux');var _CounterPage=require('../../app/containers/CounterPage');var _CounterPage2=_interopRequireDefault(_CounterPage);var _configureStore=require('../../app/store/configureStore');var _configureStore2=_interopRequireDefault(_configureStore);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function setup(initialState){var store=(0,_configureStore2.default)(initialState);var app=(0,_reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_CounterPage2.default,null)));return {app:app,buttons:(0,_reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(app,'button').map(function(button){return button;}),p:(0,_reactAddonsTestUtils.findRenderedDOMComponentWithClass)(app,'counter')};}describe('containers',function(){describe('App',function(){it('should display initial count',function(){var _setup=setup();var p=_setup.p;(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should display updated count after increment button click',function(){var _setup2=setup();var buttons=_setup2.buttons;var p=_setup2.p;_reactAddonsTestUtils.Simulate.click(buttons[0]);(0,_chai.expect)(p.textContent).to.match(/^1$/);});it('should display updated count after descrement button click',function(){var _setup3=setup();var buttons=_setup3.buttons;var p=_setup3.p;_reactAddonsTestUtils.Simulate.click(buttons[1]);(0,_chai.expect)(p.textContent).to.match(/^-1$/);});it('shouldnt change if even and if odd button clicked',function(){var _setup4=setup();var buttons=_setup4.buttons;var p=_setup4.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^0$/);});it('should change if odd and if odd button clicked',function(){var _setup5=setup({counter:1});var buttons=_setup5.buttons;var p=_setup5.p;_reactAddonsTestUtils.Simulate.click(buttons[2]);(0,_chai.expect)(p.textContent).to.match(/^2$/);});});});'use strict';var _path=require('path');var _path2=_interopRequireDefault(_path);var _chromedriver=require('chromedriver');var _chromedriver2=_interopRequireDefault(_chromedriver);var _seleniumWebdriver=require('selenium-webdriver');var _seleniumWebdriver2=_interopRequireDefault(_seleniumWebdriver);var _chai=require('chai');var _electronPrebuilt=require('electron-prebuilt');var _electronPrebuilt2=_interopRequireDefault(_electronPrebuilt);var _Home=require('../app/components/Home.css');var _Home2=_interopRequireDefault(_Home);var _Counter=require('../app/components/Counter.css');var _Counter2=_interopRequireDefault(_Counter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else {return Promise.resolve(value).then(function(value){return step("next",value);},function(err){return step("throw",err);});}}return step("next");});};}_chromedriver2.default.start(); // on port 9515
process.on('exit',_chromedriver2.default.stop);var delay=function delay(time){return new Promise(function(resolve){return setTimeout(resolve,time);});};describe('main window',function spec(){var _this=this;this.timeout(5000);before(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delay(1000);case 2: // wait chromedriver start time
_this.driver=new _seleniumWebdriver2.default.Builder().usingServer('http://localhost:9515').withCapabilities({chromeOptions:{binary:_electronPrebuilt2.default,args:['app='+_path2.default.resolve()]}}).forBrowser('electron').build();case 3:case 'end':return _context.stop();}}},_callee,_this);})));after(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.driver.quit();case 2:case 'end':return _context2.stop();}}},_callee2,_this);})));var findCounter=function findCounter(){return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Counter2.default.counter));};var findButtons=function findButtons(){return _this.driver.findElements(_seleniumWebdriver2.default.By.className(_Counter2.default.btn));};it('should open window',_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var title;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.driver.getTitle();case 2:title=_context3.sent;(0,_chai.expect)(title).to.equal('Hello Electron React!');case 4:case 'end':return _context3.stop();}}},_callee3,_this);})));it('should to Counter with click "to Counter" link',_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var link,counter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Home2.default.container+' > a'));case 2:link=_context4.sent;link.click();_context4.next=6;return findCounter();case 6:counter=_context4.sent;_context4.next=9;return counter.getText();case 9:_context4.t0=_context4.sent;(0,_chai.expect)(_context4.t0).to.equal('0');case 11:case 'end':return _context4.stop();}}},_callee4,_this);})));it('should display updated count after increment button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var buttons,counter;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return findButtons();case 2:buttons=_context5.sent;buttons[0].click();_context5.next=6;return findCounter();case 6:counter=_context5.sent;_context5.next=9;return counter.getText();case 9:_context5.t0=_context5.sent;(0,_chai.expect)(_context5.t0).to.equal('1');case 11:case 'end':return _context5.stop();}}},_callee5,_this);})));it('should display updated count after descrement button click',_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var buttons,counter;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return findButtons();case 2:buttons=_context6.sent;_context6.next=5;return findCounter();case 5:counter=_context6.sent;buttons[1].click(); // -
_context6.next=9;return counter.getText();case 9:_context6.t0=_context6.sent;(0,_chai.expect)(_context6.t0).to.equal('0');case 11:case 'end':return _context6.stop();}}},_callee6,_this);})));it('shouldnt change if even and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var buttons,counter;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return findButtons();case 2:buttons=_context7.sent;_context7.next=5;return findCounter();case 5:counter=_context7.sent;buttons[2].click(); // odd
_context7.next=9;return counter.getText();case 9:_context7.t0=_context7.sent;(0,_chai.expect)(_context7.t0).to.equal('0');case 11:case 'end':return _context7.stop();}}},_callee7,_this);})));it('should change if odd and if odd button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var buttons,counter;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return findButtons();case 2:buttons=_context8.sent;_context8.next=5;return findCounter();case 5:counter=_context8.sent;buttons[0].click(); // +
buttons[2].click(); // odd
_context8.next=10;return counter.getText();case 10:_context8.t0=_context8.sent;(0,_chai.expect)(_context8.t0).to.equal('2');case 12:case 'end':return _context8.stop();}}},_callee8,_this);})));it('should change if async button clicked and a second later',_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var buttons,counter;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return findButtons();case 2:buttons=_context9.sent;_context9.next=5;return findCounter();case 5:counter=_context9.sent;buttons[3].click(); // async
_context9.next=9;return counter.getText();case 9:_context9.t0=_context9.sent;(0,_chai.expect)(_context9.t0).to.equal('2');_context9.next=13;return _this.driver.wait(function(){return counter.getText().then(function(text){return text==='3';});},1000,'count not as expected');case 13:case 'end':return _context9.stop();}}},_callee9,_this);})));it('should back to home if back button clicked',_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var link;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.'+_Counter2.default.backButton+' > a'));case 2:link=_context10.sent;link.click();_context10.next=6;return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Home2.default.container));case 6:case 'end':return _context10.stop();}}},_callee10,_this);})));});'use strict';var _chai=require('chai');describe('description',function(){it('description',function(){(0,_chai.expect)(1+2).to.equal(3);});}); /* eslint func-names: 0 */'use strict';var _chai=require('chai');var _counter=require('../../app/reducers/counter');var _counter2=_interopRequireDefault(_counter);var _counter3=require('../../app/actions/counter');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}describe('reducers',function(){describe('counter',function(){it('should handle initial state',function(){(0,_chai.expect)((0,_counter2.default)(undefined,{})).to.equal(0);});it('should handle INCREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.INCREMENT_COUNTER})).to.equal(2);});it('should handle DECREMENT_COUNTER',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:_counter3.DECREMENT_COUNTER})).to.equal(0);});it('should handle unknown action type',function(){(0,_chai.expect)((0,_counter2.default)(1,{type:'unknown'})).to.equal(1);});});});'use strict';require('babel-polyfill');var _jsdom=require('jsdom');global.document=(0,_jsdom.jsdom)('<!doctype html><html><body></body></html>');global.window=document.defaultView;global.navigator=global.window.navigator;window.localStorage=window.sessionStorage={getItem:function getItem(key){return this[key];},setItem:function setItem(key,value){this[key]=value;},removeItem:function removeItem(key){this[key]=undefined;}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _path=require('path');var _path2=_interopRequireDefault(_path);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default={module:{loaders:[{test:/\.jsx?$/,loaders:['babel-loader'],exclude:/node_modules/},{test:/\.json$/,loader:'json-loader'}]},output:{path:_path2.default.join(__dirname,'dist'),filename:'bundle.js',libraryTarget:'commonjs2'},resolve:{extensions:['','.js','.jsx'],packageMains:['webpack','browser','web','browserify',['jam','main'],'main']},plugins:[],externals:[ // put your node 3rd party libraries which can't be built with webpack here
// (mysql, mongodb, and so on..)
]};module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}; /* eslint max-len: 0 */var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{debug:true,devtool:'cheap-module-eval-source-map',entry:['webpack-hot-middleware/client?path=http://localhost:3000/__webpack_hmr','./app/index'],output:_extends({},_webpackConfig2.default.output,{publicPath:'http://localhost:3000/dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loaders:['style-loader','css-loader?sourceMap']},{test:/^((?!\.global).)*\.css$/,loaders:['style-loader','css-loader?modules&sourceMap&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]']}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.HotModuleReplacementPlugin(),new _webpack2.default.NoErrorsPlugin(),new _webpack2.default.DefinePlugin({__DEV__:true,'process.env':{NODE_ENV:JSON.stringify('development')}})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default'];'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}exports.default=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./main.development',output:_extends({},_webpackConfig2.default.output,{path:__dirname,filename:'./main.js'}),plugins:[new _webpack2.default.optimize.UglifyJsPlugin({compressor:{warnings:false}}),new _webpack2.default.BannerPlugin('require("source-map-support").install();',{raw:true,entryOnly:false}),new _webpack2.default.DefinePlugin({'process.env':{NODE_ENV:JSON.stringify('production')}})],target:'electron-main',node:{__dirname:false,__filename:false},externals:[].concat(_toConsumableArray(_webpackConfig2.default.externals),['font-awesome','source-map-support'])});module.exports=exports['default'];'use strict'; // for babel-plugin-webpack-loaders
require('babel-register');var devConfigs=require('./webpack.config.development');module.exports={output:{libraryTarget:'commonjs2'},module:{loaders:devConfigs.module.loaders.slice(1) // remove babel-loader
}};'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _webpack=require('webpack');var _webpack2=_interopRequireDefault(_webpack);var _extractTextWebpackPlugin=require('extract-text-webpack-plugin');var _extractTextWebpackPlugin2=_interopRequireDefault(_extractTextWebpackPlugin);var _webpackConfig=require('./webpack.config.base');var _webpackConfig2=_interopRequireDefault(_webpackConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else {return Array.from(arr);}}var config=_extends({},_webpackConfig2.default,{devtool:'source-map',entry:'./app/index',output:_extends({},_webpackConfig2.default.output,{publicPath:'../dist/'}),module:_extends({},_webpackConfig2.default.module,{loaders:[].concat(_toConsumableArray(_webpackConfig2.default.module.loaders),[{test:/\.(glsl|frag|vert)$/,loader:'raw',exclude:/node_modules/},{test:/\.(glsl|frag|vert)$/,loader:'glslify',exclude:/node_modules/},{test:/\.global\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader')},{test:/^((?!\.global).)*\.css$/,loader:_extractTextWebpackPlugin2.default.extract('style-loader','css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]')}])}),plugins:[].concat(_toConsumableArray(_webpackConfig2.default.plugins),[new _webpack2.default.optimize.OccurenceOrderPlugin(),new _webpack2.default.DefinePlugin({__DEV__:false,'process.env':{NODE_ENV:JSON.stringify('production')}}),new _webpack2.default.optimize.UglifyJsPlugin({compressor:{screw_ie8:true,warnings:false}}),new _extractTextWebpackPlugin2.default('style.css',{allChunks:true})]),target:'electron-renderer'});exports.default=config;module.exports=exports['default']; //# sourceMappingURL=main.development.debug.js.map
'use strict';

var _electron = require('electron');

var _ImageFile = require('./app/utils/ImageFile');

var _ImageFile2 = _interopRequireDefault(_ImageFile);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var menu = void 0;
var commands = void 0;
var template = void 0;
var mainWindow = null;
var canvasId = 0;

if (process.env.NODE_ENV === 'development') {
  require('electron-debug')(); // eslint-disable-line global-require
}

_electron.app.on('window-all-closed', function () {
  if (process.platform !== 'darwin') _electron.app.quit();
});

function createMenuTemplate(commands) {
  var fileMenus = [{
    label: '&File',
    submenu: [{
      label: '&Open',
      accelerator: commands.open,
      click: function click() {
        var filepaths = _electron.dialog.showOpenDialog({
          properties: ['openFile']
        });
        if (filepaths) {
          (function () {
            var id = ++canvasId;
            var filepath = filepaths[0];
            var imageFile = new _ImageFile2.default(filepath);
            imageFile.on('load-init', function () {
              return mainWindow.webContents.send('load-image', { id: id, imageFile: imageFile });
            });
            imageFile.on('load-data', function (pixels) {
              return mainWindow.webContents.send('load-data', { id: id, filepath: filepath, pixels: pixels });
            });
            imageFile.on('load-complete', function () {
              return mainWindow.webContents.send('load-complete', { id: id, filepath: filepath, compressionRatio: imageFile.compressionRatio });
            });
            imageFile.on('load-error', function (message) {
              return _electron.dialog.showMessageBox({
                type: 'error',
                title: 'Failed to load image',
                buttons: ['Close'],
                message: message
              });
            });
            imageFile.load();
          })();
        } else {
          console.error('Failed to load image!');
        }
      }
    }, {
      label: '&Save As',
      accelerator: commands.save,
      click: function click() {
        var filepath = _electron.dialog.showSaveDialog({});
        if (filepath) {
          mainWindow.webContents.send('save-image', filepath);
        }
      }
    }]
  }];
  if (process.platform !== 'darwin') {
    fileMenus[0].submenu.push({
      label: '&Close',
      accelerator: 'Ctrl+W',
      click: function click() {
        mainWindow.close();
      }
    });
  }
  return [].concat(fileMenus, [{
    label: '&View',
    submenu: process.env.NODE_ENV === 'development' ? [{
      label: '&Reload',
      accelerator: commands.reload,
      click: function click() {
        mainWindow.webContents.reload();
      }
    }, {
      label: 'Toggle &Full Screen',
      accelerator: commands.fullscreen,
      click: function click() {
        mainWindow.setFullScreen(!mainWindow.isFullScreen());
      }
    }, {
      label: 'Toggle &Developer Tools',
      accelerator: commands.devTools,
      click: function click() {
        mainWindow.toggleDevTools();
      }
    }] : [{
      label: 'Toggle &Full Screen',
      accelerator: commands.fullscreen,
      click: function click() {
        mainWindow.setFullScreen(!mainWindow.isFullScreen());
      }
    }]
  }, {
    label: 'Help',
    role: 'help',
    submenu: [{
      label: 'Learn More',
      click: function click() {
        _electron.shell.openExternal('https://github.com/psychobolt/imagery');
      }
    }, {
      label: 'Documentation',
      click: function click() {
        _electron.shell.openExternal('https://github.com/psychobolt/imagery/blob/master/README.md');
      }
    }, {
      label: 'Search Issues',
      click: function click() {
        _electron.shell.openExternal('https://github.com/psychobolt/imagery/issues');
      }
    }]
  }]);
}

_electron.app.on('ready', function () {
  mainWindow = new _electron.BrowserWindow({
    show: false,
    width: 1024,
    height: 728
  });

  mainWindow.loadURL('file://' + __dirname + '/app/app.html');

  mainWindow.webContents.on('did-finish-load', function () {
    mainWindow.show();
    mainWindow.focus();
  });

  mainWindow.on('closed', function () {
    mainWindow = null;
  });

  if (process.env.NODE_ENV === 'development') {
    mainWindow.openDevTools();
  }

  if (process.platform === 'darwin') {
    commands = {
      open: 'Command+O',
      save: 'Command+Shift+S',
      hide: 'Command+H',
      quit: 'Command+Q',
      reload: 'Command+R',
      fullscreen: 'Ctrl+Command+F',
      devTools: 'Alt+Command+I'
    };
    template = createMenuTemplate(commands);
    template = [{
      label: 'Imagery',
      submenu: [{
        label: 'About Imagery',
        selector: 'orderFrontStandardAboutPanel:'
      }, {
        type: 'separator'
      }, {
        label: 'Services',
        submenu: []
      }, {
        type: 'separator'
      }, {
        label: 'Hide Imagery',
        accelerator: commands.hide,
        selector: 'hide:'
      }, {
        label: 'Hide Others',
        accelerator: 'Command+Shift+H',
        selector: 'hideOtherApplications:'
      }, {
        label: 'Show All',
        selector: 'unhideAllApplications:'
      }, {
        type: 'separator'
      }, {
        label: 'Quit',
        accelerator: commands.quit,
        click: function click() {
          _electron.app.quit();
        }
      }]
    }].concat(_toConsumableArray(template));

    menu = _electron.Menu.buildFromTemplate(template);
    _electron.Menu.setApplicationMenu(menu);
  } else {
    commands = {
      open: 'Ctrl+O',
      save: 'Ctrl+Shift+S',
      reload: 'Ctrl+R',
      fullscreen: 'F11',
      devTools: 'Alt+Ctrl+I'
    };
    template = createMenuTemplate(commands);
    menu = _electron.Menu.buildFromTemplate(template);
    mainWindow.setMenu(menu);
  }
});
/* eslint strict: 0, no-shadow: 0, no-unused-vars: 0, no-console: 0 */
'use strict';

require('babel-polyfill');
var os = require('os');
var webpack = require('webpack');
var electronCfg = require('./webpack.config.electron.js');
var cfg = require('./webpack.config.production.js');
var packager = require('electron-packager');
var del = require('del');
var exec = require('child_process').exec;
var argv = require('minimist')(process.argv.slice(2));
var pkg = require('./package.json');
var deps = Object.keys(pkg.dependencies);
var devDeps = Object.keys(pkg.devDependencies);

var appName = argv.name || argv.n || pkg.productName;
var shouldUseAsar = argv.asar || argv.a || false;
var shouldBuildAll = argv.all || false;

var DEFAULT_OPTS = {
  dir: './',
  name: appName,
  asar: shouldUseAsar,
  ignore: ['^/test($|/)', '^/tools($|/)', '^/release($|/)', '^/main.development.js'].concat(devDeps.map(function (name) {
    return '/node_modules/' + name + '($|/)';
  })).concat(deps.filter(function (name) {
    return !electronCfg.externals.includes(name);
  }).map(function (name) {
    return '/node_modules/' + name + '($|/)';
  }))
};

var icon = argv.icon || argv.i || 'app/app';

if (icon) {
  DEFAULT_OPTS.icon = icon;
}

var version = argv.version || argv.v;

if (version) {
  DEFAULT_OPTS.version = version;
  startPack();
} else {
  // use the same version as the currently-installed electron-prebuilt
  exec('npm list electron-prebuilt --dev', function (err, stdout) {
    if (err) {
      DEFAULT_OPTS.version = '1.2.0';
    } else {
      DEFAULT_OPTS.version = stdout.split('electron-prebuilt@')[1].replace(/\s/g, '');
    }

    startPack();
  });
}

function build(cfg) {
  return new Promise(function (resolve, reject) {
    webpack(cfg, function (err, stats) {
      if (err) return reject(err);
      resolve(stats);
    });
  });
}

function startPack() {
  console.log('start pack...');
  build(electronCfg).then(function () {
    return build(cfg);
  }).then(function () {
    return del('release');
  }).then(function (paths) {
    if (shouldBuildAll) {
      (function () {
        // build for all platforms
        var archs = ['ia32', 'x64'];
        var platforms = ['linux', 'win32', 'darwin'];

        platforms.forEach(function (plat) {
          archs.forEach(function (arch) {
            pack(plat, arch, log(plat, arch));
          });
        });
      })();
    } else {
      // build for current platform only
      pack(os.platform(), os.arch(), log(os.platform(), os.arch()));
    }
  }).catch(function (err) {
    console.error(err);
  });
}

function pack(plat, arch, cb) {
  // there is no darwin ia32 electron
  if (plat === 'darwin' && arch === 'ia32') return;

  var iconObj = {
    icon: DEFAULT_OPTS.icon + function () {
      var extension = '.png';
      if (plat === 'darwin') {
        extension = '.icns';
      } else if (plat === 'win32') {
        extension = '.ico';
      }
      return extension;
    }()
  };

  var opts = Object.assign({}, DEFAULT_OPTS, iconObj, {
    platform: plat,
    arch: arch,
    prune: true,
    'app-version': pkg.version || DEFAULT_OPTS.version,
    out: 'release/' + plat + '-' + arch
  });

  packager(opts, cb);
}

function log(plat, arch) {
  return function (err, filepath) {
    if (err) return console.error(err);
    console.log(plat + '-' + arch + ' finished!');
  };
}
'use strict';

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackDevMiddleware = require('webpack-dev-middleware');

var _webpackDevMiddleware2 = _interopRequireDefault(_webpackDevMiddleware);

var _webpackHotMiddleware = require('webpack-hot-middleware');

var _webpackHotMiddleware2 = _interopRequireDefault(_webpackHotMiddleware);

var _webpackConfig = require('./webpack.config.development');

var _webpackConfig2 = _interopRequireDefault(_webpackConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = (0, _express2.default)(); /* eslint no-console: 0 */

var compiler = (0, _webpack2.default)(_webpackConfig2.default);
var PORT = 3000;

var wdm = (0, _webpackDevMiddleware2.default)(compiler, {
  publicPath: _webpackConfig2.default.output.publicPath,
  stats: {
    colors: true
  }
});

app.use(wdm);

app.use((0, _webpackHotMiddleware2.default)(compiler));

var server = app.listen(PORT, 'localhost', function (err) {
  if (err) {
    console.error(err);
    return;
  }

  console.log('Listening at http://localhost:' + PORT);
});

process.on('SIGTERM', function () {
  console.log('Stopping dev server');
  wdm.close();
  server.close(function () {
    process.exit(0);
  });
});
'use strict';

var _chai = require('chai');

var _sinon = require('sinon');

var _counter = require('../../app/actions/counter');

var actions = _interopRequireWildcard(_counter);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

describe('actions', function () {
  it('increment should create increment action', function () {
    (0, _chai.expect)(actions.increment()).to.deep.equal({ type: actions.INCREMENT_COUNTER });
  });

  it('decrement should create decrement action', function () {
    (0, _chai.expect)(actions.decrement()).to.deep.equal({ type: actions.DECREMENT_COUNTER });
  });

  it('incrementIfOdd should create increment action', function () {
    var fn = actions.incrementIfOdd();
    (0, _chai.expect)(fn).to.be.a('function');
    var dispatch = (0, _sinon.spy)();
    var getState = function getState() {
      return { counter: 1 };
    };
    fn(dispatch, getState);
    (0, _chai.expect)(dispatch.calledWith({ type: actions.INCREMENT_COUNTER })).to.be.true;
  });

  it('incrementIfOdd shouldnt create increment action if counter is even', function () {
    var fn = actions.incrementIfOdd();
    var dispatch = (0, _sinon.spy)();
    var getState = function getState() {
      return { counter: 2 };
    };
    fn(dispatch, getState);
    (0, _chai.expect)(dispatch.called).to.be.false;
  });

  // There's no nice way to test this at the moment...
  it('incrementAsync', function (done) {
    var fn = actions.incrementAsync(1);
    (0, _chai.expect)(fn).to.be.a('function');
    var dispatch = (0, _sinon.spy)();
    fn(dispatch);
    setTimeout(function () {
      (0, _chai.expect)(dispatch.calledWith({ type: actions.INCREMENT_COUNTER })).to.be.true;
      done();
    }, 5);
  });
}); /* eslint no-unused-expressions: 0 */
'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint no-unused-expressions: 0 */


var _chai = require('chai');

var _sinon = require('sinon');

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactAddonsTestUtils = require('react-addons-test-utils');

var _Counter = require('../../app/components/Counter');

var _Counter2 = _interopRequireDefault(_Counter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function setup() {
  var actions = {
    increment: (0, _sinon.spy)(),
    incrementIfOdd: (0, _sinon.spy)(),
    incrementAsync: (0, _sinon.spy)(),
    decrement: (0, _sinon.spy)()
  };
  var component = (0, _reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(_Counter2.default, _extends({ counter: 1 }, actions)));
  return {
    component: component,
    actions: actions,
    buttons: (0, _reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(component, 'button').map(function (button) {
      return button;
    }),
    p: (0, _reactAddonsTestUtils.findRenderedDOMComponentWithClass)(component, 'counter')
  };
}

describe('Counter component', function () {
  it('should display count', function () {
    var _setup = setup();

    var p = _setup.p;

    (0, _chai.expect)(p.textContent).to.match(/^1$/);
  });

  it('first button should call increment', function () {
    var _setup2 = setup();

    var buttons = _setup2.buttons;
    var actions = _setup2.actions;

    _reactAddonsTestUtils.Simulate.click(buttons[0]);
    (0, _chai.expect)(actions.increment.called).to.be.true;
  });

  it('second button should call decrement', function () {
    var _setup3 = setup();

    var buttons = _setup3.buttons;
    var actions = _setup3.actions;

    _reactAddonsTestUtils.Simulate.click(buttons[1]);
    (0, _chai.expect)(actions.decrement.called).to.be.true;
  });

  it('third button should call incrementIfOdd', function () {
    var _setup4 = setup();

    var buttons = _setup4.buttons;
    var actions = _setup4.actions;

    _reactAddonsTestUtils.Simulate.click(buttons[2]);
    (0, _chai.expect)(actions.incrementIfOdd.called).to.be.true;
  });

  it('fourth button should call incrementAsync', function () {
    var _setup5 = setup();

    var buttons = _setup5.buttons;
    var actions = _setup5.actions;

    _reactAddonsTestUtils.Simulate.click(buttons[3]);
    (0, _chai.expect)(actions.incrementAsync.called).to.be.true;
  });
});
'use strict';

var _chai = require('chai');

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactAddonsTestUtils = require('react-addons-test-utils');

var _reactRedux = require('react-redux');

var _CounterPage = require('../../app/containers/CounterPage');

var _CounterPage2 = _interopRequireDefault(_CounterPage);

var _configureStore = require('../../app/store/configureStore');

var _configureStore2 = _interopRequireDefault(_configureStore);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function setup(initialState) {
  var store = (0, _configureStore2.default)(initialState);
  var app = (0, _reactAddonsTestUtils.renderIntoDocument)(_react2.default.createElement(
    _reactRedux.Provider,
    { store: store },
    _react2.default.createElement(_CounterPage2.default, null)
  ));
  return {
    app: app,
    buttons: (0, _reactAddonsTestUtils.scryRenderedDOMComponentsWithTag)(app, 'button').map(function (button) {
      return button;
    }),
    p: (0, _reactAddonsTestUtils.findRenderedDOMComponentWithClass)(app, 'counter')
  };
}

describe('containers', function () {
  describe('App', function () {
    it('should display initial count', function () {
      var _setup = setup();

      var p = _setup.p;

      (0, _chai.expect)(p.textContent).to.match(/^0$/);
    });

    it('should display updated count after increment button click', function () {
      var _setup2 = setup();

      var buttons = _setup2.buttons;
      var p = _setup2.p;

      _reactAddonsTestUtils.Simulate.click(buttons[0]);
      (0, _chai.expect)(p.textContent).to.match(/^1$/);
    });

    it('should display updated count after descrement button click', function () {
      var _setup3 = setup();

      var buttons = _setup3.buttons;
      var p = _setup3.p;

      _reactAddonsTestUtils.Simulate.click(buttons[1]);
      (0, _chai.expect)(p.textContent).to.match(/^-1$/);
    });

    it('shouldnt change if even and if odd button clicked', function () {
      var _setup4 = setup();

      var buttons = _setup4.buttons;
      var p = _setup4.p;

      _reactAddonsTestUtils.Simulate.click(buttons[2]);
      (0, _chai.expect)(p.textContent).to.match(/^0$/);
    });

    it('should change if odd and if odd button clicked', function () {
      var _setup5 = setup({ counter: 1 });

      var buttons = _setup5.buttons;
      var p = _setup5.p;

      _reactAddonsTestUtils.Simulate.click(buttons[2]);
      (0, _chai.expect)(p.textContent).to.match(/^2$/);
    });
  });
});
'use strict';

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _chromedriver = require('chromedriver');

var _chromedriver2 = _interopRequireDefault(_chromedriver);

var _seleniumWebdriver = require('selenium-webdriver');

var _seleniumWebdriver2 = _interopRequireDefault(_seleniumWebdriver);

var _chai = require('chai');

var _electronPrebuilt = require('electron-prebuilt');

var _electronPrebuilt2 = _interopRequireDefault(_electronPrebuilt);

var _Home = require('../app/components/Home.css');

var _Home2 = _interopRequireDefault(_Home);

var _Counter = require('../app/components/Counter.css');

var _Counter2 = _interopRequireDefault(_Counter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step("next", value); }, function (err) { return step("throw", err); }); } } return step("next"); }); }; }

_chromedriver2.default.start(); // on port 9515
process.on('exit', _chromedriver2.default.stop);

var delay = function delay(time) {
  return new Promise(function (resolve) {
    return setTimeout(resolve, time);
  });
};

describe('main window', function spec() {
  var _this = this;

  this.timeout(5000);

  before(_asyncToGenerator(regeneratorRuntime.mark(function _callee() {
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return delay(1000);

          case 2:
            // wait chromedriver start time
            _this.driver = new _seleniumWebdriver2.default.Builder().usingServer('http://localhost:9515').withCapabilities({
              chromeOptions: {
                binary: _electronPrebuilt2.default,
                args: ['app=' + _path2.default.resolve()]
              }
            }).forBrowser('electron').build();

          case 3:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, _this);
  })));

  after(_asyncToGenerator(regeneratorRuntime.mark(function _callee2() {
    return regeneratorRuntime.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return _this.driver.quit();

          case 2:
          case 'end':
            return _context2.stop();
        }
      }
    }, _callee2, _this);
  })));

  var findCounter = function findCounter() {
    return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Counter2.default.counter));
  };

  var findButtons = function findButtons() {
    return _this.driver.findElements(_seleniumWebdriver2.default.By.className(_Counter2.default.btn));
  };

  it('should open window', _asyncToGenerator(regeneratorRuntime.mark(function _callee3() {
    var title;
    return regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return _this.driver.getTitle();

          case 2:
            title = _context3.sent;

            (0, _chai.expect)(title).to.equal('Hello Electron React!');

          case 4:
          case 'end':
            return _context3.stop();
        }
      }
    }, _callee3, _this);
  })));

  it('should to Counter with click "to Counter" link', _asyncToGenerator(regeneratorRuntime.mark(function _callee4() {
    var link, counter;
    return regeneratorRuntime.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            _context4.next = 2;
            return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.' + _Home2.default.container + ' > a'));

          case 2:
            link = _context4.sent;

            link.click();

            _context4.next = 6;
            return findCounter();

          case 6:
            counter = _context4.sent;
            _context4.next = 9;
            return counter.getText();

          case 9:
            _context4.t0 = _context4.sent;
            (0, _chai.expect)(_context4.t0).to.equal('0');

          case 11:
          case 'end':
            return _context4.stop();
        }
      }
    }, _callee4, _this);
  })));

  it('should display updated count after increment button click', _asyncToGenerator(regeneratorRuntime.mark(function _callee5() {
    var buttons, counter;
    return regeneratorRuntime.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _context5.next = 2;
            return findButtons();

          case 2:
            buttons = _context5.sent;

            buttons[0].click();

            _context5.next = 6;
            return findCounter();

          case 6:
            counter = _context5.sent;
            _context5.next = 9;
            return counter.getText();

          case 9:
            _context5.t0 = _context5.sent;
            (0, _chai.expect)(_context5.t0).to.equal('1');

          case 11:
          case 'end':
            return _context5.stop();
        }
      }
    }, _callee5, _this);
  })));

  it('should display updated count after descrement button click', _asyncToGenerator(regeneratorRuntime.mark(function _callee6() {
    var buttons, counter;
    return regeneratorRuntime.wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            _context6.next = 2;
            return findButtons();

          case 2:
            buttons = _context6.sent;
            _context6.next = 5;
            return findCounter();

          case 5:
            counter = _context6.sent;


            buttons[1].click(); // -

            _context6.next = 9;
            return counter.getText();

          case 9:
            _context6.t0 = _context6.sent;
            (0, _chai.expect)(_context6.t0).to.equal('0');

          case 11:
          case 'end':
            return _context6.stop();
        }
      }
    }, _callee6, _this);
  })));

  it('shouldnt change if even and if odd button clicked', _asyncToGenerator(regeneratorRuntime.mark(function _callee7() {
    var buttons, counter;
    return regeneratorRuntime.wrap(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            _context7.next = 2;
            return findButtons();

          case 2:
            buttons = _context7.sent;
            _context7.next = 5;
            return findCounter();

          case 5:
            counter = _context7.sent;

            buttons[2].click(); // odd

            _context7.next = 9;
            return counter.getText();

          case 9:
            _context7.t0 = _context7.sent;
            (0, _chai.expect)(_context7.t0).to.equal('0');

          case 11:
          case 'end':
            return _context7.stop();
        }
      }
    }, _callee7, _this);
  })));

  it('should change if odd and if odd button clicked', _asyncToGenerator(regeneratorRuntime.mark(function _callee8() {
    var buttons, counter;
    return regeneratorRuntime.wrap(function _callee8$(_context8) {
      while (1) {
        switch (_context8.prev = _context8.next) {
          case 0:
            _context8.next = 2;
            return findButtons();

          case 2:
            buttons = _context8.sent;
            _context8.next = 5;
            return findCounter();

          case 5:
            counter = _context8.sent;


            buttons[0].click(); // +
            buttons[2].click(); // odd

            _context8.next = 10;
            return counter.getText();

          case 10:
            _context8.t0 = _context8.sent;
            (0, _chai.expect)(_context8.t0).to.equal('2');

          case 12:
          case 'end':
            return _context8.stop();
        }
      }
    }, _callee8, _this);
  })));

  it('should change if async button clicked and a second later', _asyncToGenerator(regeneratorRuntime.mark(function _callee9() {
    var buttons, counter;
    return regeneratorRuntime.wrap(function _callee9$(_context9) {
      while (1) {
        switch (_context9.prev = _context9.next) {
          case 0:
            _context9.next = 2;
            return findButtons();

          case 2:
            buttons = _context9.sent;
            _context9.next = 5;
            return findCounter();

          case 5:
            counter = _context9.sent;

            buttons[3].click(); // async

            _context9.next = 9;
            return counter.getText();

          case 9:
            _context9.t0 = _context9.sent;
            (0, _chai.expect)(_context9.t0).to.equal('2');
            _context9.next = 13;
            return _this.driver.wait(function () {
              return counter.getText().then(function (text) {
                return text === '3';
              });
            }, 1000, 'count not as expected');

          case 13:
          case 'end':
            return _context9.stop();
        }
      }
    }, _callee9, _this);
  })));

  it('should back to home if back button clicked', _asyncToGenerator(regeneratorRuntime.mark(function _callee10() {
    var link;
    return regeneratorRuntime.wrap(function _callee10$(_context10) {
      while (1) {
        switch (_context10.prev = _context10.next) {
          case 0:
            _context10.next = 2;
            return _this.driver.findElement(_seleniumWebdriver2.default.By.css('.' + _Counter2.default.backButton + ' > a'));

          case 2:
            link = _context10.sent;

            link.click();

            _context10.next = 6;
            return _this.driver.findElement(_seleniumWebdriver2.default.By.className(_Home2.default.container));

          case 6:
          case 'end':
            return _context10.stop();
        }
      }
    }, _callee10, _this);
  })));
});
'use strict';

var _chai = require('chai');

describe('description', function () {
  it('description', function () {
    (0, _chai.expect)(1 + 2).to.equal(3);
  });
}); /* eslint func-names: 0 */
'use strict';

var _chai = require('chai');

var _counter = require('../../app/reducers/counter');

var _counter2 = _interopRequireDefault(_counter);

var _counter3 = require('../../app/actions/counter');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('reducers', function () {
  describe('counter', function () {
    it('should handle initial state', function () {
      (0, _chai.expect)((0, _counter2.default)(undefined, {})).to.equal(0);
    });

    it('should handle INCREMENT_COUNTER', function () {
      (0, _chai.expect)((0, _counter2.default)(1, { type: _counter3.INCREMENT_COUNTER })).to.equal(2);
    });

    it('should handle DECREMENT_COUNTER', function () {
      (0, _chai.expect)((0, _counter2.default)(1, { type: _counter3.DECREMENT_COUNTER })).to.equal(0);
    });

    it('should handle unknown action type', function () {
      (0, _chai.expect)((0, _counter2.default)(1, { type: 'unknown' })).to.equal(1);
    });
  });
});
'use strict';

require('babel-polyfill');

var _jsdom = require('jsdom');

global.document = (0, _jsdom.jsdom)('<!doctype html><html><body></body></html>');
global.window = document.defaultView;
global.navigator = global.window.navigator;
window.localStorage = window.sessionStorage = {
  getItem: function getItem(key) {
    return this[key];
  },
  setItem: function setItem(key, value) {
    this[key] = value;
  },
  removeItem: function removeItem(key) {
    this[key] = undefined;
  }
};
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  module: {
    loaders: [{
      test: /\.jsx?$/,
      loaders: ['babel-loader'],
      exclude: /node_modules/
    }, {
      test: /\.json$/,
      loader: 'json-loader'
    }]
  },
  output: {
    path: _path2.default.join(__dirname, 'dist'),
    filename: 'bundle.js',
    libraryTarget: 'commonjs2'
  },
  resolve: {
    extensions: ['', '.js', '.jsx'],
    packageMains: ['webpack', 'browser', 'web', 'browserify', ['jam', 'main'], 'main']
  },
  plugins: [],
  externals: [
    // put your node 3rd party libraries which can't be built with webpack here
    // (mysql, mongodb, and so on..)
  ]
};
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /* eslint max-len: 0 */


var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackConfig = require('./webpack.config.base');

var _webpackConfig2 = _interopRequireDefault(_webpackConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var config = _extends({}, _webpackConfig2.default, {

  debug: true,

  devtool: 'cheap-module-eval-source-map',

  entry: ['webpack-hot-middleware/client?path=http://localhost:3000/__webpack_hmr', './app/index'],

  output: _extends({}, _webpackConfig2.default.output, {
    publicPath: 'http://localhost:3000/dist/'
  }),

  module: _extends({}, _webpackConfig2.default.module, {
    loaders: [].concat(_toConsumableArray(_webpackConfig2.default.module.loaders), [{ test: /\.(glsl|frag|vert)$/, loader: 'raw', exclude: /node_modules/ }, { test: /\.(glsl|frag|vert)$/, loader: 'glslify', exclude: /node_modules/ }, {
      test: /\.global\.css$/,
      loaders: ['style-loader', 'css-loader?sourceMap']
    }, {
      test: /^((?!\.global).)*\.css$/,
      loaders: ['style-loader', 'css-loader?modules&sourceMap&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]']
    }])
  }),

  plugins: [].concat(_toConsumableArray(_webpackConfig2.default.plugins), [new _webpack2.default.HotModuleReplacementPlugin(), new _webpack2.default.NoErrorsPlugin(), new _webpack2.default.DefinePlugin({
    __DEV__: true,
    'process.env': {
      NODE_ENV: JSON.stringify('development')
    }
  })]),

  target: 'electron-renderer'
});

exports.default = config;
module.exports = exports['default'];
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackConfig = require('./webpack.config.base');

var _webpackConfig2 = _interopRequireDefault(_webpackConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

exports.default = _extends({}, _webpackConfig2.default, {

  devtool: 'source-map',

  entry: './main.development',

  output: _extends({}, _webpackConfig2.default.output, {
    path: __dirname,
    filename: './main.js'
  }),

  plugins: [new _webpack2.default.optimize.UglifyJsPlugin({
    compressor: {
      warnings: false
    }
  }), new _webpack2.default.BannerPlugin('require("source-map-support").install();', { raw: true, entryOnly: false }), new _webpack2.default.DefinePlugin({
    'process.env': {
      NODE_ENV: JSON.stringify('production')
    }
  })],

  target: 'electron-main',

  node: {
    __dirname: false,
    __filename: false
  },

  externals: [].concat(_toConsumableArray(_webpackConfig2.default.externals), ['font-awesome', 'source-map-support'])
});
module.exports = exports['default'];
'use strict';

// for babel-plugin-webpack-loaders
require('babel-register');
var devConfigs = require('./webpack.config.development');

module.exports = {
  output: {
    libraryTarget: 'commonjs2'
  },
  module: {
    loaders: devConfigs.module.loaders.slice(1) // remove babel-loader
  }
};
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _extractTextWebpackPlugin = require('extract-text-webpack-plugin');

var _extractTextWebpackPlugin2 = _interopRequireDefault(_extractTextWebpackPlugin);

var _webpackConfig = require('./webpack.config.base');

var _webpackConfig2 = _interopRequireDefault(_webpackConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var config = _extends({}, _webpackConfig2.default, {

  devtool: 'source-map',

  entry: './app/index',

  output: _extends({}, _webpackConfig2.default.output, {

    publicPath: '../dist/'
  }),

  module: _extends({}, _webpackConfig2.default.module, {

    loaders: [].concat(_toConsumableArray(_webpackConfig2.default.module.loaders), [{ test: /\.(glsl|frag|vert)$/, loader: 'raw', exclude: /node_modules/ }, { test: /\.(glsl|frag|vert)$/, loader: 'glslify', exclude: /node_modules/ }, {
      test: /\.global\.css$/,
      loader: _extractTextWebpackPlugin2.default.extract('style-loader', 'css-loader')
    }, {
      test: /^((?!\.global).)*\.css$/,
      loader: _extractTextWebpackPlugin2.default.extract('style-loader', 'css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]')
    }])
  }),

  plugins: [].concat(_toConsumableArray(_webpackConfig2.default.plugins), [new _webpack2.default.optimize.OccurenceOrderPlugin(), new _webpack2.default.DefinePlugin({
    __DEV__: false,
    'process.env': {
      NODE_ENV: JSON.stringify('production')
    }
  }), new _webpack2.default.optimize.UglifyJsPlugin({
    compressor: {
      screw_ie8: true,
      warnings: false
    }
  }), new _extractTextWebpackPlugin2.default('style.css', { allChunks: true })]),

  target: 'electron-renderer'
});

exports.default = config;
module.exports = exports['default'];

//# sourceMappingURL=main.development.debug.js.map